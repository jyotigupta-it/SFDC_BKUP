<!--************XXX*********************

    Developer       :Mohd.Numaan Ahmed
    Page Name       :Additional_Dics_Opp
    version         :1.0
    Date            :07-Jan-2015
    Modified Date   :20-Jan-2015
    Description     :
     
****************XXX**********************-->
<apex:page sidebar="false" Controller="Additional_Dics_Opp_Controller" showHeader="false" docType="html-5.0" >
<meta name="viewport" content="width=device-width, initial-scale=1"/>
  
  <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script type='text/javascript' src='/canvas/sdk/js/publisher.js'/>
  <apex:slds />
    <style>
        
        .ac_checked_date {
            background-color:lightblue;
        }
        
        .waitingSearchDiv {
            position: absolute;
            text-align: center;PL_TOURPLAN_CALENDAR_CLONE2 line 595, column 91: Element type "button" must be followed by either attribute specifications, ">" or "/>"  
￼   Error: Element type "button" must be followed by either attribute specifications, ">" or "/>".  
  = Required InformationPage Information
            top: 0;
            z-index: 80;
            left: 0;
        }
        .waitingSearchDiv .waitingHolder, .waitingSearchDiv .waitingSearchHolder {
            border: none;
            background-color: transparent;
            font-size: 1em;
            font-weight: normal;
            padding: 0;
        }
        .waitingSearchDiv .waitingHolder {
            font-weight: bold;
            font-size: 1.20em;
            position: relative;
            padding: .5em;
            white-space: nowrap;
            margin: auto;
            width: 40%;
            top: 45%;
        } 
        
        .ui-dialog-title{
            font-size: 18px !important;
            
        }
        
        .ui-dialog .ui-dialog-titlebar-close {
            width: 35px;
            height: 30px;
        }
   PL_TOURPLAN_CALENDAR_CLONE2 line 595, column 91: Element type "button" must be followed by either attribute specifications, ">" or "/>"  
￼   Error: Element type "button" must be followed by either attribute specifications, ">" or "/>".  
  = Required InformationPage Information
        
        //
        //.button.ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-icon-only.ui-dialog-titlebar-close padding-left:30px;
        
        #calendar {
        display: inline-block;
        vertical-align: top;
        }
        
        #wrap {
        margin: 0 auto;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
        
        }
        
        .leftPanel {
            
        }
        
        #external-events {
        display: inline-block;
        vertical-align: top;
        padding: 0;
        text-align: left;
        border-radius:5px 5px 0 0;
        }
        
        .dataWidgets {
            background: #14558E;
            box-shadow: 1px 1px 1px #000672;
            color: #fff;
            padding: 5px;
            border-radius: 5px;
        }
        
        .heading {
            margin-top: 0;
            padding-top: 1em;
            background-color: #006074;
            color: #fff;
            font-size: 14px;
            font-weight: normal;
            padding: 6px;
            height: 12px;
            border-radius: 5px 5px 0 0;
        }
        
        .filterResults .heading table td {
            color: #fff !important;
            font-size: 12px;
            vertical-align: top;
            text-align: center;
        }
        
        /*Added */
        .filterPanel {
            height: 175px;
            background-color: #ededed;
            border: none;
            border-radius: 5px;
        }
        
        label {
            display: inline-block;
        }
        
        .external-event-row { /* try to mimick the look of a real event */
            margin: 0;
            padding: 10px 4px;
            font-size: .85em;
            cursor: pointer;
        }
        
        .external-event-row:nth-child(odd) {
            background: #EDEDED;
        }
        
        .external-event-row:nth-child(even) {
            background: #D7D7D7;
        }
        
        #external-events p {
        margin: 1.5em 0;
        font-size: 11px;
        color: #666;
        }
        
        #external-events p input {
        margin: 0;
        vertical-align: middle;
        }
        
        .acctName {
            width: 100px;
            border-radius: 5px;
            text-align: center;
            padding: 2px;
        }
        
        .aphabeticFilter {
            width: 100%;
            overflow-wrap: break-word;
            padding: 10px 0;
        }
        
        .aphabeticFilter a {
            text-decoration: none;
            color: #2B608B;
            margin: 2px;
            font-size: 12px;
        }
        
        .filterBody{
            padding: 5px;
        }
        
        .resultContainer {
            min-height: 5px;
            /*overflow-x: hidden;
                overflow-y: auto;*/
            }
        
        .noResults {
            text-align:center;
            padding: 5px;
        }
        
        .contentCls {
            width: 45px;
            text-align: center;
        }
        
        .Dealer {
            background: #8DBE3D;
        }
        
        .Customer {
            background: #4FC7E9;
        }
        
        .Prospect {
            background: #EBC13D;
        }
        
        .pageTitle {
            font-size: 20px;
            padding-bottom: 20px;
            color: #F4492E;
        }
        
        .mapIt {
            float: right;
            display: inline;
            background-color: #fbfbfb;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0px 0px 5px #474747;
            color: #185ea3;
            font-weight: bold;
            font-size: 16px;
            width: 275px;
            text-align: center;
            cursor:pointer;
        }
        
        table th,
            table td {
                text-align: left;
            }
        
        table.layout {
            width: 100%;
            border-collapse: collapse;
        }
        
        table.display {
            margin: 1em 0;
        }
        
        table.display th,
            table.display td{
                border: 1px solid #B3BFAA;
                padding: .5em 1em;
            }
        
        table.display th { background: #D5E0CC; }
        table.display td { background: #fff; }
        
        table.responsive-table {
            box-shadow: 0 1px 10px rgba(0, 0, 0, 0.2);
        }
                          .custombadge {
                              display: inline-block;
                              min-width: 10px;
                              padding: 3px 7px;
                              padding-top: 3px;
                              padding-right: 7px;
                              padding-bottom: 3px;
                              padding-left: 7px;
                              font-size: 12px;
                              font-weight: 700;
                              line-height: 1;
                              color: #fff;
                              text-align: center;
                              white-space: nowrap;
                              vertical-align: baseline;
                              border-radius: 10px;
                          }
                          
                          .checkdropdown {
                              height: 75px!important;
                          }
                          
                          .checkdropdown1 {
                              height: 190px!important;
                          }
                          
                          .fc-other-month .fc-day-number { display:none;}
                          .ui-accordion .ui-accordion-content {padding:0px!important;}
                      <!--    .tg  {border-collapse:collapse;border-spacing:0;border-color:#999;width:100%;height:100%}
                          .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#999;color:#444;background-color:#F7FDFA;}
                          .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#999;color:#fff;background-color:#26ADE4;}
                          .tg .tg-733k{font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif !important;}
                                 .tg .tg-il5c{background-color:#D2E4FC;font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif !important;  text-align: -webkit-center}-->
                               .fc-first {
                                 border-left: 1px solid #ddd!important;
                                 border-top: 1px solid #ddd!important;
                                  }
                                  .fc-day-header{background: #fafaf9!important;border-top: 1px solid #ddd!important;border-right: 1px solid #ddd!important;}
                                  .fc-past, .fc-future {background: none;}
    .ui-widget-header{font-family: "Salesforce Sans",Arial,sans-serif!important; text-transform: uppercase!important;color: #54698d;line-height: 1.25;font-size:15px!important;}
                               
                               .ui-widget-content,.ui-widget-header{background-color:#fff;}
    .ui-widget-overlay{background-color: #000;opacity: 0.5;background-image: none;}
    .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default{ background:none;}
    .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active{color: #676767;}
    .slds-table thead th {background: #fafaf9;}
    .ui-widget-header{background:none;font-weight: normal!important;border: none;
    border-radius: 0;}
    table.fc-border-separate {border-collapse: collapse;}
    .ui-widget-overlay {
    background-color: #000;
    opacity: 0.5;
    background-image: none;
}

 label {  font-family: "Salesforce Sans",Arial,sans-serif!important; }
 .ui-accordion-header {
     background: #fafaf9!important;
    border: 1px solid #ddd!important;
    color: #6f6f6f!important;
   }
    .relative_pos {
    position:relative;
    }
    .abs_pos {
    position:absolute;
    top: 5px;
    right: 16px;
    }
   .ui-dialog-buttonpane .ui-button-text {
    padding-left: 1rem;
    padding-right: 1rem;
    text-align: center;
    vertical-align: middle;
    background-color: #0070d2;
    border: 1px solid #0070d2;
    color: #fff;
    font-weight:normal!important;
        font-size: .75rem;
    }
    .ui-state-active, 
.ui-widget-content .ui-state-active, 
.ui-widget-header .ui-state-active,
.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{ border: 1px solid #ddd;
font-weight:normal;
}
.fc-header-right {
text-align: right!important;
font-size:12px;
}
.fc-header-left {
font-size:12px;
}
.fc-header-center {
text-align: center!important;
}
                                @media only screen and (min-width: 250px) and (max-width: 770px)
                                {
                                   .ui-dialog {
                                   width:90%!important;}
                                   #button {
                                   padding:0px!important;
                                   }
                                   .tpr {
                                   display:block!important;
                                   width:146px!important;
                                   margin-left:0px!important;
                                   margin-top:5px!important;
                                   }
                                   .slds-truncate {
                                   white-space:normal!important;
                                   }
                                   .fc-header-center {
                                    font-size:12px;
                                    }
                                    #button {
                                    margin:0px!important;
                                    }
                                
                                }                             
  
              
              
              .modal {
                display: none; /* Hidden by default */
                position: fixed; /* Stay in place */
                z-index: 1; /* Sit on top */
                padding-top: 100px; /* Location of the box */
                left: 0;
                top: 0;
                width: 100%; /* Full width */
                height: 100%; /* Full height */
                overflow: auto; /* Enable scroll if needed */
                background-color: rgb(0,0,0); /* Fallback color */
                background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
                z-index:999999;
            }
            
            /* Modal Content */
            .modal-content {
                background-color: #fefefe;
                margin: auto;
                padding: 20px;
                border: 1px solid #888;
                width: 80%;
            }
            
            /* The Close Button */
            .close {
                color: #aaaaaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
            }
            
            .close:hover,
            .close:focus {
                color: #000;
                text-decoration: none;
                cursor: pointer;
            }
     </style>
    <style type="text/css">
       .slds-input {
       width:200px!important;
       }
       .look_css {
       position:relative;
       }
       .look_css a {
       position:absolute;
       top: 6px;
        right: 3px;
       }
       .look_css input[type="text"] {
           background-color: #fff;
    color: #16325c;
    border: 1px solid #d8dde6;
    border-radius: .25rem;
    width:200px;
    transition: border .1s linear,background-color .1s linear;
    display: inline-block;
    padding: 0 1rem 0 .75rem;
    line-height: 1.875rem;
    min-height: calc(1.875rem + (1px * 2));
}


        .requiredInput .requiredBlock {background-color: transparent; }

        .requiredInput .requiredBlock::before { display: block; content: ""; font-size: 1.5em; font-weight: bold;  color: #c00; margin-left: -4px; margin-top: -2px; }
    @media only screen and (min-width: 250px) and (max-width: 770px) {
    .slds-input {
       width:150px!important;
       }
    }
    </style>

   <!-- <c:AP_JQUERY_Component />-->
  <!--  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>-->

    <script type="text/javascript">
        var j$ = jQuery.noConflict();
        var newWin=null;
       /* function savespr(){
         alert("Please click on SPR Check then save");
        }*/
        function makeMandatory(x_Value,x_Checked){
            if(x_Checked) {
                j$("."+x_Value+"I").addClass('requiredInput');
                j$("."+x_Value+"B").addClass('requiredBlock');
            }
            else {
                j$("."+x_Value+"I").removeClass('requiredInput');
                j$("."+x_Value+"B").removeClass('requiredBlock');
            }            
            }
       
    </script>
    
  <apex:pageMessages />
    <apex:form id="theform">
        <apex:outputpanel >
             <apex:actionstatus id="status">
                 <apex:facet name="start">
                     <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;
                            height: 100%;opacity:0.65;width:100%;"> 
                         <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                             <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                             <span class="waitingDescription">Loading...</span>
                         </div>
                     </div>
                 </apex:facet>
             </apex:actionstatus>
        </apex:outputpanel>
     <!----------------------------------------distributor name popup------------------------------------- -->
              <div id="myModal" class="modal">    
                   <div class="modal-content" >
                        <span class="close">&times;</span>
                        
                          <apex:outputpanel id="lookupPanel"  styleclass="outpanel">   
                         
                         
                             <div class="slds-page-header">
                                  <div clss="slds-media">
                                    <div class="slds-media__body">
                                     <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                     <p class="slds-text-body_small slds-line-height_reset"></p>
                                    </div>
                                  </div>
                              </div>
                            
                            <div class="slds-p-around_x-small">
                                <p>Please enter the search term below and click the 'Go' button.  This will
                                   execute a search across all text fields</p>
                                <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>    
                             
                                
                                
                                <apex:input value="{!query}" id="query" disabled="false" type="text"/> 
                                <span><apex:commandButton value="Go" action="{!runQuery}" rerender="lookupPanel,dptable"/></span>
                                
                            </div>
                            
                          <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptable">
                              <thead>
                                <tr class="slds-text-title_caps">
                                    <th>Name</th>
                                    <th>Party Type</th>
                                    <th>Contact number(mobile)</th>
                                    <th>Status </th>
                                    <th>State </th>
                                    <th>District</th>
                                    <th>Location</th>
                                    
                                </tr>   
                              </thead>
                              <tbody id="myTable">   
                                  
                                  <apex:repeat value="{!accounts}" var="account">
                           
                                         
                                                          
                                              <tr class="slds-hint-parent">
                                                  <td data-label="Name" >
                                                      <input type="hidden" id="acctName{!account.Id}" value="{!account.Name}" />
                                                      <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunction2('{!account.id}')">{!account.Name}</apex:outputLink>  </div>
                                                  </td>
                                                  <td data-label="Party Type">
                                                      <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Party_Type__c}" escape="false" /></div>
                                                  </td>
                                                  <td data-label="Contact number mobile">
                                                      <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Contact_Number_Mobile__c}" /></div>
                                                  </td>
                                                  <td data-label="Status ">
                                                      <div class="slds-truncate" title="Status "><apex:outputField value="{!account.Status__c}" /></div>
                                                  </td>
                                                  <td data-label="State ">
                                                      <div class="slds-truncate" title="State "><apex:outputField value="{!account.State__c}" /></div>
                                                  </td>
                                                  <td data-label="District ">
                                                      <div class="slds-truncate" title="District "><apex:outputField value="{!account.District__c}" /></div>
                                                  </td>
                                                  <td data-label="Location">
                                                      <div class="slds-truncate" title="Location"><apex:outputField value="{!account.City__c}" /></div>
                                                  </td>
                                                 
                                              </tr>
                                             
                                          
                                             <input id="closebtn" type="hidden" />
                                  </apex:repeat>
                              </tbody>
                          </table> 
                          
                          
                          
                          </apex:outputpanel>
                      </div>
                  </div> 
                                  
                  <!--------------------------------------dp name popup end-----------------------------------------  -->
                                                           
    
    <div align="center">
        <apex:selectList value="{!prod}"  size="1" rendered="{! pbol==true}" >
            <apex:selectOptions value="{!productopt}" />
        </apex:selectList>
    </div>
   
 <apex:outputpanel rendered="{!NewList!= null && !NewList.empty}">
    <div> <!-- title=" New Special Pricing Request"  -->
    
    <div class="slds-is-fixed" style="z-index: 999;">
        <apex:pagemessages /></div>
         <apex:variable var="j" value="{!1}" />
         <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
             <thead>
                <tr class="slds-text-title_caps slds-line-height_reset">
                    <th scope="col">S.No</th>
                    <th scope="col">Product</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Offer MRP</th>
                    <th scope="col">APPL STD Discount</th>
                    <th scope="col">Discount to customer on MRP</th>
                    <th scope="col">ORC/ Margin to Dlr/Dist</th>
                    <th  scope="col">Delivery Start Date</th>
                    <th scope="col">Delivery End Date</th>
                    <th scope="col">Competitor Name</th>
                    <th scope="col">Distributor Name</th>
                    <th scope="col">Product Specified</th>
                    <th scope="col">Payment Terms</th>
                    <th scope="col">Delivery Schedule</th>
                    <th scope="col">Why Additional Discount?</th>
                    <th scope="col">Validity for the Price</th>
                </tr>   
            </thead>
            <tbody>   
                <apex:repeat value="{!NewList}" var="opp1" rendered="{!NewList!= null && !NewList.empty}">
                           <!-- <apex:column >
                                <apex:facet name="header">SPR Check</apex:facet>
                                <apex:inputCheckbox value="{!opp.check}" onchange="makeMandatory({!i},this.checked)"/>
                            </apex:column>         
                            -->
                            <tr class="slds-hint-parent">
                                  <td data-label="S.No" >
                                      <div class="slds-truncate" title="S.No">{!j}</div>
                                  </td>
                        
                                  <td data-label="PRODUCT" >
                                      <div class="slds-truncate" title="Name">
                                        <apex:selectList value="{!opp1.pbook}" rendered="{!opp1.check1==true }" size="1" styleClass="slds-input" >
                                            <apex:selectOptions value="{!opp1.pbooklst}" />
                                        </apex:selectList>
                                      </div>
                                  </td>                         
                                    <!--<apex:inlineEditSupport event="ondblClick" rendered="{!opp.check1}" />-->
                                
                                    <td data-label="QUANTITY" >
                                        <div class="slds-truncate" title="Name">
                                            <apex:inputtext value="{!opp1.qty}"  rendered="{!opp1.check1==true}" styleClass="slds-input" />
                                            <apex:outputtext value="{!opp1.qty}"  rendered="{!opp1.check1==false}" />
                                            <!--<apex:inlineEditSupport event="ondblClick" rendered="{!opp.check1}" />-->
                                        </div>
                                    </td>                               
                                    
                                    <td data-label="OFFER MRP" >
                                        <div class="slds-truncate" title="Name">
                                            <apex:inputField value="{!opp1.oli.Offer_MRP__c}"  rendered="{!opp1.check1==true}" styleClass="slds-input" />
                                            <apex:outputField value="{!opp1.oli.Offer_MRP__c}"  rendered="{!opp1.check1==false}" />
                                            <!--<apex:inlineEditSupport event="ondblClick" rendered="{!opp.check1}" />-->
                                        </div>
                                    </td>
                            

                                    <td data-label="APPL STD DISCOUNT" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.APPL_STD_Discount__c}" styleClass="fieldSSize slds-input"   rendered="{!opp1.check1==true}" />
                                                <apex:outputField value="{!opp1.oli.APPL_STD_Discount__c}" styleClass="fieldSSize"   rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td data-label="DISCOUNT TO CUSTOMER ON MRP" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Addl_Discount_Required__c}" styleClass="fieldSSize slds-input"   rendered="{!opp1.check1==true}" />
                                                <apex:outputField value="{!opp1.oli.Addl_Discount_Required__c}" styleClass="fieldSSize"  rendered="{!opp1.check1==false}" />
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td data-label="ORC/ MARGIN TO DLR/DIST" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.ORC_Margin_to_Dlr_Dist__c}" styleClass="fieldSSize slds-input"    rendered="{!opp1.check1==true}" />
                                                <apex:outputField value="{!opp1.oli.ORC_Margin_to_Dlr_Dist__c}" styleClass="fieldSSize"  rendered="{!opp1.check1==false}" />
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td data-label="DELIVERY START DATE" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Delivery_Start_Date__c}"    rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Delivery_Start_Date__c}"  rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td data-label="DELIVERY END DATE" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Delivery_End_Date__c}"    rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Delivery_End_Date__c}"  rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td data-label="COMPETITOR NAME" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Competitor_name_Offer__c}"    rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Competitor_name_Offer__c}"   rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>

                                    <td data-label="DISTRIBUTOR NAME" >
                                   
                                                         
                                       <div class="slds-truncate look_css" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                
                                               
                                                     <span style="color:red"></span>                                                        
                                                     
                                                       <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account">
                                                           <apex:inputText value="{!opp1.oli.Distributor__c}" id="targetId" styleClass="targetfield{!j}" style="display:none"/>
                                                              <input type="text" size="20" id="targetName{!j}" value="{!opp1.oli.Distributor__r.name}" styleClass="slds-input" rendered="{!opp1.check1==true}"/>
                                                                 <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="Myfunction(targetName{!j},{!j})"/> </a>
                                                        </apex:outputPanel>                                                     
                                                    
                                                 
                                                <apex:outputtext value="{!opp1.oli.Distributor__c}"    rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td data-label="PRODUCT SPECIFIED" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Product_Specified__c}"    rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Product_Specified__c}"  rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>                       

                            
                                    <td data-label="PAYMENT TERMS" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Payment_Terms__c}"    rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Payment_Terms__c}"  rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>

                                    <td data-label="DELIVERY SCHEDULE" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Delivery_Schedule__c}"    rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Delivery_Schedule__c}"  rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>

                                    <td data-label="WHY ADDITIONAL DISCOUNT?" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Why_Additional_Discount__c}"    rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Why_Additional_Discount__c}"   rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>

                                    <td data-label="VALIDITY FOR THE PRICE" >
                                        <div class="slds-truncate" title="Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!opp1.oli.Validity_for_the_Price__c}"     rendered="{!opp1.check1==true}" styleClass="slds-input"/>
                                                <apex:outputField value="{!opp1.oli.Validity_for_the_Price__c} "  rendered="{!opp1.check1==false}"/>
                                            </div>
                                        </div>
                                    </td>
                            </tr>
                            <apex:variable var="j" value="{!j+1}" />
                            
                            
                </apex:repeat>
            </tbody>
        </table>
    </div>
    </apex:outputpanel>
    
  
        
    <!-- Add new Oportunity Line Item. -->
    <!-- Ends here new Oportunity Line Item. --> 
    <!--</apex:outputpanel> 
    <div class="newRow">&nbsp;</div> -->

   <!--<script>
       function abc(z){
           console.log(z);
       }
   </script>-->
   
   
    <div> <div class="slds-text-heading_medium slds-p-around_small">Special Pricing Request</div>
    
       <!-- <apex:actionFunction name="abc" action="{!edit}"/>-->
       <!-- 
      <apex:outputpanel id="thePanel"> -->
         
        <apex:variable var="i" value="{!1}" />
        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
             <thead>
                <tr class="slds-text-title_caps">
                    <th>S.No</th>
                    <th></th>
                    <th></th>
                    <th>Product</th>
                    <th>Offer MRP</th>
                    <th>APPL STD Discount</th>
                    <th>Discount to customer on MRP</th>
                    <th>ORC/ Margin to Dlr/Dist</th>
                    <th>Delivery Start Date</th>
                    <th>Delivery End Date</th>
                    <th>Competitor Name</th>
                    <th>Distributor Name</th>
                    <th>Product Specified</th>
                    <th>Payment Terms</th>
                    <th>Delivery Schedule</th>
                    <th>Why Additional Discount?</th>
                    <th>Validity for the Price</th>
                </tr>   
            </thead>
            <tbody>  
                <apex:repeat value="{!OldList}" var="opp" rendered="{!OldList != null && !OldList.empty}">
                    <tr class="slds-hint-parent">
                        <!-- <apex:column >
                            <apex:facet name="header">SPR Check</apex:facet>
                            <apex:inputCheckbox value="{!opp.check}" onchange="makeMandatory({!i},this.checked)"/>
                        </apex:column>         
                        -->
                        <td data-label="S.NO" >
                            <div class="slds-truncate" title="S.No">{!i}</div>
                        </td>
                        
                        <td data-label="EDIT" >
                            <div class="slds-truncate" title="">
                                <apex:commandLink value="Edit"  rendered="{!opp.oli.checked_if_Approved__c==false }" action="{!edit}" reRender="theform">
                                    <apex:param assignTo="{!oldId}" value="{!opp.oli.id}"  name="oldId"/>
                                </apex:commandLink>                        
                              
                              <!--  <apex:actionSupport event="onclick"  action="{!edit}">
                                    <apex:param assignTo="{!oldId}" value="{!opp.oli.Id}"/>
                                </apex:actionSupport> -->
                            </div>
                        </td>
                        
                        <td data-label="SELECT" >
                            <div class="slds-truncate" title="">
                                <apex:inputCheckbox value="{!opp.oppCheck}"/>
                            </div>
                        </td>

                        <td data-label="PRODUCT" >
                            <div class="slds-truncate" title="Name">
                                <apex:outputField value="{!opp.oli.Product2Id}" />
                            <!--<apex:selectList value="{!opp.pz}" rendered="{!opp.check1==true}" size="1"  id="xyz">
                                <apex:selectOptions value="{!opp.sopt}" />
                            </apex:selectList>-->
                                <!--<apex:inlineEditSupport event="ondblClick" rendered="{!opp.check1}" />-->
                            </div>
                        </td>

                        <td data-label="OFFER MRP" >
                            <div class="slds-truncate" title="Name">
                                <apex:inputField value="{!opp.oli.Offer_MRP__c}"  rendered="{!opp.check1==true}"/>
                                <apex:outputField value="{!opp.oli.Offer_MRP__c}"  rendered="{!opp.check1==false}" />
                                <!--<apex:inlineEditSupport event="ondblClick" rendered="{!opp.check1}" />-->
                            </div>
                        </td>

                        <td data-label="APPL STD DISCOUNT" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.APPL_STD_Discount__c}" styleClass="fieldSSize"   rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.APPL_STD_Discount__c}" styleClass="fieldSSize"   rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="DISCOUNT TO CUSTOMER ON MRP" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Addl_Discount_Required__c}" styleClass="fieldSSize"   rendered="{!opp.check1==true}" />
                                    <apex:outputField value="{!opp.oli.Addl_Discount_Required__c}" styleClass="fieldSSize"  rendered="{!opp.check1==false}" />
                                </div>
                            </div>
                        </td>

                        <td data-label="ORC/ MARGIN TO DLR/DIST " >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.ORC_Margin_to_Dlr_Dist__c}" styleClass="fieldSSize"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.ORC_Margin_to_Dlr_Dist__c}" styleClass="fieldSSize"  rendered="{!opp.check1==false}" />
                                </div>
                            </div>
                        </td>

                        <td data-label="DELIVERY START DATE" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Delivery_Start_Date__c}"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.Delivery_Start_Date__c}"  rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="DELIVERY END DATE" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Delivery_End_Date__c}"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.Delivery_End_Date__c}"  rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="COMPETITOR NAME" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Competitor_name_Offer__c}"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.Competitor_name_Offer__c}"   rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="DISTRIBUTOR NAME" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                        <!--<apex:inputField value="{!opp.oli.Distributor__c}"      rendered="{!opp.check1==true}"/>-->
                                             <span style="color:red"></span>
                                                 
                                               <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account" rendered="{!opp.check1==true}">
                                                   <apex:inputField value="{!opp.oli.Distributor__c}" id="targetId" styleClass="targetfield{!i}" style="display:none"/>
                                                      <input type="text" size="20" id="targetName{!i}" value="{!opp.oli.Distributor__r.name}" styleClass="slds-input" />
                                                         <a href="#" id="myBtn2" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="Myfunction(targetName{!i},{!i})"/></a>
                                                </apex:outputPanel>                                             
                                            
                                        <apex:outputField value="{!opp.oli.Distributor__c}"  rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>
                        
                        <td data-label="PRODUCT SPECIFIED" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Product_Specified__c}"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.Product_Specified__c}"  rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="PAYMENT TERMS" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Payment_Terms__c}"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.Payment_Terms__c}"  rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="DELIVERY SCHEDULE" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Delivery_Schedule__c}"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.Delivery_Schedule__c}"  rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="WHY ADDITIONAL DISCOUNT?" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                    <div class="{!i}B"></div>
                                    <apex:inputField value="{!opp.oli.Why_Additional_Discount__c}"    rendered="{!opp.check1==true}"/>
                                    <apex:outputField value="{!opp.oli.Why_Additional_Discount__c}"   rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>

                        <td data-label="VALIDITY FOR THE PRICE" >
                            <div class="slds-truncate" title="Name">
                                <div class="{!i}I">
                                <div class="{!i}B"></div>
                                <apex:inputField value="{!opp.oli.Validity_for_the_Price__c}" rendered="{!opp.check1==true}"/>
                                <apex:outputField value="{!opp.oli.Validity_for_the_Price__c} "  rendered="{!opp.check1==false}"/>
                                </div>
                            </div>
                        </td>                           
                    </tr>
                    <apex:variable var="i" value="{!i+1}" />
                </apex:repeat>      
            </tbody>
        </table>
    </div>
    
    
      <div class="slds-p-around_small">
        <apex:commandButton value="Save" action="{!save}"  rerender="theform" status="status" styleClass="slds-button slds-button_brand"/> 
        <apex:commandButton value="Cancel" onclick="window.top.location='/{!OppId}'; return false" styleClass="slds-button slds-button_neutral" /> 
        <apex:commandButton value="Add" action="{!addRow}" reRender="theform" styleClass="slds-button slds-button_brand"/> 
     </div>
   
 <div class="slds-m-bottom_xx-large"></div>  
   
    
                
                <script>
                    function abc(a){
                        zuzu(a);
                        alert(a);
                    }
                </script>
                <!--<apex:actionFunction name="zuzu" id="zxc"  action="{!edit}">
                <apex:param assignTo="{!oldId}" value=""  name="oldId"/>
                </apex:actionFunction>-->
                
                <!-- Add new Oportunity Line Item. -->
                <!-- Ends here new Oportunity Line Item. --> 
                <!--</apex:outputpanel> 
                <div class="newRow">&nbsp;</div> -->
                
                
               <script>
                    // Get the modal for project by field which fetches account
                    var modal = document.getElementById('myModal');
                    var elm;
                    var fld;
                    
                    
                    // Get the <span> element that closes the modal
                    var span = document.getElementsByClassName("close")[0];
                    
                    // When the user clicks the button, open the modal 
                    function Myfunction(elid, fldid) {                    
                      //  alert('--elid--'+elid.id + '--'+fldid);
                        var modal2 = document.getElementById('myModal');
                        elm = elid.id;  
                        fld = 'targetfield' + fldid; 
                        console.log('fld='+fld);                    
                        modal2.style.display = "block";
                    }
                    
                    // When the user clicks on <span> (x), close the modal
                    span.onclick = function() {
                        modal.style.display = "none";
                    }
                    
                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function(event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
             
               
                    function myFunction2(acctId) { 
                       var nameElementId = 'acctName'+acctId;
                        console.log(acctId);
                        var val = document.getElementById(nameElementId).value;
                        var aid = acctId;
                        console.log(elm);
                        console.log(val);
                        console.log(aid);
                        //var x = event.target;
                        document.getElementById("j_id0:theform:query").value =  val; //fetch searched string
                        document.getElementById(elm).value =  val;    //assign to Project by input field
                        document.getElementsByClassName(fld)[0].value = aid;
                        modal.style.display = "none";
                    }  
                
                
                    var j$ = jQuery.noConflict();
                    j$(document).ready(function(){
                      j$("#myInput").on("keyup", function() {
                        var value = j$(this).val().toLowerCase();
                        j$("#myTable tr").filter(function() {
                          j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                        });
                      });
                    });
                    
                    j$('#myModal').find('#myInput').focus();
                </script>
    
    
    </apex:form>
    
      
        
  
</apex:page>