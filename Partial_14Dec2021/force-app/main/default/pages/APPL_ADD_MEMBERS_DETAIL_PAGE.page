<!--+----------------------------------------------------------------------
||        Author      : BABA
||
||        Purpose     : Adding Promotion members to Promotion.If member is not there, then Create Account.
||                  
||        Modified By : 22/3/2019 / Sudhamurthy
|| 
||        Reason      : Code beautification/Review and made code to follow the best practices. a0ag0000009IiNx
++----------------------------------------------------------------------+-->
<apex:page sidebar="false" showHeader="false" standardController="Promotion__c" extensions="APPL_ADD_MEMBERS_DETAIL_CTRL,CustomLookupForProject" docType="html-5.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>  
        <!--<meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel='stylesheet' href="{!URLFOR($Resource.PromotionResource, '/jquery-ui.css')}" />
        <link rel='stylesheet' href="{!URLFOR($Resource.PromotionResource, '/bootstrap.min.css')}" />
        <script src="{!URLFOR($Resource.PromotionResource, '/jquery-1.10.2.js')}"></script>
        <script src="{!URLFOR($Resource.PromotionResource, '/jquery-ui.js')}"></script>
        <script src="{!URLFOR($Resource.PromotionResource, '/bootstrap.js')}"></script>-->
        
        <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
        <link rel='stylesheet' href="{!URLFOR($Resource.PromotionResource, '/jquery-ui.css')}" />
       
        
        <apex:slds />
        <style>
        
        .ui-autocomplete {
                max-height: 100px;
                overflow-y: auto;
                /* prevent horizontal scrollbar */
                overflow-x: hidden;
                /* add padding to account for vertical scrollbar */
                padding-right: 20px;
            }
            /* IE 6 doesn't support max-height
     * we use height instead, but this forces the menu to always be this tall
     */
        * html .ui-autocomplete {
            height: 100px;
        }
        .wid100  {
        width:40%!important;
        }
        .pt {
        padding-top:32px!important;
        }
        .look_css input[type="text"],  .inp input[type="text"], .inp select, .look_css select  {
        color: #16325c;
        border: 1px solid #d8dde6;
        border-radius: .25rem;
        transition: border .1s linear,background-color .1s linear;
        display: inline-block;
        padding: 0 1rem 0 .75rem;
        line-height: 1.875rem;
        min-height: calc(1.875rem + (1px * 2));   
        width:100%;
    }
    .look_css {
    position:relative;
    }
    .look_css a {
    position:absolute;
    right:3px;
    top:6px;
    }
    .slds-lookup a {
        position: relative;
        width: inherit!important;
        border: none!important;
        background: none!important;
        left: -30px;
        top: -1px;
        padding: 0!important;
    }
    .inp input[type="text"] {
      
    }
    .inp select {
        width:100%;
    }
    sub {
        font-size:20px!important;
        color:red;
    }
    @media only screen and (min-width: 250px) and (max-width: 770px) {
        .pt {
        padding-top:0px!important;
        }
        .slds-input, look_css input[type="text"] {
        width:150px!important;
        }
        .wid100 {
        width:100%!important;
        }
        .slds-table input[type="text"], .slds-table select { width:125px!important; }
    }
    }
    </style>
        
    <body onload="addingMore()">
        <apex:actionstatus id="as1">
            <apex:facet name="start">
                <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;height: 100%;opacity:0.65;width:100%;z-index: 115;overflow:hidden;position:fixed;"> 
                    <div class="waitingHolder" >
                        <img class="waitingImage" src= "{!$Resource.Redcircle}" style="width: 15%;" title="Please Wait..." />
                    </div>
                </div>
            </apex:facet>
        </apex:actionstatus>
                            
        <div class="panel panel-info" style="margin-bottom: 20px;background-color: #ffffff; border: 2px solid rgba(80, 135, 173, 0.06); border-radius: 4px;-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);box-shadow: 0 2px 2px rgba(0, 0, 0, 0.05);">
                
             <div class="slds-page-header">
              <div class="slds-media">
                <div class="slds-media__body">
                <h1 class="slds-page-header__title slds-truncate slds-align-middle">Add Members to the Promotion - {!newpromotion.Name}</h1>
                <p class="slds-text-body_small slds-line-height_reset"></p>
                </div>
             </div>
             </div>
                    
            <apex:form id="proForm">
                    <apex:pageMessages id="msg"/>
                    <!----------------------------------Dealer POPUP-------------------------------------------------------------->
                    <div id="myModalDealer" class="modal">    
                       <div class="modal-content" >
                        <span class="closeDealer close">&times;</span>
                        
                            <apex:outputpanel id="lookupPanelForDealer"  styleclass="outpanelDealer">                          
                         
                                <div class="slds-page-header">
                                      <div clss="slds-media">
                                        <div class="slds-media__body">
                                         <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                         <p class="slds-text-body_small slds-line-height_reset"></p>
                                        </div>
                                      </div>
                                </div>
                                
                                <div class="slds-p-around_x-small">
                                    <p>Please enter the search term below and click the 'Go' button.  This will
                                       execute a search across all text fields</p>
                                    <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>                                    
                                    
                                    <apex:input value="{!dealerqry}" id="CustomLookupForDealer" disabled="false" type="text"/> 
                                    <span><apex:commandButton value="Go" action="{!searchqueryforDealer}" rerender="lookupPanelForDealer,dptableDealer"/></span>
                                    
                                </div>
                                
                                <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptableDealer">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th>Name</th>
                                            <th>Party Type</th>
                                            <th>Mobile No</th>
                                            <th>Status </th>
                                            <th>State </th>
                                            <th>District</th> 
                                            <th>Location</th>                                           
                                        </tr>   
                                    </thead>
                                    <tbody id="myTableForDealer">                                      
                                        <apex:repeat value="{!dealeracc}" var="account">                                           
                                                              
                                                <tr class="slds-hint-parent">
                                                      <td data-label="Name" >
                                                         <input type="hidden" id="acctName{!account.Id}" value="{!account.Name}" />
                                                          <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunction2Dealer('{!account.id}')" >{!account.Name}</apex:outputLink>  </div>
                                                      </td>
                                                      <td data-label="Party Type">
                                                          <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Party_Type__c}" escape="false" /></div>
                                                      </td>
                                                      <td data-label="Mobile no">
                                                          <div class="slds-truncate" title="Mobile no"><apex:outputField value="{!account.Contact_Number_Mobile__c}" /></div>
                                                      </td>
                                                      <td data-label="Status ">
                                                          <div class="slds-truncate" title="Status "><apex:outputField value="{!account.Status__c}" /></div>
                                                      </td>
                                                      <td data-label="State ">
                                                          <div class="slds-truncate" title="State "><apex:outputField value="{!account.State__c}" /></div>
                                                      </td>
                                                      <td data-label="District ">
                                                          <div class="slds-truncate" title="District "><apex:outputField value="{!account.District__c}" /></div>
                                                      </td>
                                                      <td data-label="Location">
                                                          <div class="slds-truncate" title="Location"><apex:outputField value="{!account.City__c}" /></div>
                                                      </td>
                                                </tr>
                                              
                                             
                                        </apex:repeat>
                                    </tbody>
                                </table>                  
                          
                            </apex:outputpanel>
                        </div>
                      </div>  
                    <!----------------------------------Dealer POPUP END-------------------------------------------------------------->
                    
                    <!----------------------------------Distributor POPUP-------------------------------------------------------------->
                    <div id="myModalDistributor" class="modal">    
                       <div class="modal-content" >
                        <span class="closeDistributor close">&times;</span>
                        
                            <apex:outputpanel id="lookupPanelForDistributor"  styleclass="outpanelDistributor">                          
                         
                                <div class="slds-page-header">
                                      <div clss="slds-media">
                                        <div class="slds-media__body">
                                         <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                         <p class="slds-text-body_small slds-line-height_reset"></p>
                                        </div>
                                      </div>
                                </div>
                                
                                <div class="slds-p-around_x-small">
                                    <p>Please enter the search term below and click the 'Go' button.  This will
                                       execute a search across all text fields</p>
                                    <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>                                    
                                    
                                    <apex:input value="{!distrqry}" id="CustomLookupForDistributor" disabled="false" type="text"/> 
                                    <span><apex:commandButton value="Go" action="{!searchqueryforDistributor}" rerender="lookupPanelForDistributor,dptableDistributor"/></span>
                                    
                                </div>
                                
                                <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptableDistributor">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th>Name</th>
                                            <th>Party Type</th>
                                            <th>Mobile No</th>
                                            <th>Status </th>
                                            <th>State </th>
                                            <th>District</th> 
                                            <th>Location</th>                                            
                                        </tr>   
                                    </thead>
                                    <tbody id="myTableForDistributor">                                      
                                        <apex:repeat value="{!distracc}" var="account">                                           
                                                              
                                                <tr class="slds-hint-parent">
                                                      <td data-label="Name" >
                                                      <input type="hidden" id="acctName{!account.Id}" value="{!account.Name}" />
                                                          <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunction2Distributor('{!account.id}')" >{!account.Name}</apex:outputLink>  </div>
                                                      </td>
                                                      <td data-label="Party Type">
                                                          <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Party_Type__c}" escape="false" /></div>
                                                      </td>
                                                       <td data-label="Mobile no">
                                                          <div class="slds-truncate" title="Mobile no"><apex:outputField value="{!account.Contact_Number_Mobile__c}" /></div>
                                                      </td>
                                                      <td data-label="Status ">
                                                          <div class="slds-truncate" title="Status "><apex:outputField value="{!account.Status__c}" /></div>
                                                      </td>
                                                      <td data-label="State ">
                                                          <div class="slds-truncate" title="State "><apex:outputField value="{!account.State__c}" /></div>
                                                      </td>
                                                      <td data-label="District ">
                                                          <div class="slds-truncate" title="District "><apex:outputField value="{!account.District__c}" /></div>
                                                      </td>
                                                      <td data-label="Location">
                                                          <div class="slds-truncate" title="Location"><apex:outputField value="{!account.City__c}" /></div>
                                                      </td>
                                                      
                                                </tr>
                                              
                                             
                                        </apex:repeat>
                                    </tbody>
                                </table>                  
                          
                            </apex:outputpanel>
                        </div>
                      </div>  
                    <!----------------------------------Distributor POPUP END-------------------------------------------------------------->                   

                   <!----------------------------------TALUK/TEHSIL POPUP-------------------------------------------------------------->
                    <div id="myModalTaluk" class="modal">    
                       <div class="modal-content" >
                        <span class="closeTaluk close">&times;</span>
                        
                            <apex:outputpanel id="lookupPanelForTaluk"  styleclass="outpanelTaluk">                          
                         
                                <div class="slds-page-header">
                                      <div clss="slds-media">
                                        <div class="slds-media__body">
                                         <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                         <p class="slds-text-body_small slds-line-height_reset"></p>
                                        </div>
                                      </div>
                                </div>
                                
                                <div class="slds-p-around_x-small">
                                    <p>Please enter the search term below and click the 'Go' button.  This will
                                       execute a search across all text fields</p>
                                    <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>                                    
                                    
                                    <apex:input value="{!talukJuncQry}" id="CustomLookupForTaluk" disabled="false" type="text"/> 
                                    <span><apex:commandButton value="Go" action="{!searchQueryforTalukJunc}" rerender="lookupPanelForTaluk,dptableTaluk"/></span>
                                    
                                </div>
                                
                                <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptableTaluk">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th>Taluk Name</th>
                                            <th>State </th>
                                            <th>District</th>
                                            <th>Cluster</th>
                                            <th>User</th>                                           
                                        </tr>   
                                    </thead>
                                    <tbody id="myTableForTaluk">                                      
                                        <apex:repeat value="{!talukJuncList}" var="Taluk">                                           
                                                              
                                                <tr class="slds-hint-parent">
                                                      <td data-label="TalukName" >
                                                          <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunction2Taluk('{!Taluk.Name}','{!Taluk.id}')">{!Taluk.Name}</apex:outputLink>  </div>
                                                      </td>                                                   
                                                      <td data-label="State ">
                                                          <div class="slds-truncate" title="State "><apex:outputField value="{!Taluk.State__c}" /></div>
                                                      </td>
                                                      <td data-label="District ">
                                                          <div class="slds-truncate" title="District "><apex:outputField value="{!Taluk.District__c}" /></div>
                                                      </td>
                                                      <td data-label="Cluster ">
                                                          <div class="slds-truncate" title="Cluster "><apex:outputField value="{!Taluk.Cluster__c}" /></div>
                                                      </td>
                                                      <td data-label="User">
                                                          <div class="slds-truncate" title="User"><apex:outputField value="{!Taluk.User__c}" /></div>
                                                      </td>
                                                </tr>
                                              
                                             <input id="closebtn" type="hidden" />
                                        </apex:repeat>
                                    </tbody>
                                </table>                  
                          
                            </apex:outputpanel>
                        </div>
                      </div> 
                    <!----------------------------------TALUK/TEHSIL POPUP END-------------------------------------------------------------->
                    
                    <apex:actionFunction name="copyAccountRow" action="{!getAccoutRow}" immediate="true"  reRender="msg,architectsBuilderEngineers,boarersMeet,dealersMeet,farmersMeet,salesmanMeetFactoryVisit,TractorShow,plumberMechanic,Shandy,noVertical,membersPanel" status="as1">
                        <apex:param id="cusMobileId" name="cusMobile" value="" />
                        <apex:param id="rowIndexId" name="rowIndex" value="" />
                    </apex:actionFunction>
                    <apex:outputPanel id="addRowPanel" rendered="{!NOT(showAddMemberPanel)}">
                        <div class="slds-grid slds-wrap">
                           <div class="slds-size--1-of-1 slds-large-size--1-of-2 slds-medium-size--1-of-2 slds-small-size--1-of-1 slds-p-around_small">
                                <label class="control-label" for="Name">Number of row/s to add <sub class="astriskStyle">*</sub></label>
                                    
                                <input type="number" class="slds-input" maxlength="2" min="1" max="60" id="totalAtt" oninput="maxLengthCheck(this)" onblur="coypToApex(this.id,'{!$Component.totalAttApex}');" />
                                <apex:inputHidden value="{!newpromotion.Total_no_of_attendees__c}" id="totalAttApex"/>
                                
                                <!--    <apex:inputField value="{!newpromotion.Total_no_of_attendees__c}" styleClass="form-control" id="totalExpense" required="true"/> -->
                                <!--        <apex:inputField value="{!newpromotion.Total_no_of_attendees__c}" styleClass="form-control" id="totalExpense" required="true" onkeypress="return isNumber(event)"/> -->
                            </div>
                                    
                                    
                            <div class="slds-size--1-of-1 slds-large-size--1-of-2 slds-medium-size--1-of-2 slds-small-size--1-of-1 slds-p-around_small pt">
                            <apex:commandButton value="Add Members"  onclick="displaymessage()" action="{!ShowMembers}" styleClass="slds-button slds-button_brand"   reRender="msg,proForm" status="as1"/>
                            </div>
                        </div>
                                    
                    </apex:outputPanel>
                                    
                    <apex:outputPanel id="membersPanel" rendered="{!(showAddMemberPanel)}">
                                    
                        <apex:actionFunction action="{!addMember}" name="addMember" immediate="true" reRender="proForm,noVertical,architectsBuilderEngineers" status="as1"/>
                        <div class="slds-text-heading_medium slds-p-around_small">
                            Add Members to Promotion {!newpromotion.Vertical__c}
                        </div>
                      <apex:inputHidden id="promoName" value="{!newpromotion.Type__c}"/>
                       
                        <apex:outputLink value="{!incompleteAccount}" style="color:red;" target="_blank" rendered="{!errorFlag}" id="link">The Account details is incomplete. Please click here to complete
                        </apex:outputLink>
                        
                        <apex:outputPanel id="architectsBuilderEngineers" rendered="{!((newpromotion.Vertical__c=='Column' || newpromotion.Vertical__c=='Plumbing' || newpromotion.Vertical__c=='Projects' || newpromotion.Vertical__c=='Branding'))}">
                        
                            <div id="newVisit">
                                <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th >
                                             <div class="slds-truncate" title="Account Name">
                                                Sl.No</div></th>
                                            <th scope="col"><div class="slds-truncate" title="Delete/Refresh">Delete/Refresh</div></th>
                                            <th scope="col"><div class="slds-truncate" title="Mobile No.">Mobile No.<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="Name">Name<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="Party Type">Party Type<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="Dealer">Dealer</div></th>
                                            <th scope="col"><div class="slds-truncate" title="Distributor">Distributor</div></th>
                                            <th scope="col"><div class="slds-truncate" title="State">State<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="District">District<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="Location">Location</div></th>                                         
                                            <th scope="col"><div class="slds-truncate" title="Taluk/Tehsil">Taluk/Tehsil<sub class="astriskStyle"> * </sub></div></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <apex:variable value="{!1}" var="archCount"/>
                                        <apex:repeat value="{!proAccounts}" var="newAcct">
                                            <tr class="slds-hint-parent">
                                                <td data-label="Sl.No"><div class="slds-truncate" title="Action">{!archCount}</div></td>
                                                <td data-label="Delete/Refresh">
                                                    <div class="slds-truncate" title="Action">
                                                        <apex:commandlink action="{!DeleteEntry}" status="as1" id="delete" rerender="architectsBuilderEngineers" rendered="{!disabled}">
                                                            <apex:image id="deleteIcon" value="{!$Resource.AP_Remove_Icon}" width="22"  title="Delete Entry"/>                                                      
                                                            <apex:param name="deleteparam" value="{!archCount}" assignTo="{!accToRemove}"/>
                                                        </apex:commandlink>
                                                        <apex:commandlink action="{!RefreshEntry}" reRender="architectsBuilderEngineers" status="as2" id="refresh" rendered="{!disabled}">
                                                            <apex:image id="refreshIcon" value="{!$Resource.refresh}" width="25" height="25" title="Refresh Entry"/>
                                                            <apex:param name="refreshparam" value="{!newAcct.Contact_Number_Mobile__c}" assignTo="{!accToRefresh}"/>
                                                            <apex:param name="refreshparam1" value="{!archCount}" assignTo="{!accToRemove}"/>
                                                        </apex:commandlink>
                                                    </div></td>
                                                <td data-label="Mobile No."><div class="slds-truncate" title="Mobile No.">
                                                    <apex:inputField value="{!newAcct.Contact_Number_Mobile__c}" rendered="{!newAcct.id==null}"  onkeyup="showMobileNo('tagsArchi','no-results-{!archCount}');" id="tagsArchi" html-placeholder="Search Mobile No.." onblur="callActionJs(this.id,'{!archCount}'); return false;" style="width:125px" styleClass="tagsArchiClass slds-input"/>
                                                    <span id="no-results-{!archCount}" style="color: chocolate;"></span>
                                                    <apex:outputField value="{!newAcct.Contact_Number_Mobile__c}" rendered="{!newAcct.id!=null}" />
                                                </div></td>
                                                    
                                                <td data-label="Name"><div class="slds-truncate" title="Name">
                                                    <apex:inputField value="{!newAcct.Name}" rendered="{!newAcct.id==null}" required="{!validationRequired}" styleClass="slds-input"/>
                                                    <apex:commandLink title="click here to open in new tab" target="_blank" value="{!newAcct.Name}" action="/{!newAcct.id}" rendered="{!newAcct.id!=null}"/>
                                                </div></td>
                                                
                                                <td data-label="Party Type"><div class="slds-truncate" title="Party Type">
                                                    <apex:inputField value="{!newAcct.Party_Type__c}" rendered="{!newAcct.id==null}"  required="{!validationRequired}" styleClass="slds-input"/>
                                                    <apex:outputField value="{!newAcct.Party_Type__c}" rendered="{!newAcct.id!=null}" />
                                                </div></td>
                                                 <td data-label="Dealer"><div class="slds-truncate look_css" title="Dealer">
                                                    <!-- <apex:inputField value="{!newAcct.Dealer__c}" rendered="{!newAcct.id==null}" />--> 
                                                   <apex:inputText value="{!newAcct.Dealer__c}" rendered="{!newAcct.id==null}" id="targetIdDealer" styleClass="targetFieldDealer{!archCount}" style="display:none"/>  
                                                    <apex:outputPanel layout="inline" style="vertical-align:middle" rendered="{!newAcct.id==null}">                                                  
                                                       <input type="text" size="20" id="targetNameDealer{!archCount}" styleClass="slds-input"  value="{!newAcct.Dealer__r.name}"/>
                                                        <a href="#" id="myBtn2Dealer" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionDealer(targetNameDealer{!archCount},{!archCount})"/></a>
                                                     </apex:outputPanel>
                                                     
                                                 
                                                 <apex:outputText value="{!newAcct.Dealer__r.name}"  rendered="{!newAcct.id!=null}" style="display:none"/>
                                                  </div>
                                                 <apex:outputLink value="/{!newAcct.Dealer__c}" rendered="{!newAcct.id!=null}" onclick="" >{!newAcct.Dealer__r.name}</apex:outputLink> 
                                               </td>
                                                <td data-label="Distributor"><div class="slds-truncate look_css" title="Distributor">
                                                    <!--<apex:inputField value="{!newAcct.Account__c}" rendered="{!newAcct.id==null}"  />-->
                                                    <apex:inputText value="{!newAcct.Account__c}" rendered="{!newAcct.id==null}" id="targetIdDistr" styleClass="targetfieldDistr{!archCount}" style="display:none" />
                                                    <apex:outputPanel layout="inline" style="vertical-align:middle" rendered="{!newAcct.id==null}">                                       
                                                        <input type="text" size="20" id="targetNameDistr{!archCount}" styleClass="slds-input" value="{!newAcct.Account__r.name}" />
                                                        <a href="#" id="myBtn2Distr" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionDistributor(targetNameDistr{!archCount},{!archCount})"/></a>
                                                   </apex:outputPanel>
                                                   <p class="Error"></p> 
                                                      <apex:outputText value="{!newAcct.Account__r.name}" rendered="{!newAcct.id!=null}" style="display:none"/> 
                                                      </div>
                                                       <apex:outputLink value="/{!newAcct.Account__c}" rendered="{!newAcct.id!=null}" onclick="" >{!newAcct.Account__r.name}</apex:outputLink> 
                                                   </td>
                                                <td data-label="State"><div class="slds-truncate" title="State">
                                                    <apex:inputField value="{!newAcct.State__c}" rendered="{!newAcct.id==null}"  required="{!validationRequired}" styleClass="slds-input requiredFld"/>
                                                    <p class="error"></p> 
                                                    <apex:outputField value="{!newAcct.State__c}" rendered="{!newAcct.id!=null}" /> 
                                                </div></td>
                                                <td data-label="District"><div class="slds-truncate look_css" title="District">
                                                    <apex:inputField value="{!newAcct.District__c}" rendered="{!newAcct.id==null}" required="{!validationRequired}" styleClass="slds-input requiredFld"/>
                                                    <p class="error"></p> 
                                                    <apex:outputField value="{!newAcct.District__c}" rendered="{!newAcct.id!=null}" /> 
                                                </div></td>
                                                 <td data-label="Location"><div class="slds-truncate" title="Location">
                                                    <apex:inputField value="{!newAcct.City__c}" rendered="{!newAcct.id==null}" styleClass="slds-input" />
                                                    
                                                    <apex:outputField value="{!newAcct.City__c}" rendered="{!newAcct.id!=null}" /> 
                                                </div></td>
                                                 <td data-label="TALUK">
                                                     <div class="slds-truncate look_css" title="TALUK">
                                                    <!--<apex:inputField value="{!newAcct.APPL_Taluk__c}" rendered="{!newAcct.id==null}" required="{!validationRequired}"  />-->
                                                     <apex:inputText value="{!newAcct.APPL_Taluk__c}" rendered="{!newAcct.id==null}"  id="targetId" styleClass="targetfield{!archCount}" style="display:none" />                                                        
                                                     <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account" rendered="{!newAcct.id==null}"> 
                                                         <input type="text" size="20" id="targetName{!archCount}" class="slds-input requiredFld" value="{!newAcct.APPL_Taluk__r.name}" />
                                                         <p class="error"></p> 
                                                         <a href="#" id="myBtn2tlk" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionTaluk(targetName{!archCount},{!archCount})"/></a>
                                                     </apex:outputPanel>
                                                     
                                                    <apex:outputText value="{!newAcct.APPL_Taluk__r.name}" rendered="{!newAcct.id!=null}" style="display:none" />
                                                    </div>
                                                   <apex:outputLink value="/{!newAcct.APPL_Taluk__c}" target="_blank" rendered="{!newAcct.id!=null}" onclick="" >{!newAcct.APPL_Taluk__r.name}</apex:outputLink>  </td>
                                            </tr>
                                            <apex:variable value="{!archCount+1}" var="archCount"/>
                                        </apex:repeat>
                                    </tbody>
                                </table>
                                                                       
                            </div>
                             <script>
                // Get the modal for dealer by field which fetches account
                var modalDealer = document.getElementById('myModalDealer');
                var elmDealer;
                var fldDealer;
                
                
                // Get the <span> element that closes the modal
                var spanDealer = document.getElementsByClassName("closeDealer")[0];
                
                // When the user clicks the button, open the modal 
                function MyfunctionDealer(elidDealer, fldidDealer) {                    
                 //alert('--elidDealer--'+elidDealer.id + '--'+fldidDealer);
                    var modal2Dealer = document.getElementById('myModalDealer');
                    elmDealer = elidDealer.id;  
                    fldDealer = 'targetFieldDealer' + fldidDealer; 
                    console.log('fldDealer========'+fldDealer);                    
                    modal2Dealer.style.display = "block";
                }
                
                // When the user clicks on <span> (x), close the modal
                spanDealer.onclick = function() {
                    modalDealer.style.display = "none";
                }
                
                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modalDealer) {
                        modalDealer.style.display = "none";
                    }
                }
         
           
                function myFunction2Dealer(acctId) { 
                       var nameElementId = 'acctName'+acctId;
                       console.log(acctId);
                       var val = document.getElementById(nameElementId).value;
                       console.log("testing.........party name"+val);
                       var aid = acctId;
                    //var x = event.target;
                    document.getElementById("j_id0:proForm:CustomLookupForDealer").value =  val; //fetch search string on popup
                    document.getElementById(elmDealer).value =  val;    //assign to Project by input field
                    document.getElementsByClassName(fldDealer)[0].value = aid;
                    modalDealer.style.display = "none";
                }  
            
            
                var j$ = jQuery.noConflict();
                j$(document).ready(function(){
                  j$("#myInput").on("keyup", function() {
                    var value = j$(this).val().toLowerCase();
                    j$("#myTable tr").filter(function() {
                      j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                    });
                  });
                });
                
                j$('#myModalDealer').find('#myInput').focus();
            </script>
            
            <script>
                // Get the modal for project by field which fetches account
                var modalDistr = document.getElementById('myModalDistributor');
                var elmDistr;
                var fldDistr;
                
                
                // Get the <span> element that closes the modal
                var spanDistr = document.getElementsByClassName("closeDistributor")[0];
                
                // When the user clicks the button, open the modal 
                function MyfunctionDistributor(elidDistr, fldidDistr) {                    
                  //  alert('--elid--'+elid.id + '--'+fldid);
                    var modal2Distr = document.getElementById('myModalDistributor');
                    elmDistr = elidDistr.id;  
                    fldDistr = 'targetfieldDistr' + fldidDistr; 
                    console.log('fldDistr='+fldDistr);                    
                    modal2Distr.style.display = "block";
                }
                
                // When the user clicks on <span> (x), close the modal
                spanDistr.onclick = function() {
                    modalDistr.style.display = "none";
                }
                
                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modalDistr) {
                        modalDistr.style.display = "none";
                    }
                }
         
           
                function myFunction2Distributor(acctId) { 
                   var nameElementId = 'acctName'+acctId;
                   console.log(acctId);
                   var val = document.getElementById(nameElementId).value;
                   console.log("testing.........party name"+val);
                   var aid = acctId;
                    console.log(aid);
                    //var x = event.target;
                    document.getElementById("j_id0:proForm:CustomLookupForDistributor").value =  val; //fetch search string on popup
                    document.getElementById(elmDistr).value =  val;    //assign to Project by input field
                    document.getElementsByClassName(fldDistr)[0].value = aid;
                    modalDistr.style.display = "none";
                }  
            
            
                var j$ = jQuery.noConflict();
                j$(document).ready(function(){
                  j$("#myInput").on("keyup", function() {
                    var value = j$(this).val().toLowerCase();
                    j$("#myTable tr").filter(function() {
                      j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                    });
                  });
                });
                
                j$('#myModalDistributor').find('#myInput').focus();
            </script>
            
             <script>
                    // Get the modal for project by field which fetches account
                    var modal = document.getElementById('myModalTaluk');
                    var elm;
                    var fld;
                    
                    
                    // Get the <span> element that closes the modal
                    var spanTaluk = document.getElementsByClassName("closeTaluk")[0];
                    
                    // When the user clicks the button, open the modal 
                    function MyfunctionTaluk(elid, fldid) {                    
                        console.log('--elid--'+elid.id + '--'+fldid);
                        var modal2 = document.getElementById('myModalTaluk');
                        elm = elid.id;  
                        fld = 'targetfield' + fldid; 
                        console.log('fld='+fld);                    
                        modal2.style.display = "block";
                    }
                    
                    // When the user clicks on <span> (x), close the modal
                    spanTaluk.onclick = function() {
                         modal.style.display = "none";
                    }
                    
                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function(event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
             
               
                    function myFunction2Taluk(val,aid) { 
                        console.log("myFunction2");
                        console.log(elm);
                        console.log(val);
                        console.log(aid);
                        //var x = event.target;
                        document.getElementById("j_id0:proForm:CustomLookupForTaluk").value =  val; //fetch search string on popup
                        document.getElementById(elm).value =  val;    //html input
                        document.getElementsByClassName(fld)[0].value = aid;    //field
                        modal.style.display = "none";
                    }  
                
                
                    var j$ = jQuery.noConflict();
                    j$(document).ready(function(){
                      j$("#myInput").on("keyup", function() {
                        var value = j$(this).val().toLowerCase();
                        j$("#myTable tr").filter(function() {
                          j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                        });
                      });
                    });
                    
                    j$('#myModalTaluk').find('#myInput').focus();
                </script>
                    </apex:outputPanel>
                                                                    
                    <apex:outputPanel id="noVertical" rendered="{!((newpromotion.Vertical__c == '' || newpromotion.Vertical__c == null))}">
                        <div class="table-responsive">
                            <div id="newVisit">
                            
                                <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th >
                                                <div class="slds-truncate" title="Sl.No">
                                                Sl.No</div></th>
                                            <th scope="col"><div class="slds-truncate" title="Delete/Refresh">Delete/Refresh</div></th>
                                            <th scope="col"><div class="slds-truncate" title="Mobile No.">Mobile No.<sub class="astriskStyle"> * </sub></div></th>
                                            
                                            <th scope="col"><div class="slds-truncate" title="Name">Name<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="Party Type">Party Type<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="Dealer">Dealer2</div></th>
                                            <th scope="col"><div class="slds-truncate" title="Distributor">Distributor</div></th>
                                            <th scope="col"><div class="slds-truncate" title="State">State<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="District">District<sub class="astriskStyle"> * </sub></div></th>
                                            <th scope="col"><div class="slds-truncate" title="Location">Location</div></th>
                                            <th scope="col"><div class="slds-truncate" title="Taluk / Tehsil">Taluk / Tehsil<sub class="astriskStyle"> * </sub></div></th>
                                            
                                        </tr>
                                    </thead>
                                <tbody>
                                            

                                    <apex:variable value="{!1}" var="archCount"/>
                                    <apex:repeat value="{!proAccounts}" var="newAcct">
                                        <tr class="slds-hint-parent">
                                             <td data-label="Sl.No"><div class="slds-truncate" title="Sl.No">{!archCount}</div></td>
                                          
                                             <td data-label="Delete/Refresh"><div class="slds-truncate" title="Delete/Refresh">
                                                 <apex:commandlink action="{!DeleteEntry}" status="as1" id="delete" rerender="architectsBuilderEngineers" rendered="{!disabled}">
                                                    <apex:image id="deleteIcon" value="{!$Resource.AP_Remove_Icon}" width="22"  title="Delete Entry"/>
                                                   
                                                     <apex:param name="deleteparam" value="{!archCount}" assignTo="{!accToRemove}"/>
                                                </apex:commandlink>
                                                <apex:commandlink action="{!RefreshEntry}" reRender="architectsBuilderEngineers" status="as2" id="refresh" rendered="{!disabled}">
                                                    <apex:image id="refreshIcon" value="{!$Resource.refresh}" width="25" height="25" title="Refresh Entry"/>
                                                    <apex:param name="refreshparam" value="{!newAcct.Contact_Number_Mobile__c}" assignTo="{!accToRefresh}"/>
                                                    <apex:param name="refreshparam1" value="{!archCount}" assignTo="{!accToRemove}"/>
                                                </apex:commandlink>
                                            </div></td>                                                                    
                                                                        
                                            <td data-label="Mobile No."><div class="slds-truncate" title="Mobile No.">
                                                <apex:inputField value="{!newAcct.Contact_Number_Mobile__c}" rendered="{!newAcct.id==null}"  onkeyup="showMobileNo('tagsArchi','no-results-{!archCount}');" id="tagsArchi" html-placeholder="Search Mobile No.." onblur="callActionJs(this.id,'{!archCount}'); return false;" style="width:125px" styleClass="tagsArchiClass slds-input"/>
                                                <span id="no-results-{!archCount}" style="color: chocolate;"></span>
                                                <apex:outputField value="{!newAcct.Contact_Number_Mobile__c}" rendered="{!newAcct.id!=null}" />
                                            </div></td>
                                            
                                            <td data-label="Name"><div class="slds-truncate" title="Name">
                                                <apex:inputField value="{!newAcct.Name}" rendered="{!newAcct.id==null}" required="{!validationRequired}" styleClass="slds-input"/>
                                                <apex:commandLink title="click here to open in new tab" target="_blank" value="{!newAcct.Name}" action="/{!newAcct.id}" rendered="{!newAcct.id!=null}"/>
                                            </div></td>
                                            
                                            <td data-label="Party Type"><div class="slds-truncate" title="Party Type">
                                                <apex:inputField value="{!newAcct.Party_Type__c}" rendered="{!newAcct.id==null}"  required="{!validationRequired}" styleClass="slds-input"/>
                                                <apex:outputField value="{!newAcct.Party_Type__c}" rendered="{!newAcct.id!=null}" />
                                            </div></td>
                                             
                                            <td data-label="Dealer"><div class="slds-truncate inp slds-lookup" title="Dealer">
                                               <!-- <apex:inputField value="{!newAcct.Dealer__c}" rendered="{!newAcct.id==null}"  />-->
                                                 
                                                   <apex:inputText value="{!newAcct.Dealer__c}" rendered="{!newAcct.id==null}"   id="targetIdDealer" styleClass="targetFieldDealer{!archCount}" style="display:none"/>
                                                  <apex:outputPanel layout="inline" style="vertical-align:middle" rendered="{!newAcct.id==null}">
                                                         <input type="text" size="20" id="targetNameDealer{!archCount}" styleClass="slds-input"  value="{!newAcct.Dealer__r.name}"/>
                                                         <a href="#" id="myBtn2Dealer" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionDealer(targetFieldDealer{!archCount},{!archCount})"/></a>
                                                    </apex:outputPanel>
                                               
                                                <apex:outputField value="{!newAcct.Dealer__r.name}"  rendered="{!newAcct.id!=null}" />
                                            </div></td>
                                            <td data-label="Distributor"><div class="slds-truncate inp slds-lookup" title="Distributor">
                                                <!--<apex:inputField value="{!newAcct.Account__c}" rendered="{!newAcct.id==null}"  />-->
                                                 <apex:inputText value="{!newAcct.Account__c}" rendered="{!newAcct.id==null}" id="targetIdDistr" styleClass="targetfieldDistr{!archCount}" style="display:none" />
                                                   <apex:outputPanel layout="inline" style="vertical-align:middle" rendered="{!newAcct.id==null}">                                       
                                                        <input type="text" size="20" id="targetNameDistr{!archCount}" styleClass="slds-input"  value="{!newAcct.Account__r.name}"/>
                                                        <a href="#" id="myBtn2Distr" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionDistributor(targetNameDistr{!archCount},{!archCount})"/></a>
                                                   </apex:outputPanel> 
                                                <apex:outputField value="{!newAcct.Account__r.name}" rendered="{!newAcct.id!=null}" /> 
                                            </div></td>
                                            <td data-label="State"><div class="slds-truncate" title="State">
                                                <apex:inputField value="{!newAcct.State__c}" rendered="{!newAcct.id==null}"  required="{!validationRequired}" styleClass="slds-input"/>
                                                <apex:outputField value="{!newAcct.State__c}" rendered="{!newAcct.id!=null}" /> 
                                            </div></td>
                                            <td data-label="District"><div class="slds-truncate inp slds-lookup" title="District">
                                                <apex:inputField value="{!newAcct.District__c}" rendered="{!newAcct.id==null}" required="{!validationRequired}" styleClass="slds-input"/>
                                                <apex:outputField value="{!newAcct.District__c}" rendered="{!newAcct.id!=null}" /> 
                                            </div></td>
                                            <td data-label="Location"><div class="slds-truncate" title="Location">
                                                <apex:inputField value="{!newAcct.City__c}" rendered="{!newAcct.id==null}" styleClass="slds-input" />
                                                <apex:outputField value="{!newAcct.City__c}" rendered="{!newAcct.id!=null}" /> 
                                            </div></td>
                                            <td data-label="Taluk / Tehsil"><div class="slds-truncate inp slds-lookup" title="Taluk / Tehsil">
                                                <!--<apex:inputField value="{!newAcct.APPL_Taluk__c}" rendered="{!newAcct.id==null}" required="{!validationRequired}" />-->
                                                <apex:inputText value="{!newAcct.APPL_Taluk__c}" rendered="{!newAcct.id==null}"  id="targetId" styleClass="targetfield{!archCount}" required="{!validationRequired}" style="display:none"/>
                                                 <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account" rendered="{!newAcct.id==null}"> 
                                                     <input type="text" size="20" id="targetName{!archCount}" styleClass="slds-input" value="{!newAcct.APPL_Taluk__r.name}" />
                                                     <a href="#" id="myBtn2tlk" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionTaluk(targetName{!archCount},{!archCount})"/></a>
                                                </apex:outputPanel> 
                                                <apex:outputField value="{!newAcct.APPL_Taluk__r.name}" rendered="{!newAcct.id!=null}" /> 
                                            </div></td>
                                        </tr>
                                        <apex:variable value="{!archCount+1}" var="archCount"/>
                                    </apex:repeat>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </apex:outputPanel>
                
                <center>
                
                    <apex:actionFunction name="savePromoAcc"  action="{!SavePromotionMembers}" immediate="false"  status="as1"> </apex:actionFunction>
                    <apex:actionFunction name="sav" action="{!SavePromotionMembers}" immediate="false"  status="as1"> </apex:actionFunction>
                       <apex:actionFunction name="add" action="{!ShowMembers}" immediate="false"  status="as1"> </apex:actionFunction>
                      <apex:actionFunction name="add1" action="{!more}" immediate="false"  status="as1"></apex:actionFunction>
                  
                    <apex:actionFunction name="paraFunction" action="{!more}" rerender="msg,proForm">     
                    <apex:param id="aname" name="addrowsvalue" value="" />
                    </apex:actionFunction>
                    
                   
                    <div class="slds-p-around_medium">
                    <!-- <apex:commandButton value="Save" action="{!SavePromotionMembers}" styleClass="btn  btn-info"  style="color: #ffffff;text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25); background-color: #49afcd;background-image: -moz-linear-gradient(top, #5bc0de, #2f96b4); background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#5bc0de), to(#2f96b4)); background-image: -webkit-linear-gradient(top, #5bc0de, #2f96b4); background-image: -o-linear-gradient(top, #5bc0de, #2f96b4); background-image: linear-gradient(to bottom, #5bc0de, #2f96b4); background-repeat: repeat-x; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de', endColorstr='#ff2f96b4', GradientType=0);border-color: #2f96b4 #2f96b4 #1f6377;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);" reRender="proForm" status="as1" oncomplete="saveClosePopUp();"/> -->
                    <apex:commandButton id="saveAccBtn"  rendered="{!showMemberSaveBtn}" onclick="saveProMembers()" styleClass="slds-button slds-button_brand" value="Save" status="as1" reRender="proForm"></apex:commandButton>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <apex:commandButton id="abc" rerender="saveAccBtn,proForm" onclick="saveAndAdd()"  styleClass="slds-button slds-button_brand" value="Add More" status="as1" ></apex:commandButton>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <apex:commandButton id="closeAccId"  action="{!closeWindow}" immediate="true" value="Cancel" styleClass="slds-button slds-button_neutral"></apex:commandButton>
                    </div>
                
                </center> 
            </apex:outputPanel>
            
           
            </apex:form>
            
        </div>
                          
                                                                  
        <!--Custom JS  -->
        <script type="text/javascript">
        
        var j$ = jQuery.noConflict();
        var resultFound = false;
        var mobileNumSet = new Set();
        var existingMobileSet = new Set();
        var oldCtrlMobileSet = new Set();
        var promotionId = '';
        var i,value ;
        
     function displaymessage(){
         //alert("Please type the number of Promotion Members to be added. You can add upto 60 members at a time");
        }
        

        
        j$(document).ready(function() {
            
            promotionId = "{!$CurrentPage.parameters.id}";
            console.log('--promotionId--'+promotionId);
            
                oldCtrlMobileSet = {!oldPromoMembers};
            
            for (value of oldCtrlMobileSet) {
                console.log('--value--'+value);
                existingMobileSet.add(value);
            }
        });
        
        function isNumber(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
            return true;
        }
        
        function showMobileNo(tags,noResult) {
            console.log('Show Mobile No.1');
            //var mobId = "#"+tags;
            var promotype = j$("[id$=promoName]").val();
            
            console.log('--tags--'+tags);
            j$("[id$=Archi]").autocomplete({
              
              minLength: 3,
                source: function (request, response) {                    
                    
                    //Call Remoting   
                    APPL_ADD_MEMBERS_DETAIL_CTRL.getCustomer(request.term,promotype, function(result,event) {
                        if(event.status) {
                            console.log("hello");
                            var data = [];
                            var customer = [];
                            j$.each(result,function(key, record) {
                                // console.log(record);
                                customer.push(result[key].Contact_Number_Mobile__c);
                            });
                            //return the dataa
                            console.log('customer--'+customer);
                            // response(customer);
                            var results = j$.ui.autocomplete.filter(customer, request.term);
                            
                            if (!results.length) {
                                // j$("#no-results").text("No results found!");
                                document.getElementById(noResult).innerHTML = "No results found!";
                                document.getElementById(mobNumber).style.borderColor = "none";
                                resultFound = false;
                            } else {
                                document.getElementById(noResult).innerHTML = "";
                                resultFound = true;
                                
                            }
                            response(results);
                            
                        } else if(event.type == 'exception') {
                            console.log(event.message);
                        }
                        if(event.type == 'rpc') {
                            //j$("#el_loading").hide();
                            console.log(event.type);
                        }
                    },{escape:true});
                }
            });
        }
        
        
        function callActionJs (mobNumber,rowIndex) {
            // body...
            var mobileNumber = document.getElementById(mobNumber).value;
            var numMobileNumber = Number(mobileNumber);
            console.log('--number--'+numMobileNumber);
            if(mobileNumber.length == 10 && resultFound == true && mobileNumSet.has(mobileNumber) == false && existingMobileSet.has( Number(mobileNumber)) == false){
                //alert(mobileNumber);
                mobileNumSet.add(mobileNumber);
                console.log('--mobileNumSet--'+mobileNumSet);
                copyAccountRow(mobileNumber,rowIndex);
               
          } else if(mobileNumSet.has(mobileNumber) == true){
       // document.getElementById(mobNumber).style.borderColor = "red";
         //    document.getElementById(mobNumber).focus();
           //   document.getElementById(mobNumber).select(); 
              alert('Mobile Number already in the List');
              
             
              
          } else if(existingMobileSet.has(Number(mobileNumber)) == true){
          // document.getElementById(mobNumber).style.borderColor = "red";
            //  document.getElementById(mobNumber).focus();
            //  document.getElementById(mobNumber).select(); 
              alert('Member already added to this Promotion Activity');
             
              
          } else{
              console.log('Mobile Number is not 10 Digits..');
              document.getElementById(mobNumber).style.borderColor = "none";
              //document.getElementById(mobNumber).focus();
          }
      }
        
        function setProducts(selectId,proId) {
            console.log(proId);
            var selectProducts  = document.getElementById(selectId);
            var selectedPros    = [];
            
            for (var i = 0; i < selectProducts.length; i++) {
                if (selectProducts.options[i].selected) selectedPros.push(selectProducts.options[i].value);
            }
            console.log(selectedPros);
            
            var proArray = selectedPros.toString();
            var finalProductsVal = proArray.replace(/,/g , ";");
            console.log(finalProductsVal);
            
            document.getElementById(proId).value = finalProductsVal;
            
        }
        
        //addStyleClass
        function coypToApex(htmlId, expId) {
        
            var htmlVal = document.getElementById(htmlId).value;
            document.getElementById(expId).value = htmlVal;
            //alert(htmlVal);
        }
        
        function addingMore() {
            //alert("Add upto 60 members.\nAdd More Members on next page.");
        }
        
        function 
        ProMembers() {
        
        // alert("add more then 60 promotion members please go back and add members button ");
        
            console.log('Call Save Promotion..');
            savePromoAcc();
        }
        var addMoreCheck = true;
        
         function saveAndAdd(){
        //sav();
        //add();
        
        j$(document).ready(function(){
        
        if(addMoreCheck === true) {
                j$('body').append('<div class="blockWindow"></div><div class="mainblock slds-p-around_small"><label>Enter No of Rows :</label><br/><input type="text" id="addrowno" class="slds-input wid100"/><br/><input type="button" onclick="savv()" class="slds-m-top_small slds-button slds-button_brand" value="Add Rows" id="addrow" reRender="msg,proForm" status="as1" /></div>');
             addMoreCheck = false;
             }   
              
            });
        
            
            
        }
       
       function savv(){
       addMoreCheck = true;
       j$(document).ready(function(){ 
       console.log('No of rows:'+document.getElementById("addrowno").value);
     paraFunction(document.getElementById("addrowno").value);
     
         j$('.blockWindow').remove();
         j$('.mainblock').remove();
     });
     
      
       }
        function maxLengthCheck(object) {
        
          if((object.value.length > object.maxLength)) {
             object.value = object.value.slice(0, object.maxLength);
             }
             
             if((object.value > object.max)) {
             object.value = object.value.slice(0, 1);
             alert('Value range allowed to enter is 01 - 60');
             }
        }
        
        
        function saveProMembers() {
        
            console.log('Call Save Promotion..');
            var countError = -1;
            var hasError = false;
            
            j$('.requiredFld').each(function() {
                    var fieldVal = j$(this).val();
                    console.log('fieldVal fieldVal postvist ' + fieldVal);
                    if (fieldVal == '' || fieldVal == null) {
                    //alert('test for mandatory');
                        j$(this).next('.Error').text("Required field.");
                        countError += 1;
                        hasError = true;
                        console.log('if countError postvist ' + countError + ' hasError ' + hasError);
                         return false;
                    } else {
                        countError -= 1;
                        hasError = false;
                        console.log('else countError postvist ' + countError + ' hasError ' + hasError);
                    }
                });
                if (hasError==true) {
                    alert('Please fill all the (*)Requried fields');
                } else {
                    console.log('Call Save Method..');
                    sav();
                }
        }
        </script>
        <style>
            input[type="number"]::-webkit-outer-spin-button,
            input[type="number"]::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
            input[type="number"] {
                -moz-appearance: textfield;
            }
            
            .modal {
                display: none; /* Hidden by default */
                position: fixed; /* Stay in place */
                z-index: 1; /* Sit on top */
                padding-top: 100px; /* Location of the box */
                left: 0;
                top: 0;
                width: 100%; /* Full width */
                height: 100%; /* Full height */
                overflow: auto; /* Enable scroll if needed */
                background-color: rgb(0,0,0); /* Fallback color */
                background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
                z-index:999999;
            }
            
            /* Modal Content */
            .modal-content {
                background-color: #fefefe;
                margin: auto;
                padding: 20px;
                border: 1px solid #888;
                width: 80%;
            }
            /* The Close Button */
            .close {
                color: #aaaaaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
            }
            
            .close:hover,
            .close:focus {
                color: #000;
                text-decoration: none;
                cursor: pointer;
            }
        </style>
        
    </body>
</apex:page>