<apex:page standardcontroller="Target__c" extensions="APPL_SITEVISIT_CALENDAR_CTRL,CustomLookupForProject,AmeyoCallController"
           showHeader="false" sidebar="false" docType="html-5.0" standardStylesheets="false" id="pageID">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <apex:slds />
    <c:AP_Calendar_Component />
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="../../soap/ajax/39.0/connection.js" type="text/javascript"></script>
    <script src="/soap/ajax/10.0/connection.js"> </script>
    <apex:includeLightning />
        <script>
        function opentChangeBeatComponent(){
        
        $Lightning.use("c:ChangeBeatApp", function() {
            $Lightning.createComponent("c:ChangeBeat",
                                       { 
                                           borderColor : "#16325c", 
                                           bgColor : "#16325c" ,
                                           fontColor : "#FFF",
                                           frontText : "What's cool about Lightning Component Development",
                                           backText : "You dont need to enable Lightning experience, It will work on Classic Instance as well"
                                       },
                                       "FlipcardContainer",
                                       function(cmp) {
                                           console.log('Component created, do something cool here');
                                       });
        });
    }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAYUnndj48wFOkLE0bvQ2IoHp0gBajGaZs"></script>
    <apex:includeScript value="{!URLFOR($Resource.Moment)}" />
        <title>Ashirvad Site-Visit Execution</title>
        <style>
            .remove_btn {
                font-size: 13px!important;
                color: white!important;
                background: #c51212!important;
                padding: 0px 5px!important;
                border-radius: 4px!important;
                text-decoration:none!important;
            }
    th, .slds-truncate {white-space:normal!important;}
    .closeproject {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }
    .closeproject:hover,
        .closeproject:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    .lookup_style {
        position:relative!important;
    }
    .lookup_style a {
        position: absolute!important;
        right: 30px!important;
        top: 5px!important;
    }
    .multi_select select,.multi_select .lookupInput input{
        background-color: #fff;
        color: #16325c;
        border: 1px solid #d8dde6;
        border-radius: .25rem;margin-right: 5px; 
        padding-left: .5rem;
        padding-right: 1.5rem;
        min-height: calc(1.875rem + (1px * 2));
        height: inherit;width: 50%;
    }
    .multi_select .lookupInput input {
        position: relative;
        top: -2px;
    }
    .multi_select .lookupInput a {
        position: relative;
        z-index: 9999;
        right: 35px;top: -3px;
    }
    @media only screen and (min-width: 250px) and (max-width: 770px){
        .fleft {
            float:left!important;
        }
        .fc-header-right , .fc-header-left {
            font-size:13px!important;
        }
        .wid100 .slds-input, .wid100  .inp_fd input[type="text"], .inp_fd select {
            width:100px;
        }
        .disp_block input[type="text"], .disp_block select {
            width:70px!important
        }
        .ui-dialog {
            width:90%!important;}
        #button {
        padding:0px!important;
    }
    .tpr {
        display:block!important;
        width:146px!important;
        margin-left:0px!important;
        margin-top:5px!important;
    }
    .fc-header-center {
        font-size:12px;
    } 
    .slds-input, .slds-select {
        width:90%!important;
    }                            
    }
    .fc-header-right {
        text-align: right!important;
    }
    .fc-header-center {
        text-align: center!important;
    } 
    .ui-state-active, 
        .ui-widget-content .ui-state-active, 
            .ui-widget-header .ui-state-active,
                .ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{ border: 1px solid #ddd;font-weight:normal;} 
                .slds-truncate {white-space:normal!important;}
                                                                                                           .ui-accordion-header {background: #fafaf9!important;border: 1px solid #ddd!important;color: #6f6f6f!important;}
                                                                                                           .slds-clearfix{clear:both;}
                                                                                                                                 .fc-first {
                                                                                                                                     border-left: 1px solid #ddd!important;
                                                                                                                                     border-top: 1px solid #ddd!important;
                                                                                                                                 }
                                                                                                                                 .ui-widget-content{background:none;}
                                                                                                                                 .fc-day-header{background: #fafaf9!important;border-top: 1px solid #ddd!important;border-right: 1px solid #ddd!important;}
                                                                                                                                 .fc-past, .fc-future {background: none;}
                                                                                                                                                .ui-widget-header{font-family: "Salesforce Sans",Arial,sans-serif!important; text-transform: uppercase!important;color: #54698d;line-height: 1.25;font-size:15px!important;}
                                                                                                                                                .ui-widget-content,.ui-widget-header{background-color:#fff;}
                                                                                                                                                .ui-widget-overlay{background-color: #000;opacity: 0.5;background-image: none;}
                                                                                                                                                .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default{ background:none;}
                                                                                                                                                                   .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active{color: #676767;}
                                                                                                                                                                   .slds-table thead th {background: #fafaf9;}
                                                                                                                                                                   .ui-widget-header{background:none;font-weight: normal!important;border: none;
                                                                                                                                                                                     border-radius: 0;}
                                                                                                                                                                                         table.fc-border-separate {border-collapse: collapse;}
                                                                                                                                                                                         .ui-accordion .ui-accordion-content {padding: 2px;}
                                                                                                                                                                                         .disable {
                                                                                                                                                                                             color: red;
                                                                                                                                                                                         }
                                                                                                                                                                                         div#datePicker {
                                                                                                                                                                                         left: 63% !important;
                                                                                                                                                                                         top: 361px;
                                                                                                                                                                                         z-index: 10000 !important;
                                                                                                                                                                                        }
                                                                                                                                                                                                                                                             #wrap {
                                                                                                                                                                                                                                                             font-size: 20px;
                                                                                                                                                                                                                                                             font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
                                                                                                                                                                                                                                                            }
                                                                                                                                                                   .fc-event-time,
                                                                                                                                                                       .fc-event-title {
                                                                                                                                                                           font-size: 15px !important;
                                                                                                                                                                       }
                                                                                                                                                                   .dataWidgets {
                                                                                                                                                                       background: #14558E;
                                                                                                                                                                       box-shadow: 1px 1px 1px #000672;
                                                                                                                                                                       color: #fff;
                                                                                                                                                                       padding: 5px;
                                                                                                                                                                       border-radius: 5px;
                                                                                                                                                                   }
                                                                                                                                                                   .heading {
                                                                                                                                                                       margin-top: 0;
                                                                                                                                                                       padding-top: 1em;
                                                                                                                                                                       background-color: #62BBE9;
                                                                                                                                                                       color: #000;
                                                                                                                                                                       font-size: 14px;
                                                                                                                                                                       font-weight: normal;
                                                                                                                                                                       padding: 6px;
                                                                                                                                                                       height: 12px;
                                                                                                                                                                       border-radius: 5px 5px 0 0;
                                                                                                                                                                   }
                                                                                                                                                                   .astriskStyle {
                                                                                                                                                                       color: #FF0000;
                                                                                                                                                                       font-size: 16px!important;
                                                                                                                                                                   }
                                                                                                                                                                   div.myImage {
                                                                                                                                                                       display: none;
                                                                                                                                                                   }
                                                                                                                                                                   .ui-dialog .ui-dialog-titlebar-close {
                                                                                                                                                                       width: 40px;
                                                                                                                                                                       /*display: none !important;*/
                                                                                                                                                                   }
                                                                                                                                                                   .loader {
                                                                                                                                                                       background-image: url({!$Resource.Redcircle});
                                                                                                                                                                       background-repeat: no-repeat background-position: center;
                                                                                                                                                                       height: 100px;
                                                                                                                                                                   }
                                                                                                                                                                   .ui-widget-header {
                                                                                                                                                                       color: #2779AA;
                                                                                                                                                                       font-weight: bold;
                                                                                                                                                                       font-size: large;
                                                                                                                                                                   }
                                                                                                                                                                   .Error {
                                                                                                                                                                       color: #FF0000;
                                                                                                                                                                       font-size: small;
                                                                                                                                                                       font-family: sans-serif;
                                                                                                                                                                       margin: 0px;
                                                                                                                                                                   }
                                                                                                                                                                   .lookupIcon {
                                                                                                                                                                       background-image: url(/img/func_icons/util/lookup20.gif);
                                                                                                                                                                       background-position: 0 0;
                                                                                                                                                                       width: 20px;
                                                                                                                                                                       height: 20px;
                                                                                                                                                                       background-position: top left;
                                                                                                                                                                   }
                                                                                                                                                                   .inp_fd input[type="text"], .inp_fd select {
                                                                                                                                                                       background-color: rgb(255, 255, 255);
                                                                                                                                                                       border: 1px solid rgb(221, 219, 218);
                                                                                                                                                                       border-radius: .25rem;
                                                                                                                                                                       transition: border .1s linear,background-color .1s linear;
                                                                                                                                                                       display: inline-block;
                                                                                                                                                                       padding: 0 1rem 0 .75rem;
                                                                                                                                                                       line-height: 1.875rem;
                                                                                                                                                                       min-height: calc(1.875rem + (1px * 2));
                                                                                                                                                                   }
                                                                                                                                                                   .lookupInput {
                                                                                                                                                                       position:relative;
                                                                                                                                                                   }
                                                                                                                                                                   .inp_fd a {
                                                                                                                                                                       position:absolute;
                                                                                                                                                                       right:8px;
                                                                                                                                                                       top:0px;
                                                                                                                                                                   }
                                                                                                                                                                   .white_space .slds-truncate {
                                                                                                                                                                       white-space: inherit!important;
                                                                                                                                                                   }
                                                                                                                                                                   .inp_look { 
                                                                                                                                                                       position:relative;
                                                                                                                                                                   }
                                                                                                                                                                   .inp_look a {
                                                                                                                                                                       top:3px;
                                                                                                                                                                   }
                                                                                                                                                                   .modal {
                                                                                                                                                                       display: none; /* Hidden by default */
                                                                                                                                                                       position: fixed; /* Stay in place */
                                                                                                                                                                       z-index: 1; /* Sit on top */
                                                                                                                                                                       padding-top: 100px; /* Location of the box */
                                                                                                                                                                       left: 0;
                                                                                                                                                                       top: 0;
                                                                                                                                                                       width: 100%; /* Full width */
                                                                                                                                                                       height: 100%; /* Full height */
                                                                                                                                                                       overflow: auto; /* Enable scroll if needed */
                                                                                                                                                                       background-color: rgb(0,0,0); /* Fallback color */
                                                                                                                                                                       background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
                                                                                                                                                                       z-index:999999;
                                                                                                                                                                   }
                                                                                                                                                                   .modal-content {
                                                                                                                                                                       background-color: #fefefe;
                                                                                                                                                                       margin: auto;
                                                                                                                                                                       padding: 20px;
                                                                                                                                                                       border: 1px solid #888;
                                                                                                                                                                       width: 80%;
                                                                                                                                                                   }
                                                                                                                                                                   .close {
                                                                                                                                                                       color: #aaaaaa;
                                                                                                                                                                       float: right;
                                                                                                                                                                       font-size: 28px;
                                                                                                                                                                       font-weight: bold;
                                                                                                                                                                   }
                                                                                                                                                                   .closePostVisit {
                                                                                                                                                                       color: #aaaaaa;
                                                                                                                                                                       float: right;
                                                                                                                                                                       font-size: 28px;
                                                                                                                                                                       font-weight: bold;
                                                                                                                                                                   }
                                                                                                                                                                   .closePromotion{
                                                                                                                                                                       color: #aaaaaa;
                                                                                                                                                                       float: right;
                                                                                                                                                                       font-size: 28px;
                                                                                                                                                                       font-weight: bold;
                                                                                                                                                                   }
                                                                                                                                                                   .closeMeeting{
                                                                                                                                                                       color: #aaaaaa;
                                                                                                                                                                       float: right;
                                                                                                                                                                       font-size: 28px;
                                                                                                                                                                       font-weight: bold;
                                                                                                                                                                   }
                                                                                                                                                                   .closeVisit2{
                                                                                                                                                                       color: #aaaaaa;
                                                                                                                                                                       float: right;
                                                                                                                                                                       font-size: 28px;
                                                                                                                                                                       font-weight: bold;
                                                                                                                                                                   }
                                                                                                                                                                   .close:hover,
                                                                                                                                                                       .close:focus {
                                                                                                                                                                           color: #000;
                                                                                                                                                                           text-decoration: none;
                                                                                                                                                                           cursor: pointer;
                                                                                                                                                                           .closePostVisit:hover,
                                                                                                                                                                               .closePostVisit:focus {
                                                                                                                                                                                   color: #000;
                                                                                                                                                                                   text-decoration: none;
                                                                                                                                                                                   cursor: pointer;
                                                                                                                                                                                   .closePromotion:hover,
                                                                                                                                                                                       .closePromotion:focus {
                                                                                                                                                                                           color: #000;
                                                                                                                                                                                           text-decoration: none;
                                                                                                                                                                                           cursor: pointer;  
                                                                                                                                                                                           .closeMeeting:hover,
                                                                                                                                                                                               .closeMeeting:focus {
                                                                                                                                                                                                   color: #000;
                                                                                                                                                                                                   text-decoration: none;
                                                                                                                                                                                                   cursor: pointer;  
                                                                                                                                                                                                   .closeVisit2:hover,
                                                                                                                                                                                                       .closeVisit2:focus {
                                                                                                                                                                                                           color: #000;
                                                                                                                                                                                                           text-decoration: none;
                                                                                                                                                                                                           cursor: pointer;
                                                                                                                                                                                                       }
                                                                                                                                                                                                   .custPopup{
                                                                                                                                                                                                       background-color: white;
                                                                                                                                                                                                       border-width: 2px;
                                                                                                                                                                                                       border-style: solid;
                                                                                                                                                                                                       z-index: 9999;
                                                                                                                                                                                                       left: 50%;
                                                                                                                                                                                                       padding:10px;
                                                                                                                                                                                                       position: absolute;
                                                                                                                                                                                                       width: 500px;
                                                                                                                                                                                                       margin-left: -250px;
                                                                                                                                                                                                       top:100px;
                                                                                                                                                                                                   }
                                                                                                                                                                                                   .popupBackground1{
                                                                                                                                                                                                       background-color:black;
                                                                                                                                                                                                       opacity: 0.20;
                                                                                                                                                                                                       filter: alpha(opacity = 20);
                                                                                                                                                                                                       position: absolute;
                                                                                                                                                                                                       width: 100%;
                                                                                                                                                                                                       height: 100%;
                                                                                                                                                                                                       top: 0;
                                                                                                                                                                                                       left: 0;
                                                                                                                                                                                                       z-index: 9998;
                                                                                                                                                                                                   }   
                                                                                                                                                                                                   </style>
                                                                                                                                                                                                   <body>
                                                                                                                                                                                                       <apex:form >
                                                                                                                                                                                                           <apex:include pageName="CSS_Daily_Visit_Plan" />
                                                                                                                                                                                                               <apex:actionstatus id="as1">
                                                                                                                                                                                                                   <apex:facet name="start">
                                                                                                                                                                                                                       <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;height: 100%;opacity:0.65;width:100%;z-index: 115;overflow:hidden;position:fixed;">
                                                                                                                                                                                                                           <div class="waitingHolder">
                                                                                                                                                                                                                               <img class="waitingImage" src="{!$Resource.Redcircle}" style="width: 15%;height: 40%;"
                                                                                                                                                                                                                               title="Please Wait..." />
                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                               </apex:facet>
                                                                                                                                                                                                                               </apex:actionstatus>
                                                                                                                                                                                                                               <div class="slds-page-header">
                                                                                                                                                                                                                                   <div class="slds-media">
                                                                                                                                                                                                                                       <div class="slds-media__body">
                                                                                                                                                                                                                                           <h1 class="slds-page-header__title slds-truncate slds-align-middle" title=""><img src="{!$Resource.AshirvadLogoNew}" alt="Ashirvad Logo" width="180" height="60" /></h1>
                                                                                                                                                                                                                                           <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                           <apex:commandButton value="Change Beat" action="{!showPopup}" rerender="tstpopup" oncomplete="opentChangeBeatComponent()" styleClass="slds-button slds-button_brand" status="as1"/>
                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                           <apex:outputPanel id="tstpopup">
                                                                                                                                                                                                                                               <apex:outputPanel styleClass="popupBackground1" layout="block" rendered="{!displayPopUp}"/>
                                                                                                                                                                                                                                                   <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">
                                                                                                                                                                                                                                                       <div id="FlipcardContainer" />
                                                                                                                                                                                                                                                           </apex:outputPanel>
                                                                                                                                                                                                                                                       </apex:outputPanel>
                                                                                                                                                                                                                                                       </apex:form>
                                                                                                                                                                                                                                                       <div id='wrap'>
                                                                                                                                                                                                                                                           <div class="slds-panel__body slds-p-around_small">
                                                                                                                                                                                                                                                               <div class="slds-form slds-form_compound">
                                                                                                                                                                                                                                                                   <fieldset class="slds-form-element">
                                                                                                                                                                                                                                                                       <div class="slds-form-element__group">
                                                                                                                                                                                                                                                                           <div class="slds-grid slds-wrap">
                                                                                                                                                                                                                                                                               <div class="slds-size--1-of-1 slds-large-size--2-of-3 slds-medium-size--1-of-2 slds-small-size--1-of-1 slds-p-right_small">
                                                                                                                                                                                                                                                                                   <div class="leftPanel">
                                                                                                                                                                                                                                                                                       <div id='calendar'></div> 
                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                       <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-2 slds-small-size--1-of-1 slds-p-right_small">
                                                                                                                                                                                                                                                                                           <div id='external-events' style="display:none;">
                                                                                                                                                                                                                                                                                               <h3>Promotional Activity</h3>
                                                                                                                                                                                                                                                                                               <apex:outputPanel id="FilterResults" styleClass="filterResults" layout="block">
                                                                                                                                                                                                                                                                                                   <table class="tg slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_col-bordered" 
                                                                                                                                                                                                                                                                                                   cellpadding="0" cellspacing="0" id="example">
                                                                                                                                                                                                                                                                                                       <thead>
                                                                                                                                                                                                                                                                                                       <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                           <th scope="col" data-label="Promotional Activity">
                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Promotion Type">Promotion Type</div>
                                                                                                                                                                                                                                                                                                               </th>
                                                                                                                                                                                                                                                                                                               <th scope="row" data-label="Promotional Activity">
                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Target">Target</div>
                                                                                                                                                                                                                                                                                                                   </th>
                                                                                                                                                                                                                                                                                                                   <th scope="row" data-label="Promotional Activity">
                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Actual">Actual</div>
                                                                                                                                                                                                                                                                                                                       </th>
                                                                                                                                                                                                                                                                                                                       <th scope="row" data-label="Promotional Activity">
                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Promotion Type">Promotion Type</div>
                                                                                                                                                                                                                                                                                                                           </th>
                                                                                                                                                                                                                                                                                                                           <th scope="row" data-label="Promotional Activity">
                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Target">Target</div>
                                                                                                                                                                                                                                                                                                                               </th>
                                                                                                                                                                                                                                                                                                                               <th scope="row" data-label="Promotional Activity">
                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Actual">Actual</div>
                                                                                                                                                                                                                                                                                                                                   </th>
                                                                                                                                                                                                                                                                                                                                   </tr>
                                                                                                                                                                                                                                                                                                                                   </thead>
                                                                                                                                                                                                                                                                                                                                   <tbody>
                                                                                                                                                                                                                                                                                                                                       <apex:repeat value="{!targetWrapperList_Promotional}" var="w">
                                                                                                                                                                                                                                                                                                                                           <tr>
                                                                                                                                                                                                                                                                                                                                           <td class="tg-il5c" data-label="Promotion Type">
                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Promotion Type">{!w.targetWrapper1.activityName}</div>
                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                               <td class="tg-733k" data-label="Target">
                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Target">
                                                                                                                                                                                                                                                                                                                                                       <apex:outputtext value="{!IF((w.targetWrapper1.targetValue == ''), '0', w.targetWrapper1.targetValue)}"/>
                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                       <td data-label="Actual">
                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate"
                                                                                                                                                                                                                                                                                                                                                           title="Actual">{!w.targetWrapper1.actuvalValue}</div>
                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                           <td class="tg-il5c" data-label="Promotion Type">
                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Promotion Type">{!w.targetWrapper2.activityName}</div>
                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                               <td class="contentCls tg-733k" data-label="Target">
                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate"
                                                                                                                                                                                                                                                                                                                                                                   title="Target">
                                                                                                                                                                                                                                                                                                                                                                       <apex:outputtext value="{!IF((w.targetWrapper2.targetValue == ''), '0', w.targetWrapper2.targetValue)}"/>
                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Actual">
                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Actual">{!w.targetWrapper2.actuvalValue}</div>
                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                           </tr>
                                                                                                                                                                                                                                                                                                                                                                           </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                           </tbody>
                                                                                                                                                                                                                                                                                                                                                                           </table>
                                                                                                                                                                                                                                                                                                                                                                           </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                           <h3>Retailing</h3>
                                                                                                                                                                                                                                                                                                                                                                           <apex:outputPanel layout="block">
                                                                                                                                                                                                                                                                                                                                                                               <table class="tg slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_col-bordered"
                                                                                                                                                                                                                                                                                                                                                                               cellpadding="0" cellspacing="0" 
                                                                                                                                                                                                                                                                                                                                                                               style="background-color: white;" id="example">
                                                                                                                                                                                                                                                                                                                                                                                   <thead>
                                                                                                                                                                                                                                                                                                                                                                                   <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                       <th scope="row" data-label="Retailing">
                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="">Type</div>
                                                                                                                                                                                                                                                                                                                                                                                           </th>
                                                                                                                                                                                                                                                                                                                                                                                           <th scope="row" data-label="Retailing">
                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="">Target</div>
                                                                                                                                                                                                                                                                                                                                                                                               </th>
                                                                                                                                                                                                                                                                                                                                                                                               <th scope="row" data-label="Retailing">
                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="">Actual</div>
                                                                                                                                                                                                                                                                                                                                                                                                   </th>
                                                                                                                                                                                                                                                                                                                                                                                                   </tr>
                                                                                                                                                                                                                                                                                                                                                                                                   </thead>
                                                                                                                                                                                                                                                                                                                                                                                                   <tbody>
                                                                                                                                                                                                                                                                                                                                                                                                       <apex:repeat value="{!targetWrapperList_Retailing}" var="w">
                                                                                                                                                                                                                                                                                                                                                                                                           <tr>
                                                                                                                                                                                                                                                                                                                                                                                                           <td class="tg-il5c" data-label="Type">
                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Type">{!w.activityName}</div>
                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                               <td class="contentCls tg-733k" data-label="Target">
                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Target">
                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputtext value="{!IF((w.targetValue == ''), '0', w.targetValue)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Actual">
                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Actual">
                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputtext value="{!IF((w.actuvalValue == ''), '0', w.actuvalValue)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                               </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                               </table>
                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                               <h3>Market Development</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputPanel layout="block" style="height:auto;">
                                                                                                                                                                                                                                                                                                                                                                                                                                   <table cellpadding="0" cellspacing="0"  style="background-color: white;" id="example" class="tg slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_col-bordered">
                                                                                                                                                                                                                                                                                                                                                                                                                                       <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                       <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                           <th scope="row" data-label="Market Development">
                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Type"><b>Type</b></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                   </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                               <th scope="row" data-label="Market Development">
                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Target"><b>Target</b></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                       </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th scope="row" data-label="Market Development">
                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Actual"><b>Actual</b></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                           </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                       </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:repeat value="{!targetWrapperList_market}" var="w">
                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-il5c" data-label="Type">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="{!w.activityName}">{!w.activityName}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td class="contentCls tg-733k" data-label="Target"><span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="{!w.targetValue}"><apex:outputtext value="{!IF((w.targetValue == ''), '0', w.targetValue)}"/></div></span></td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Actual">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="{!w.actuvalValue}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputtext value="{!IF((w.actuvalValue == ''), '0', w.actuvalValue)}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </table>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <h3>Primary Sales</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputPanel layout="block" style="height:auto;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <table cellpadding="0" cellspacing="0" style="background-color: white;"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   id="example" class="tg slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_col-bordered">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th scope="row" data-label="Primary Sales">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Type">Type</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th scope="row" data-label="Primary Sales">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Target ">Target</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:repeat value="{!targetWrapperList_primarySales}" var="w">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td class="tg-il5c" data-label="Type">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Type">{!w.activityName}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="contentCls tg-733k" data-label="Target">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   title="Target">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputtext value="{!IF((w.targetValue == ''), '0', w.targetValue)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th data-label="Actual">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Actual">Actual</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th data-label="Actual">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Actual">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputText value="{0, number, ###}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:param value="{!Target__c.Primary_Sales_Actuals__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputText>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </table>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </fieldset>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div id="promoCompPanel" style="display:none"> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <c:APPL_NEW_PROMOTION_Modified_Component id="createPromotionComp" tourdate="{!calpromoDate}" verticaltype="{!Target__c.Vertical__c}" promoid="{!calpromoId}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <input type="hidden" id="tmpTourDate" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <input type="hidden" id="tmpPromoId" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div id="unplannedCompPanel" style="display:none"> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <c:UnplannedVisitComponent id="createUnplannedvisitComp"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <!-- POP-IP FOR Site Visit ordBlk-->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div id="eventContent" title="Event" style="display:none;font-size:15px;background-color:white; !important;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:form id="frm">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <!--------------------------------------Visit Popup--------------------------------------------  -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div id="myVisitModal" class="modal">    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="modal-content" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span class="close" onclick="closefunc()">×</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:outputpanel id="lookupPanelVisit"  styleclass="outpanel">   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-page-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div clss="slds-media">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-media__body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-p-around_x-small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p>Please enter the search term below and click the 'Go' button.  This will
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       execute a search across all text fields</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:input value="{!orderFilterQuery}" id="queryVisit" disabled="false" type="text"/> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:input value="{!partyTypeFilter}" id="partyTypeTemp" type="text" style="display: none;" /> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:commandButton value="Go" action="{!runOrderFilterQuery}" rerender="lookupPanelVisit,dptableVisit">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </apex:commandButton>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptableVisit">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Primary Contact Person Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Party Type</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Contact Number (Mobile)</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>State</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>District</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Location</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tbody id="myTable">   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:repeat value="{!orderFilterAccounts}" var="account">       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr class="slds-hint-parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Name" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <input type="hidden" id="acctName{!account.Id}" value="{!account.Name}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Name"><apex:outputLink value="#" id="theaccountid" onclick="myFunction2forplumbing('{!account.id}')">{!account.Name}</apex:outputLink>  </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="Primary Contact Person Name ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Primary Contact Person Name"><apex:outputText value="{!account.Primary_Contact_Person_Name__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Party Type">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Party_Type__c}" escape="false" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Contact Number (Mobile)">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Contact Number (Mobile)"><apex:outputText value="{!account.Contact_Number_Mobile__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="State ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="State"><apex:outputText value="{!account.State__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="District ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="District"><apex:outputText value="{!account.District__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Location ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Location"><apex:outputText value="{!account.City__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <input id="closebtn" type="hidden" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </table> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:outputpanel styleclass="slds-text-color_error" rendered="{!orderFilterAccounts.size== 0}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       No records to display.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div></div> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <!--------------------------------------Visit Popup End----------------------------------------  -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <!---------------------------------------company name by popup------------------------------------->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div id="myVisitModalcompany" class="modal">    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="modal-content" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span class="closeprojbyEditId">&times;</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:outputpanel id="lookupPanelCompany"  styleclass="outpanel">   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-page-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div clss="slds-media">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-media__body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-p-around_x-small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <p>Please enter the search term below and click the 'Go' button.  This will
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               execute a search across all text fields</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:input value="{!ContactQuery}" id="queryCompany" disabled="false" type="text"/> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span><apex:commandButton value="Go" action="{!runContactQuery1}" rerender="lookupPanelCompany,dptable"/></span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptable">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th>Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Account Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Mobile No.</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Email ID</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </tr>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <tbody id="myTable">   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:repeat value="{!contactAccounts}" var="account">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <tr class="slds-hint-parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Name" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <input type="hidden" id="acctName{!account.Id}" value="{!account.Name}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunctioncomp('{!account.Id}')">{!account.Name}</apex:outputLink>  </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Account Name">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Account.Name}" escape="false" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Mobile No.">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Mobile No."> <apex:outputText value="{!account.Phone}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Email ID ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Status "><apex:outputField value="{!account.Email}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <input id="closebtn" type="hidden" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </table>                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div id="myaccount">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div id="myVisitModal2" class="modal">    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="modal-content" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span class="closeVisit2">×</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputpanel id="lookupPanelVisit2"  styleclass="outpanel">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-page-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div clss="slds-media">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-media__body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-p-around_x-small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <p>Please enter the search term below and click the 'Go' button.  This will
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           execute a search across all text fields</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:input value="{!orderFilterQuery2}" id="queryVisit2" disabled="false" type="text"/> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:input value="{!partyTypeFilter}" id="partyTypeProject" type="text" style="display: none;" /> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span><apex:commandButton value="Go" action="{!runOrderFilterQuery2}" rerender="lookupPanelVisit2,dptableVisit2"/></span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptableVisit2">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th>Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Primary Contact Person Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Party Type</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Contact Number (Mobile)</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>State</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>District</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Location</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </tr>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <tbody id="myTable">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:repeat value="{!orderFilterAccounts2}" var="account">       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <tr class="slds-hint-parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Name" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <input type="hidden" id="acctName{!account.Id}" value="{!account.Name}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunction6('{!account.id}')">{!account.Name}</apex:outputLink>  </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Primary Contact Person Name ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Primary Contact Person Name"><apex:outputText value="{!account.Primary_Contact_Person_Name__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Party Type">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Party_Type__c}" escape="false" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Contact Number (Mobile)">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Contact Number (Mobile)"><apex:outputText value="{!account.Contact_Number_Mobile__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="State ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="State"><apex:outputText value="{!account.State__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="District ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="District"><apex:outputText value="{!account.District__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Location ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Location"><apex:outputText value="{!account.City__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <input id="closebtn" type="hidden" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </table> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputpanel styleclass="slds-text-color_error" rendered="{!orderFilterAccounts2.size== 0}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           No records to display.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div id="Projectnamemodal" class="modal">    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="modal-content" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span class="closeproject">×</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputpanel id="PanelforProject"  styleclass="outpanel">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-page-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div clss="slds-media">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-media__body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-p-around_x-small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <p>Please enter the search term below and click the 'Go' button.  This will
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           execute a search across all text fields</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:input value="{!projQry}" id="Projectquery" disabled="false" type="text"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span><apex:commandButton value="Go" action="{!searchQueryforProject}" rerender="PanelforProject,tableforprojectname"/></span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="tableforprojectname">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <th>Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Project number</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Project owner</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Average discount</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tbody id="myTableProject">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:repeat value="{!oppqryList}" var="Proj">       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr class="slds-hint-parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Name" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <input type="hidden" id="acctName{!Proj.Id}" value="{!Proj.Name}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunctionProjectmodal('{!Proj.id}')">{!Proj.Name}</apex:outputLink>  </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="Project number ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Project number"><apex:outputText value="{!Proj.Project_Number__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Project owner">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Project owner"> <apex:outputText value="{!Proj.owner.name}" escape="false" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Average discount">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Average discount"><apex:outputText value="{!Proj.Average_Discount__c }" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <input id="closebtn" type="hidden" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </table> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div id="myModal" class="modal">    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="modal-content" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span class="closePromotion">×</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:outputpanel id="lookupPanel"  styleclass="outpanel">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-page-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div clss="slds-media">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-media__body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-p-around_x-small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p>Please enter the search term below and click the 'Go' button.  This will
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       execute a search across all text fields</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:input value="{!promoquery}" id="query" disabled="false" type="text"/> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span><apex:commandButton value="Go" action="{!SearchqueryforPromo}" rerender="lookupPanel,dptable"/></span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptable">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Promotion No.</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Date</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Type</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>State</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Actual District</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <tbody id="myTable">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:repeat value="{!Promolist}" var="promo">       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr class="slds-hint-parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Promotion No." >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunction3('{!promo.Name}','{!promo.id}')">{!promo.Name}</apex:outputLink>  </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Date">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Primary Contact Person Name"><apex:outputText value="{!promo.Date__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="Type">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Party type"> <apex:outputText value="{!promo.Type__c}" escape="false" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="State ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="State"><apex:outputText value="{!promo.State__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Actual District ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="District"><apex:outputText value="{!promo.District__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <input id="closebtn" type="hidden" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </table> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </div></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div id="myPostVisitModal" class="modal">    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="modal-content" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span class="closePostVisit">×</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:outputpanel id="lookupPanelPost"  styleclass="outpanel">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-page-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div clss="slds-media">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-media__body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-p-around_x-small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p>Please enter the search term below and click the 'Go' button.  This will
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       execute a search across all text fields</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:input value="{!orderFilterPostQuery}" id="queryPost" disabled="false" type="text"/> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span><apex:commandButton value="Go" action="{!runOrderFilterPostQuery}" rerender="lookupPanelPost,dptablePost"/></span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptablePost">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <th>Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Primary Contact Person Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Party Type</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Contact Number (Mobile)</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>State</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>District</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Location</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </tr>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <tbody id="myTable">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:repeat value="{!orderFilterPostAccounts}" var="account">       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <tr class="slds-hint-parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Name" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <input type="hidden" id="acctName{!account.Id}" value="{!account.Name}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Name"><apex:outputLink value="#" onclick="myFunction4('{!account.id}')">{!account.Name}</apex:outputLink> </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Primary Contact Person Name ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Primary Contact Person Name"><apex:outputText value="{!account.Primary_Contact_Person_Name__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="Party Type">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Party type"> <apex:outputText value="{!account.Party_Type__c}" escape="false" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Contact Number (Mobile)">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Contact Number (Mobile)"><apex:outputText value="{!account.Contact_Number_Mobile__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="State ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="State"><apex:outputText value="{!account.State__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="District ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="District"><apex:outputText value="{!account.District__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="Location ">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Location"><apex:outputText value="{!account.City__c}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <input id="closebtn" type="hidden" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </table> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputpanel styleclass="slds-text-color_error" rendered="{!orderFilterPostAccounts.size== 0}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   No records to display.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div></div> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div id="myMeetingModal" class="modal">    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="modal-content" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span class="closeMeeting">×</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputpanel id="lookupPanelMeeting"  styleclass="outpanel">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-page-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div clss="slds-media">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-media__body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <h1 class="slds-page-header__title slds-truncate slds-align-middle">Lookup</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <p class="slds-text-body_small slds-line-height_reset"></p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-p-around_x-small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <p>Please enter the search term below and click the 'Go' button.  This will
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   execute a search across all text fields</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <p><span style="color:red">IMPORTANT: </span>Please ensure you enter at least two characters</p>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:input value="{!searchUser}" id="queryMeeting" disabled="false" type="text"/> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span><apex:commandButton value="Go" action="{!runUserQuery}" rerender="lookupPanelMeeting,dptableMeeting"/></span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="dptableMeeting">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr class="slds-text-title_caps">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Full Name</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Title</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Phone</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <th>Email</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </tr>   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <tbody id="myTable">   
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:repeat value="{!userMeetingList}" var="user">       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <tr class="slds-hint-parent">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Full Name" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="slds-truncate" title="Full Name"><apex:outputLink value="#" onclick="myFunction5('{!user.Name}','{!user.id}')">{!user.Name}</apex:outputLink>  </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <td data-label="Title">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <div class="slds-truncate" title="Title"><apex:outputText value="{!user.Title}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <td data-label="Phone">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="slds-truncate" title="Phone"> <apex:outputText value="{!user.Phone}" escape="false" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <td data-label="Email">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Email"><apex:outputText value="{!user.Email}" /></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <input id="closebtn" type="hidden" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </table> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:actionFunction name="visit" reRender="visitBlk" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:actionFunction name="jsUpdateTripTime" action="{!updateTripTime}" reRender="tripPanelId">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:param id="updateTripParamId" name="updateTripParam" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:param id="tripTourParamId" name="tripTourParam" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:actionFunction>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:actionFunction name="jsInitializeModal" action="{!initializeModal}" reRender="tripPanelId,visitBlk,readVisits,readWriteVisit,ordBlk,holidayBlk,leaveBlk,meetingBlk,promotionalBlk,trainingBlk,mainExp,beatSection"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       oncomplete="onInitCompleteHandler()" status="as1">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:param id="iniTourId" name="iniTour" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:param id="iniTourDateId" name="iniTourDate" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:param id="iniTourVerId" name="tourVertical" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:param id="dateDiffId" name="dateDiff" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </apex:actionFunction>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:actionFunction name="jsSaveVisits" action="{!saveVisits}" reRender="tripPanelId,visitBlk,ordBlk,holidayBlk,leaveBlk,meetingBlk,promotionalBlk,promotable,trainingBlk,mainExp,expEditTable,expNewTable,beatSection" status="as1">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <apex:param id="tourId" name="tourId" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:param id="tourDateId" name="tourDate" value="" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </apex:actionFunction>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputpanel id="tripPanelId">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:commandButton id="startTripId" value="Start Trip" styleClass="slds-button slds-button_brand" onclick="updateTripTimeJs('Start Trip')" disabled="{!(loggedInFlag)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:commandButton id="endTripId" value="End Trip" styleClass="slds-button slds-button_brand" onclick="updateTripTimeJs('End Trip')" disabled="{!(loggedOutFlag)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </apex:outputpanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div id="accordion">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:pageMessages id="errorMsg"></apex:pageMessages>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <div class="wid100">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputPanel rendered="{!IF((Target__c.Vertical__c == 'Column') || (Target__c.Vertical__c == 'Plumbing'),true,false)}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <h3>Dealer Visit – Beat Plan</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <div class="accordion-content">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputPanel id="beatSection">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <apex:outputPanel rendered="{!readWriteMode}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <apex:outputPanel rendered="{!NOT(initTourPlan.Approval_Pending__c)}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <strong>Approval for Beat Change is pending.</strong>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div style="float: right;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:commandButton id="unplannedId" value="Unplanned Visit" reRender="visitBlk" onclick="assignUnplannedValues('{!$Component.unplannedId}')" styleClass="slds-button slds-button_brand" status="as1" disabled="{!NOT(initTourPlan.Approval_Pending__c)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div id="accordionBeat" style="clear: both;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:variable var="visitCount2" value="{!1}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:variable var="j" value="{!1}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:repeat value="{!beatAccList}" var="item">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <h4>{!item.Party_Name__r.Name}</h4>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="accordion-content">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputPanel id="tableId" rendered="{!(item.Ap_Tour_Plan__r.Approval_Pending__c)}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <table class=" slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Action</div></th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Sl.No</div></th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Unplanned Visit</div></th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Check In</div></th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Geo Address</div></th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">NPTB - CPVC</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">NPTB - Aqua</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">NPTB - SWR</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">NPTB - V&amp;A</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx" style="display:none;">Party Type</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Purpose Of Visit</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Products</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx" scope="row" data-label=""> <div class="slds-truncate" title="">Order Value</div></th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx"><abbr class="slds-required" title="required">* </abbr>Visit type Actual</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx"><abbr class="slds-required" title="required">* </abbr>Remarks</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="Action" id="tsgs">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:commandLink action="{!EditDVL}" reRender="beatSection" status="as1"  oncomplete="onInitCompleteDealerAccordion('{!indexDealerAcc}')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!((item.RecordEdit__c) && editonlytoday)}" title="Edit Visit" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:param name="visitCount2" value="{!visitCount2}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:commandLink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:commandLink action="{!CancelDVL}" reRender="beatSection" status="as1" oncomplete="onInitCompleteDealerAccordion('{!indexDealerAcc}')" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:image url="{!$Resource.AP_Remove_Icon}" width="20" height="20" title="Cancel" rendered="{!(readWriteMode && item.id != null && item.Unplanned_Visit__c)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:param name="visitCount2" value="{!visitCount2}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:commandLink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:commandLink action="{!saveDVL}" onclick="validateDealerSection()" reRender="beatSection" status="as1" oncomplete="onInitCompleteDealerAccordion('{!indexDealerAcc}')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:image url="{!$Resource.correctIcon}" width="20" height="20" title="Save" rendered="{!(readWriteMode && NOT(item.RecordEdit__c) && item.id != null)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:param name="visitCount2" value="{!visitCount2}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:commandLink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:commandLink onclick="callDialer('{!item.Id}')" rendered="{!((item.RecordEdit__c) && editonlytoday && item.Visit_type_Actual__c == 'E-Visit')}" reRender="beatSection" status="as1" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span class="slds-icon_container slds-icon-standard-call" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <svg aria-hidden="true" class="slds-icon slds-icon--small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <use xmlns:xlink="http://www.w3.org/2000/xlink"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#call">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </use>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </svg>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span class="slds-assistive-text">Call</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:commandLink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td data-label="Sl.No">{!visitCount2}</td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="Unplanned Visit">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!item.Unplanned_Visit__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td  class="tg-031e" data-label="Check In" id ="btnID">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-grid slds-wrap info_win_btn slds-p-vertical_small">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-large-size--1-of-1 "> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <input type="file" id="file-input" accept="image/*"></input><br/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:commandButton value="Checkin & Upload" onclick="uploadFileForDealerVisit('{!item.Id}'),checkin(this.id)"  styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only required" reRender="btnID"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputHidden value="{!item.Geo_Location__Latitude__s}" id="latId" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputHidden value="{!item.Geo_Location__Longitude__s}" id="lonId" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputHidden value="{!item.Geo_Address__c}" id="geoAddId" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div></div><p class="Error"></p></td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td  class="tg-031e" data-label="Geo Address">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputText value="{!item.Geo_Address__c}" id="gAdd"></apex:outputText> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="NPTB - CPVC" >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectList value="{!item.NPTB_CPVC__c}" multiselect="true" size="5">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectOptions value="{!nptbVals[item.Party_Name__c].cpvcList}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:selectList>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="NPTB - Aqua">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectList value="{!item.NPTB_Aqua__c}" multiselect="true" size="5">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectOptions value="{!nptbVals[item.Party_Name__c].aquaList}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:selectList>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="NPTB - SWR">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectList value="{!item.NPTB_SWR__c}" multiselect="true" size="5">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectOptions value="{!nptbVals[item.Party_Name__c].swrList}"  />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:selectList>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="NPTB - V&A">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectList value="{!item.NPTB_V_A__c}" multiselect="true" size="5">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:selectOptions value="{!nptbVals[item.Party_Name__c].vaList}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:selectList>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" style="display:none;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputField value="{!item.Party_Type__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td  class="tg-031e" data-label="Purpose of Visit">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="slds-truncate" title="Purpose of Visit *">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputField value="{!item.Purpose_of_Visit__c}" styleClass="required slds-select" id="purposeOfVisit1" style="width:100px; font-size:11px;" rendered="{!NOT(item.RecordEdit__c)}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <p class="Error"></p> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!item.Purpose_of_Visit__c}" rendered="{!item.RecordEdit__c}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="Products">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}"><apex:outputPanel id="beatpro" rendered="{!NOT(item.RecordEdit__c)}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <select class="form-control multSel slds-input" id="visProList1" multiple="true" size="3" style="width:150px;"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               onblur="setProducts('visProList1','{!$Component.visProdu}')">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:repeat value="{!productList}" var="pro">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <Option value="{!pro}">{!pro}</Option>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </select>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputHidden value="{!item.Products__c}" id="visProdu" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!item.Products__c}" rendered="{!item.RecordEdit__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel></td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="Order Value"><apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputField value="{!item.Order_Value__c}" id="visOrdVal1" style="width:100px" rendered="{!NOT(item.RecordEdit__c)}" styleClass="slds-input"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!item.Order_Value__c}" rendered="{!item.RecordEdit__c}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel></td> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="Visit type Actual">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputField value="{!item.Visit_type_Actual__c}" id="visittypeIdww" style="width:100px" rendered="{!IF(NOT(item.RecordEdit__c) && (Target__c.Vertical__c == 'Plumbing'),true,false)}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputField value="{!item.Visit_type_Actual__c}"  id="visittypeId1ww" style="width:100px" rendered="{!IF(NOT(item.RecordEdit__c) && (Target__c.Vertical__c == 'Column'),true,false)}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!item.Visit_type_Actual__c}" rendered="{!(item.RecordEdit__c)}" /> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="Remark">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:inputField value="{!item.Remarks__c}"  rendered="{!NOT(item.RecordEdit__c)}"  styleclass="remarkId{!visitCount2}"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!item.Remarks__c}" rendered="{!(item.RecordEdit__c)}"/> 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </table>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:variable var="visitCount2" value="{!visitCount2+1}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:variable var="j" value="{!j+1}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputPanel rendered="{!NOT(readWriteMode)}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <table class="tg" style=" width: 100%">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Sl.No  test</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Party Type </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Party Name </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <!--- <th class="tg-9agx">Taluk / Tehsil</th>--->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Purpose of Visit </th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Products</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Order Value</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Remarks</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <th class="tg-9agx">Competitors Information</th>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </thead>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:variable value="{!1}" var="visitCount1" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:repeat value="{!beatAccList}" var="visit">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" style="text-align: center" data-label="Sl No">{!visitCount1}</td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e" data-label="Party_Type">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!visit.Party_Type__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e"  data-label="Party_Name">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!visit.Party_Name__c}" /> </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e"  data-label="Purpose_of_Visit">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!visit.Purpose_of_Visit__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e"  data-label="Products">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!visit.Products__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e"  data-label="Order_Value">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!visit.Order_Value__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e"  data-label="Remarks">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!visit.Remarks__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td class="tg-031e"  data-label="Competitors_Information">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputField value="{!visit.Competitors_Information__c}" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <td/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:variable value="{!visitCount1+1}" var="visitCount1" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:repeat>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </tbody>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </table>                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </apex:outputPanel>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <h3>Visit</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <!-- This is  -->
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div class="accordion-content default">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <apex:outputPanel id="visitBlk">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
    <div class="panel-body">
        <apex:outputPanel rendered="{!readWriteMode}">
            <apex:outputPanel id="siteVisitList" rendered="{!isPlumbingColumn && readWriteMode && NOT(isBranding)}">
                <apex:outputPanel rendered="{!visitList.size !=0}">
                    <apex:variable var="j" value="{!1}" />
                    <table class="tg slds-table slds-table_bordered slds-max-medium-table_stacked white_space"
                           style=" width: 100%">
                        <apex:image url="{!$Resource.AP_Add_Icon}" width="24" height="24" style="cursor:pointer;margin-top: 10px;" onclick="siteVisitList();" title="Add New Entry" rendered="{!readWriteMode && editonlytoday}"/>
                        <thead>
                            <tr>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Action</div></th>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Sl.No</div></th>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr> Party Type </div></th>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr> Party Name</div></th>
                                <!-- <th class="tg-9agx">Taluk / Tehsil</th> -->
                                <th class="tg-9agx" scope="row" data-label="">
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}"><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr> Contact Name</div></apex:outputPanel></th>
                                <th class="tg-9agx">Shop Photo</th>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Geo Address</div></th>
                                <th class="tg-9agx" scope="row" data-label=""><apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}"><div class="slds-truncate" title="">update Account</div></apex:outputPanel></th>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Add Party</div></th>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr> Purpose of Visit</div></th>
                                <th class="tg-9agx" scope="row" data-label="">
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Column',true,false)}"><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr>Visit type Actual</div></apex:outputPanel>
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Column',true,false)}"><div class="slds-truncate" title=""> Visit type Actual</div></apex:outputPanel>
                                </th>
                                <th class="tg-9agx" scope="row" data-label=""><apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}">
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Column',true,false)}">
                                        <div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr>Products</div>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Column',true,false)}">
                                        <div class="slds-truncate" title="">Products</div>
                                    </apex:outputPanel>
                                    </apex:outputPanel></th>
                                <th class="tg-9agx" scope="row" data-label=""><apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}"> <div class="slds-truncate" title="">Order Value</div></apex:outputPanel></th>
                                <!--<th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">CPVC Order value</div></th>-->
                                <th class="tg-9agx" scope="row" data-label=""><apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}"><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr> Remarks</div></apex:outputPanel><apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}"><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr> MOM</div></apex:outputPanel></th>
                                <th class="tg-9agx" scope="row" data-label=""><div class="slds-truncate" title="">Competitiors Information</div></th>
                                <th class="tg-9agx" scope="row" data-label="">
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Column' || Target__c.Vertical__c == 'Plumbing',true,false)}"><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr>Financial Support Needed</div></apex:outputPanel></th>
                                <th class="tg-9agx"><apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}">Branding Request</apex:outputPanel></th>
                                <th class="tg-9agx" scope="row" data-label="">
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}"><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr>Check-out</div></apex:outputPanel></th>
                                <th class="tg-9agx" scope="row" data-label="">
                                    <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}"><div class="slds-truncate" title=""><abbr class="slds-required" title="required">* </abbr>Checkout Address</div></apex:outputPanel></th>
                            </tr>
                        </thead>
                        <tbody>
                            <apex:variable value="{!1}" var="visitCount" />
                            <apex:repeat var="visit" value="{!visitList}">
                                <tr >
                                    <td class="tg-031e" data-label="Action">
                                        <apex:commandLink action="{!RemoveVL}" onclick="if(!confirm('Are you sure?')){return};" reRender="visitBlk" status="as1">
                                            <apex:image url="{!$Resource.AP_Remove_Icon}" width="24" height="24" rendered="{!(visit.id == null ) && editonlytoday}" title="Remove Visit"/>
                                            <apex:param name="visitCount" value="{!visitCount}" />
                                        </apex:commandLink>
                                        <apex:commandLink action="{!EditVL}" reRender="visitBlk" status="as1">
                                            <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!(visit.RecordEdit__c) && editonlytoday}" title="Edit Visit"/>
                                            <apex:param name="visitCount" value="{!visitCount}" />
                                        </apex:commandLink>
                                        <apex:commandLink action="{!DeleteVL}" onclick="if(!confirm('Are you sure?')){return};" reRender="visitBlk" status="as1">
                                            <apex:image url="{!$Resource.deleteBtn}" width="20" height="20" title="Delete Visit" rendered="{!(visit.RecordEdit__c)  && editonlytoday}"/> <!--style="padding-left: 15px;"-->
                                            <apex:param name="visitCount" value="{!visitCount}" />
                                        </apex:commandLink>
                                        <apex:commandLink action="{!CancelVL}" reRender="visitBlk" status="as1">
                                            <apex:image url="{!$Resource.editBtn}" width="20" height="20" title="Cancel" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null}"/>
                                            <apex:param name="visitCount" value="{!visitCount}" />
                                        </apex:commandLink>
                                        <apex:commandLink action="{!SaveVL}" reRender="visitBlk" status="as1">
                                            <apex:image url="{!$Resource.correctIcon}" width="20" height="20" title="Save" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null }"/>
                                            <apex:param name="visitCount" value="{!visitCount}" />
                                        </apex:commandLink>
                                    </td>
                                    
                                    <td data-label="Sl.No">{!visitCount}</td>
                                    <td data-label="Party Type *" >
                                        <apex:inputField value="{!visit.Party_Type__c}"  onclick="party('{!$Component.partyTypeId}','{!$Component.BrandType}','{!$Component.BType}','{!$Component.MType}','{!$Component.Type}','{!$Component.Lang}')" styleClass="required slds-select" id="partyTypeId" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}">
                                            <apex:actionSupport event="onchange" reRender="visitBlk" onsubmit="sendPartyTypeName(this.value);">
                                            </apex:actionSupport>
                                        </apex:inputField>
                                        <p class="Error"></p>
                                        <apex:outputField value="{!visit.Party_Type__c}" rendered="{!visit.RecordEdit__c}"/>
                                    </td>
                                    <td data-label="Party Name *" class="multi_select " width="100px">
                                        <div class="slds-truncate" title="Party Name">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <div class=" ">
                                                    <span style="color:red"></span>
                                                    <div class=" tg-733k relative_pos lookup_style">
                                                        <apex:outputPanel layout="inline" style="vertical-align:middle " id="xx_account" rendered="{!NOT(visit.RecordEdit__c)}" >
                                                            <apex:inputText value="{!visit.Party_Name__c}" id="targetplumcol" styleClass="targetfieldPlumb{!j}" style="display:none" />
                                                            <input type="text" onkeypress="return false" size="20" name="targetfield" id="targetfieldPlumb{!j}" value="{!visit.Party_Name__r.name}" class="required slds-input" onclick="myfunctionblockfield()" ></input>
                                                        <p class="Error"></p>      
                                                        <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionVisitbranding(targetfieldPlumb{!j},{!j},'PlumbCol')"/> </a>
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="Error"></p>
                                        <apex:outputField value="{!visit.Party_Name__c}" rendered="{!visit.RecordEdit__c}"/> 
                                    </div>
                            </td>
                            <td data-label="Contact Name *" class="multi_select " width="100px">
                                <apex:inputField value="{!Target__c.Vertical__c}" style="display:none;" id="targetVertical"/>
                                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}">
                                    <div class="slds-truncate" title="Contact Name">
                                        <div class="{!j}I">
                                            <div class="{!j}B"></div>
                                            <div class=" ">
                                                <span style="color:red"></span>
                                                <div class=" tg-733k relative_pos lookup_style">
                                                    <apex:outputPanel layout="inline" style="vertical-align:middle " id="zz_account" rendered="{!NOT(visit.RecordEdit__c)}" >
                                                        <apex:inputText value="{!visit.Contact_Party_Type__c}" id="targetplumcolmm" styleClass="targetfieldPlumbcomp{!j}" style="display:none" />
                                                        <input type="text" onkeypress="return false" size="20" name="targetfieldcomp" id="targetfieldPlumbcomp{!j}" value="{!visit.Contact_Party_Type__c}" class="required slds-input" onclick="myfunctionblockfield()" ></input>
                                                    <p class="Error"></p>      
                                                    <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionCompany(targetfieldPlumbcomp{!j},{!j})"/> </a>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="Error"></p>
                                    <apex:outputField value="{!visit.Contact_Party_Type__c}" rendered="{!visit.RecordEdit__c}"/> 
                                </div>
                            </apex:outputPanel>
                    </td>
                    <td id="btnID">
                        <div class="slds-grid slds-wrap info_win_btn slds-p-vertical_small">
                            <div class="slds-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-large-size--1-of-1 "> 
                                <input type="file" id="file-input" accept="image/*"></input><br/>
                            <apex:commandButton value="Checkin & Upload" onclick="uploadFile(),checkin(this.id)"  styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only required" reRender="btnID"/>
                            <apex:inputHidden value="{!visit.Geo_Location__Latitude__s}" id="latId" />
                            <apex:inputHidden value="{!visit.Geo_Location__Longitude__s}" id="lonId" />
                            <apex:inputHidden value="{!visit.Geo_Address__c}" id="geoAddId" />
                        </div></div><p class="Error"></p></td>
            <td class="tg-031e" style="white-space:normal;">
                <apex:outputText value="{!visit.Geo_Address__c}" id="gAdd"></apex:outputText> 
            </td>
            <td>
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}"> <a href="#" id="visitAccountLink" onclick="MyfunctionVisitbrandingLink()">Map Dealer</a>
                </apex:outputPanel></td>
            <td data-label="Add Party">
                <apex:image id="theImage" title="Add New Party" styleClass="imgClass" value="{!$Resource.AddIcon}" width="24" height="24" onclick="openAccountPopup('{!$Component.partyTypeId}',{!visitCount}); return false;" style="cursor:pointer;" rendered="{!NOT(visit.RecordEdit__c)}"/>
                <apex:image styleClass="imgClass" value="{!$Resource.DisabledAddIcon}" width="20" height="20" rendered="{!(visit.RecordEdit__c)}" style="cursor:not-allowed"/>
            </td>
            <td class="tg-031e" data-label="Purpose of Visit *">
                
                <div class="slds-truncate" title="Purpose of Visit *">
                    <apex:inputField value="{!visit.Purpose_of_Visit__c}" styleClass="required slds-select" id="purposeOfVisit" style="width:100px; font-size:11px;" rendered="{!NOT(visit.RecordEdit__c)}"/>
                    <p class="Error"></p> 
                    <apex:outputField value="{!visit.Purpose_of_Visit__c}" rendered="{!visit.RecordEdit__c}"/>
                </div>
            </td>
            <td class="tg-031e" data-label="Visit type Actual">
                <apex:inputField value="{!visit.Visit_type_Actual__c}" id="visittypeId" style="width:100px" rendered="{!IF(NOT(visit.RecordEdit__c) && (Target__c.Vertical__c == 'Plumbing'),true,false)}" />
                <apex:inputField value="{!visit.Visit_type_Actual__c}" id="visittypeId1" style="width:100px" rendered="{!IF(NOT(visit.RecordEdit__c) && (Target__c.Vertical__c == 'Column'),true,false)}" />
                <!--  <p class="Error"></p> -->
                <apex:outputField value="{!visit.Visit_type_Actual__c}" rendered="{!(visit.RecordEdit__c)}" /> 
            </td>
            <td class="tg-031e" data-label="Products">
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}"><apex:outputPanel id="pro" rendered="{!NOT(visit.RecordEdit__c)}">
                    <select class="form-control multSel slds-input" id="visProList" multiple="true" size="3" style="width:150px;"
                            onblur="setProducts('visProList','{!$Component.visProducts}')">
                        <apex:repeat value="{!productList}" var="pro">
                            <Option value="{!pro}">{!pro}</Option>
                        </apex:repeat>
                    </select>
                    </apex:outputPanel>
                    <apex:inputHidden value="{!visit.Products__c}" id="visProducts" />
                    <apex:outputField value="{!visit.Products__c}" id="visProList" rendered="{!visit.RecordEdit__c}" />
                </apex:outputPanel></td>
            <td class="tg-031e" data-label="Order Value"><apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}">
                <apex:inputField value="{!visit.Order_Value__c}" id="visOrdVal" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="slds-input"/>
                <apex:outputField value="{!visit.Order_Value__c}" rendered="{!visit.RecordEdit__c}"/>
                </apex:outputPanel></td>
            <td class="tg-031e" data-label="MOM *">
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}">
                    <apex:inputField value="{!visit.Remarks__c}" id="remarksIdIndus" style="width:150px" rendered="{!NOT(visit.RecordEdit__c)}"/>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}">
                    <apex:inputField value="{!visit.Remarks__c}" id="remarksId" style="width:150px" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-input" />
                </apex:outputPanel>
                <p class="Error"></p>
                <apex:outputField value="{!visit.Remarks__c}" rendered="{!visit.RecordEdit__c}" />
            </td>
            <td class="tg-031e" data-label="Competitiors Information">
                <apex:inputField value="{!visit.Competitors_Information__c}" id="compiInfoId" style="width:150px" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="slds-input"/>
                <apex:outputField value="{!visit.Competitors_Information__c}" rendered="{!visit.RecordEdit__c}"/>
            </td>
            //financial support
            <td class="tg-031e" data-label="Financial Support Needed">
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Column' || Target__c.Vertical__c == 'Plumbing',true,false)}">
                    <apex:inputField value="{!visit.Financial_Support_Needed__c}" id="financialsupportId" style="width:100px" rendered="{!IF(NOT(visit.RecordEdit__c),true,false)}" />
                    <apex:outputField value="{!visit.Financial_Support_Needed__c}" rendered="{!(visit.RecordEdit__c)}" /> 
                </apex:outputPanel>
            </td>
            <!--Edited By Shaikh Ishaque-->
            <td class="tg-031e" data-label="Branding Request" >
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c != 'Industrial',true,false)}">
                    <apex:inputCheckbox id="BrandType" value="{!visit.Branding_Request__c}" onclick="checkBranding('{!$Component.partyTypeId}','{!$Component.targetplumcol}','{!$Component.BrandType}')" rendered="{!NOT(visit.RecordEdit__c)}" >
                        <apex:actionSupport event="onclick"  action="{!rerender}" reRender="reRender"/>
                    </apex:inputCheckbox>
                    <apex:outputField value="{!visit.Branding_Request__c}" rendered="{!visit.RecordEdit__c}"/>
                    <apex:pageBlock rendered="{!visit.RecordEdit__c}" id="reRender1">
                        <table id="thetable2">
                            <tr>
                                <td>BrandType</td>
                                <!-- <td>MediaType</td>-->
                                <td>Dealer Category</td>
                                <!-- <td>Language</td> -->
                            </tr>
                            <tr>
                                <td data-label="BrandType">
                                    <apex:outputField value="{!visit.BrandType__c}" rendered="{! bool }"/>
                                </td>
                                <td data-label="Dealer Category">
                                    <apex:outputField value="{!visit.Type__c}" rendered="{! bool }"/>
                                </td>
                            </tr>
                        </table>
                    </apex:pageBlock>
                    <apex:pageBlock id="reRender" rendered="{!NOT(visit.RecordEdit__c)}">
                        <table id="thetable">
                            <tr>
                                <td>BrandType</td>
                                <!--<td>MediaType</td>-->
                                <td>Dealer Category</td>
                                <!--<td>Language</td>-->
                            </tr>
                            <tr>
                                <td data-label="Brand type">
                                    <apex:inputField value="{!visit.BrandType__c}" rendered="{! bool }" />
                                </td >
                                <td data-label="Dealer Category">
                                    <apex:inputField value="{!visit.Type__c}" rendered="{! bool }" />
                                </td>
                            </tr>
                        </table>
                    </apex:pageBlock>
                </apex:outputPanel></td>
            <td id="btnID2">
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}">
                    <div class="slds-grid slds-wrap info_win_btn slds-p-vertical_small">
                        <div class="slds-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-large-size--1-of-1 ">
                            <apex:commandButton value="Check-Out" onclick="checkout(this.id)"  styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only required" reRender="btnID2"/>
                            <apex:inputHidden value="{!visit.CheckOut_location__Latitude__s}" id="latId2" />
                            <apex:inputHidden value="{!visit.CheckOut_location__Longitude__s}" id="lonId2" />
                            <apex:inputHidden value="{!visit.CheckOut_Address__c}" id="geoAddId2" />
                        </div></div><p class="Error"></p></apex:outputPanel></td>
            <td class="tg-031e" style="white-space:normal;">
                <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}">
                    <apex:outputText value="{!visit.CheckOut_Address__c}" id="gAdd2"></apex:outputText> 
                </apex:outputPanel></td>
        </tr>
        <apex:variable value="{!visitCount+1}" var="visitCount" />
        <apex:variable var="j" value="{!j+1}" />
    </apex:repeat>
</tbody>
</table>
<apex:actionFunction action="{!addSiteVisitIns}" name="siteVisitList" reRender="visitBlk" status="as1" />
</apex:outputPanel>
<apex:outputPanel rendered="{!visitList.size ==0}">
    <apex:actionFunction name="addColoums" action="{!addColoums}" reRender="visitBlk" status="as1" />
    <div class="slds-form-element slds-p-around_large">
        <label class="slds-form-element__label" for="text-input-id-1">Select Number of Visits :</label>
        <div class="slds-form-element__control">
            <apex:selectList styleClass="slds-select" onchange="jsNonProjectAdd();" multiselect="false" size="1" value="{!FileCount}" id="num">
                <apex:selectOption itemLabel="--None--" itemValue="" />
                <apex:selectOptions value="{!filesCountList}" />
            </apex:selectList>
        </div>
    </div>
</apex:outputPanel>
</apex:outputPanel>
<apex:outputPanel id="projectVisitBlk" rendered="{!NOT(isPlumbingColumn && readWriteMode) && NOT(isBranding)}">
    <apex:outputPanel rendered="{!projectList.size!=0}">
        <apex:image url="{!$Resource.AP_Add_Icon}" width="24" height="24" style="margin-top: 10px;"
                    onclick="projectVisitList();" rendered="{!readWriteMode && editonlytoday }" />
        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" >
            <thead>
                <tr>
                    <th class="tg-9agx">Action</th>
                    <th class="tg-9agx">Sl.No</th>
                    <th class="tg-9agx">Party Type <sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Party Name <sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Shop Photo</th>
                    <th class="tg-9agx">Geo Address</th>
                    <th class="tg-9agx">Update account</th>
                    <th class="tg-9agx">Add Party</th>
                    <th class="tg-9agx">Project Name</th>
                    <th class="tg-9agx">Purpose of Visit<sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Point Discussed<sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Action Plan</th>
                    <th class="tg-9agx">Action Date</th>
                </tr>
            </thead>
            <tbody>
                <apex:variable value="{!1}" var="projectCount" />
                <apex:repeat var="visit" value="{!projectList}">
                    <tr>
                        <td class="tg-031e" data-label="Action">
                            <apex:commandLink action="{!RemovePVL}" onclick="if(!confirm('Are you sure?')){return};" reRender="visitBlk" status="as1">
                                <apex:image url="{!$Resource.AP_Remove_Icon}" width="24" height="24" rendered="{!(visit.id == null )}" title="Remove Visit"/>
                                <apex:param name="projectCount" value="{!projectCount}" />
                            </apex:commandLink>
                            
                            <apex:commandLink action="{!EditPVL}" reRender="visitBlk" status="as1">
                                <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!(visit.RecordEdit__c) && editonlytoday}" title="Edit Visit"/>
                                <apex:param name="projectCount" value="{!projectCount}" />
                            </apex:commandLink>
                            <apex:commandLink action="{!DeletePVL}" onclick="if(!confirm('Are you sure?')){return};" reRender="visitBlk" status="as1">
                                <apex:image url="{!$Resource.deleteBtn}" rendered="{!(visit.RecordEdit__c) && editonlytoday}" width="20" height="20"/>
                                <apex:param name="projectCount" value="{!projectCount}" />
                            </apex:commandLink>
                            <apex:commandLink action="{!CancelPVL}" reRender="visitBlk" status="as1">
                                <apex:image url="{!$Resource.editBtn}" width="20" height="20" title="Cancel" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null}"/>
                                <apex:param name="projectCount" value="{!projectCount}" />
                            </apex:commandLink>
                            <apex:commandLink action="{!SavePVL}" reRender="visitBlk" status="as1">
                                <apex:image url="{!$Resource.correctIcon}" width="20" height="20" title="Save" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null }"/>
                                <apex:param name="projectCount" value="{!projectCount}" />
                            </apex:commandLink>
                        </td>
                        <td class="tg-031e" style="text-align: center" data-label="Sl No">{!projectCount}</td>   
                        <td class="tg-031e" data-label="Party Type">
                            <apex:inputField value="{!visit.Party_Type__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}"  id="partyProTypeId"
                                             styleClass="required slds-input"  >
                                <apex:actionSupport event="onchange" reRender="visitBlk" onsubmit="sendPartyTypeName(this.value);">
                                </apex:actionSupport>
                            </apex:inputField>
                            <p class="Error"></p>
                            <apex:outputField value="{!visit.Party_Type__c}" rendered="{!(visit.RecordEdit__c)}"/>
                        </td>
                        <td class="tg-031e" data-label="Party name">
                            <div class="slds-truncate lookup_style" title="Party Name">
                                <apex:inputText value="{!visit.Party_Name__c}" id="targetIdpro" styleClass="targetparty{!projectCount}" style="display:none" />
                                <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account" rendered="{!NOT(visit.RecordEdit__c)}" >
                                    <input type="text" onkeypress="return false" size="20" id="targetPartyName{!projectCount}" value="{!visit.Party_Name__r.Name}" class="slds-input required" onclick="myfunctionblockfield()" ></input>
                                <p class="Error"></p>
                                <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionVisit2(targetPartyName{!projectCount},{!projectCount})"/> </a>
                            </apex:outputPanel>
                            <p class="Error"></p>
                        </div>
                    <apex:outputField value="{!visit.Party_Name__c}" rendered="{!(visit.RecordEdit__c)}"/> 
                </td>
                <td id="btnID">
                    <div class="slds-grid slds-wrap info_win_btn slds-p-vertical_small">
                        <div class="slds-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-large-size--1-of-1 "> 
                            <input type="file" id="file-input" accept="image/*"></input><br/>
                        <apex:commandButton value="Checkin & Upload" onclick="uploadFileToPro(),checkin(this.id)"  styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" reRender="btnID" />
                        <apex:inputHidden value="{!visit.Geo_Location__Latitude__s}" id="latId" />
                        <apex:inputHidden value="{!visit.Geo_Location__Longitude__s}" id="lonId" />
                        <apex:inputHidden value="{!visit.Geo_Address__c}" id="geoAddId" />
                    </div></div></td>   
        <td class="tg-031e" data-label="Geo address" style="white-space:normal;">
            <apex:outputText value="{!visit.Geo_Address__c}" id="gAdd"></apex:outputText> 
        </td>
        <td class="tg-031e"> 
            <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}">   <a href="#" id="visitAccounprotLink" onclick="MyfunctionVisitProjectLink()">Map Dealer</a></apex:outputPanel>
        </td>
        <td class="tg-031e" data-label="Add New Party">
            <apex:image id="theProImage" title="Add New Party" styleClass="imgClass" value="{!$Resource.AddIcon}" width="24" height="24" onclick="openAccountPopup('{!$Component.partyProTypeId}',{!projectCount}); return false;" rendered="{!NOT(visit.RecordEdit__c)}" style="cursor:pointer;"/>
            <apex:image styleClass="imgClass" value="{!$Resource.DisabledAddIcon}" width="20" height="20" rendered="{!(visit.RecordEdit__c)}" style="cursor:not-allowed"/>
        </td>
        <td class="tg-031e" data-label="Project name">   <div class="slds-truncate" title="Project Name">
            <apex:inputText value="{!visit.Project_Name__c}" id="Projectnameid" styleClass="Projectname{!projectCount}" style="display:none" />
            <apex:outputPanel layout="inline" style="vertical-align:middle" id="projectaccount" rendered="{!NOT(visit.RecordEdit__c)}" >
                <div class="lookup_style">
                    <input type="text" size="20" id="targetProjectName{!projectCount}" value="{!visit.Project_Name__r.Name}" class="slds-input"  />
                    <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionProjectname(targetProjectName{!projectCount},{!projectCount})"/> </a>
                </div>
            </apex:outputPanel>
            <apex:outputField value="{!visit.Project_Name__c}" rendered="{!(visit.RecordEdit__c)}"/>
            </div>
        </td>
        <td class="tg-031e" data-label="Purspose of visit">
            <apex:inputField value="{!visit.Purpose_of_Visit__c}" id="purposeOfVisit" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-input" />
            <p id="custError" class="Error"></p>
            <apex:outputField value="{!visit.Purpose_of_Visit__c}" rendered="{!(visit.RecordEdit__c)}"/>
        </td>
        <td class="tg-031e" data-label="Point Discussed">
            <apex:inputField value="{!visit.Point_Discussed__c}" id="pointsId" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-textarea"/>
            <p class="Error"></p>
            <apex:outputField value="{!visit.Point_Discussed__c}" rendered="{!(visit.RecordEdit__c)}"/>
        </td>
        <td class="tg-031e" data-label="Action Plan">
            <apex:inputField value="{!visit.Action_Plan__c}" id="proActPlan" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="slds-input"/>
            <apex:outputField value="{!visit.Action_Plan__c}" rendered="{!(visit.RecordEdit__c)}"/>
        </td>
        <td class="tg-031e" data-label="Action date">
            <apex:inputField value="{!visit.Action_Date__c}" id="proActDate" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="slds-input" onfocus="blur();"/>
            <apex:outputField value="{!visit.Action_Date__c}" rendered="{!(visit.RecordEdit__c)}"/>
        </td>
    </tr>
    <apex:variable value="{!projectCount+1}" var="projectCount" />
</apex:repeat>
</tbody>
</table>
<apex:actionFunction action="{!addProjectVisitIns}" name="projectVisitList" reRender="visitBlk" status="as1" oncomplete="addDatePicker();"/>
</apex:outputPanel>
<apex:outputPanel rendered="{!projectList.size ==0}">
    <apex:actionFunction name="addProjects" action="{!addProjects}" reRender="visitBlk" status="as1" />
    <div class="slds-form-element slds-p-around_large">
        <label class="slds-form-element__label" for="text-input-id-1">Select Number of Visits :</label>
        <div class="slds-form-element__control">
            <apex:selectList styleClass="slds-select"  onchange="jsProjectAdd();" multiselect="false" size="1" value="{!FileCount}" >
                <apex:selectOption itemLabel="--None--" itemValue="" />
                <apex:selectOptions value="{!filesCountList}" />
            </apex:selectList>
        </div>
    </div>
</apex:outputPanel>
<script>
var modal2Visit2 = document.getElementById('myVisitModal2');
var elmVisit2;
var fldVisit2;
var accountVisitproId;
var spanVisit2 = document.getElementsByClassName("closeVisit2")[0];
function MyfunctionVisit2(elid, fldid) {
    var modal2Visit2 = document.getElementById('myVisitModal2');
    elmVisit2 = elid.id;  
    fldVisit2 = 'targetparty' + fldid;       
    modal2Visit2.style.display = "block";
}
spanVisit2.onclick = function() {
    modal2Visit2.style.display = "none";
}
window.onclick = function(event) {
    if (event.target == modal2Visit2) {
        modal2Visit2.style.display = "none";
    }
}
function myFunction6(acctId) {
    var nameElementId = 'acctName'+acctId;
    var val = document.getElementById(nameElementId).value;
    var aid = acctId;
    accountVisitproId=acctId;
    document.getElementById("pageID:frm:queryVisit2").value =  val; //fetch searched string
    document.getElementById(elmVisit2).value =  val;    //assign to party name by input field
    document.getElementsByClassName(fldVisit2)[0].value = aid;
    modal2Visit2.style.display = "none";
}
function MyfunctionVisitProjectLink() {
    var myWindow = window.open('/' + accountVisitproId, "", 'Popup','height=650,width=1050,left=100,top=100,resizable=no,scrollbars=no,toolbar=no,status=no');
}
var j$ = jQuery.noConflict();
j$(document).ready(function(){
    j$("#myInput").on("keyup", function() {
        var value = j$(this).val().toLowerCase();
        j$("#myTable tr").filter(function() {
            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
        });
    });
});
j$('#myVisitModal2').find('#myInput').focus();
function uploadFileToPro()
{
    var input = document.getElementById('file-input');
    var parentId = accountVisitproId;
    var filesToUpload = input.files;
    for(var i = 0, f; f = filesToUpload[i]; i++) //iterating the uploaded input files
    {
        var reader = new FileReader();
        // Keep a reference to the File in the FileReader so it can be accessed in callbacks
        reader.file = f; 
        reader.onerror = function(e) 
        {
            switch(e.target.error.code) 
            {
                case e.target.error.NOT_FOUND_ERR:
                    alert('File Not Found!');
                    break;
                case e.target.error.NOT_READABLE_ERR:
                    alert('File is not readable');
                    break;
                case e.target.error.ABORT_ERR:
                    break; // noop
                default:
                    alert('An error occurred reading this file.');
            };
        };     
        
        reader.onabort = function(e) 
        {attributes
        alert('File read cancelled');
        };
        reader.onload = function(e){
            var att = new sforce.SObject("Attachment");
            att.Name = this.file.name;
            att.ContentType = this.file.type;
            att.ParentId = parentId;
            att.Body = (new sforce.Base64Binary(e.target.result)).toString();
            sforce.connection.create([att],
                                     {
                                         onSuccess : function(result, source){
                                             if (result[0].getBoolean("success")){
                                                 alert("Photo is Uploaded");
                                             }
                                         }, 
                                         onFailure : function(error, source) 
                                         {
                                             alert("Upload Failed");
                                         }
                                     });
        };
        reader.readAsBinaryString(f);
    }
}
</script>
<script>
var modalMeeting = document.getElementById('myMeetingModal');
var elmMeeting;
var fldMeeting;
var spanMeeting = document.getElementsByClassName("closeMeeting")[0];
spanMeeting.onclick = function() {
    modalMeeting.style.display = "none";
}
window.onclick = function(event) {
    if (event.target == modalMeeting) {
        modalMeeting.style.display = "none";
    }
}
function myFunction5(val,aid) {
    document.getElementById("pageID:frm:queryMeeting").value =  val; //fetch searched string
    document.getElementById(elmMeeting).value =  val;    //assign to Project by input field
    document.getElementsByClassName(fldMeeting)[0].value = aid;
    modalMeeting.style.display = "none";
}
var j$ = jQuery.noConflict();
j$(document).ready(function(){
    j$("#myInput").on("keyup", function() {
        var value = j$(this).val().toLowerCase();
        j$("#myTable tr").filter(function() {
            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
        });
    });
});
j$('#myMeetingModal').find('#myInput').focus();
</script>
<script>
var elmVisitpro ;
var fldVisitpro;
var spanVisit2 = document.getElementsByClassName("closeProject")[0];
function MyfunctionProjectname(elid, fldid) {
    var modalVisitproject = document.getElementById('Projectnamemodal');
    elmVisitpro = elid.id;  
    fldVisitpro= 'Projectname' + fldid;       
    modalVisitproject.style.display = "block";
}
var spanVisit2=document.querySelector('.closeproject');
spanVisit2.onclick = function() {
    var modalVisitproject = document.getElementById('Projectnamemodal');
    modalVisitproject.style.display = "none";
}
window.onclick = function(event) {
    var modalVisitproject = document.getElementById('Projectnamemodal');
    if (event.target == modalVisitproject) {
        modalVisitproject.style.display = "none";
    }
}
function myFunctionProjectmodal(acctId) {
    var nameElementId = 'acctName'+acctId;
    var val = document.getElementById(nameElementId).value;
    var aid = acctId; 
    var modalVisitproject2 = document.getElementById('Projectnamemodal');
    document.getElementById("pageID:frm:Projectquery").value =  val; //fetch searched string
    document.getElementById(elmVisitpro).value =  val;    //assign to Project name input field
    document.getElementsByClassName(fldVisitpro)[0].value = aid;
    modalVisitproject2.style.display = "none";
}
var j$ = jQuery.noConflict();
j$(document).ready(function(){
    j$("#myInput").on("keyup", function() {
        var value = j$(this).val().toLowerCase();
        j$("#myTableProject tr").filter(function() {
            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
        });
    });
});
</script>
</apex:outputPanel>
<apex:outputPanel id="brandingVisitBlk" rendered="{!isBranding}">
    <apex:outputPanel rendered="{!brandingList.size !=0}">
        <apex:image url="{!$Resource.AP_Add_Icon}" width="24" height="24" style="margin-top: 10px;" onclick="brandingVisitList();" rendered="{!readWriteMode && editonlytoday}"/>
        <table class="tg slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" style=" width: 100%">
            <thead>
                <tr class="slds-text-title_caps">
                    <th class="tg-9agx">Action</th>
                    <th class="tg-9agx">Sl.No</th>
                    <th class="tg-9agx">Party Type <sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Party name<sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Shop Photo</th>
                    <th class="tg-9agx">Geo Address</th>
                    <th class="tg-9agx">Update Account</th>
                    <th class="tg-9agx">Add Party</th>
                    <th class="tg-9agx">Vendor Search</th>
                    <th class="tg-9agx">Purpose of Visit<sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Type of Branding<sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Remarks<sub class="astriskStyle"> * </sub></th>
                    <th class="tg-9agx">Working with Salesperson</th>
                    <th class="tg-9agx">Attachment</th>
                    <th class="tg-9agx">Branding Requests</th>
                </tr>
            </thead>
            <tbody>
                <apex:variable value="{!1}" var="brandingCount" />
                <apex:repeat var="visit" value="{!brandingList}">
                    <tr id="brand" class="slds-hint-
                                          
                                          
                                          ">
                        <td class="tg-031e" data-label="Action">
                            <div class="slds-truncate" title="Action">
                                <apex:commandLink action="{!RemoveBVL}" onclick="if(!confirm('Are you sure?')){return};" reRender="brandingVisitBlk" status="as1">
                                    <apex:image url="{!$Resource.AP_Remove_Icon}" width="24" height="24" rendered="{!(visit.id == null )}" title="Remove Visit"/>
                                    <apex:param name="brandingCount" value="{!brandingCount}" />
                                </apex:commandLink>
                                <apex:commandLink action="{!EditBVL}" reRender="brandingVisitBlk" status="as1">
                                    <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!(visit.RecordEdit__c) && editonlytoday}" title="Edit Visit"/>
                                    <apex:param name="brandingCount" value="{!brandingCount}" />
                                </apex:commandLink>
                                <apex:commandLink action="{!DeleteBVL}" onclick="if(!confirm('Are you sure?')){return};" reRender="brandingVisitBlk" status="as1">
                                    <apex:image url="{!$Resource.deleteBtn}" rendered="{!(visit.RecordEdit__c) && editonlytoday}" width="20" height="20"/>
                                    <apex:param name="brandingCount" value="{!brandingCount}" />
                                </apex:commandLink>
                                <apex:commandLink action="{!CancelBVL}" reRender="brandingVisitBlk" status="as1">
                                    <apex:image url="{!$Resource.editBtn}" width="20" height="20" title="Cancel" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null}"/>
                                    <apex:param name="brandingCount" value="{!brandingCount}" />
                                </apex:commandLink>
                                <apex:commandLink action="{!SaveBVL}" reRender="brandingVisitBlk" status="as1">
                                    <apex:image url="{!$Resource.correctIcon}" width="20" height="20" title="Save" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null }"/>
                                    <apex:param name="brandingCount" value="{!brandingCount}" />
                                </apex:commandLink>
                            </div>
                        </td>
                        <td class="tg-031e"  data-label="Sl No">
                            <div class="slds-truncate" title="Sl No">
                                {!brandingCount}
                            </div></td>
                        <td class="tg-031e" data-label="Party type">
                            <div class="slds-truncate" title="Party type">
                                <apex:inputField value="{!visit.Party_Type__c}"  rendered="{!NOT(visit.RecordEdit__c)}" id="partyProTypeId1" styleClass="required slds-input" onchange="checkForBranding(this.id,'{!$Component.targetIdbranding}','{!$Component.taskToId1}');" >
                                    <apex:actionSupport event="onchange" reRender="visitBlk" onsubmit="sendPartyTypeName(this.value);">
                                    </apex:actionSupport>
                                </apex:inputfield>
                                <p class="Error"></p>
                                <apex:outputField value="{!visit.Party_Type__c}" rendered="{!(visit.RecordEdit__c)}"/>
                            </div>
                        </td>
                        <td data-label="Party name" class="tg-031e">
                            <div class="slds-truncate" title="Party name">
                                <!--Custom_lookup_for_party_name__c-->
                                <apex:inputText value="{!visit.Party_Name__c}" rendered="{!NOT(visit.RecordEdit__c)}"   id="targetIdbranding" styleClass="targetfieldbranding{!brandingCount} " style="display:none" />                                                    
                                <apex:outputPanel layout="inline"  rendered="{!NOT(visit.RecordEdit__c)}">
                                    <div style="position:relative;">
                                        <input  type="text" onkeypress="return false" size="20" id="targetfieldbranding{!brandingCount}" value="{!visit.Party_Name__r.name}"  class="slds-input "  onclick="myfunctionblockfield()" ></input>
                                    <p class="Error"></p>
                                    <apex:actionSupport event="onchange" action="{!fillAttachment}" rerender="rend,errorMsg" status="prodStatus"/>
                                    <a href="#" id="myBtn" class="lk" style="position:absolute;top:5px;right:9px;"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionVisitbranding(targetfieldbranding{!brandingCount},{!brandingCount},'Branding')"/></a>
                                </div>
                            </apex:outputPanel>
                            <p class="Error"></p>
                            <apex:outputField value="{!visit.Party_Name__c}" rendered="{!(visit.RecordEdit__c)}" />
                        </div>
                </td>
                <td id="btnID">
                    <div class="slds-grid slds-wrap info_win_btn slds-p-vertical_small">
                        <div class="slds-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-large-size--1-of-1 "> 
                            <input type="file" id="file-input" accept="image/*" value="test"></input><br/>
                        <apex:commandButton value="Checkin & Upload" onclick="uploadFile(),checkin(this.id)"  styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" reRender="btnID"/>
                        <apex:inputHidden value="{!visit.Geo_Location__Latitude__s}" id="latId" />
                        <apex:inputHidden value="{!visit.Geo_Location__Longitude__s}" id="lonId" />
                        <apex:inputHidden value="{!visit.Geo_Address__c}" id="geoAddId" />
                    </div></div></td>
        <td class="tg-031e" data-label="Geo address" style="white-space:normal;">
            <div class="slds-truncate" title="Geo address">
                <apex:outputText value="{!visit.Geo_Address__c}" id="gAdd"></apex:outputText> 
            </div></td>
        
        <td class="tg-031e"  data-label="Update Account"> 
            <apex:outputPanel rendered="{!IF(Target__c.Vertical__c == 'Industrial',true,false)}"> <a href="#" id="visitAccountLink" onclick="MyfunctionVisitBrandingLink()">Map Dealer</a></apex:outputPanel>
        </td>
        <td class="tg-031e" data-label="Add new party">
            <div class="slds-truncate" title="Add new party">
                <apex:image id="theImage1" title="Add New Party" styleClass="imgClass" value="{!$Resource.AddIcon}" width="24" height="24" onclick="openAccountPopup('{!$Component.partyProTypeId1}',{!brandingCount}); return false;" style="cursor:pointer;" rendered="{!NOT(visit.RecordEdit__c)}"/>
                <apex:image styleClass="imgClass" value="{!$Resource.DisabledAddIcon}" width="20" height="20" rendered="{!(visit.RecordEdit__c)}" style="cursor:not-allowed"/>
            </div>
        </td>
        <td data-label="Vendor">
            <div class="slds-truncate" title="Vendor">
                <apex:inputText value="{!visit.Vendor__c}" rendered="{!NOT(visit.RecordEdit__c)}"   id="taskToId1" styleClass="taskToId1{!brandingCount}" style="display:none" />                                                    
                <apex:outputPanel layout="inline" style="vertical-align:middle" rendered="{!NOT(visit.RecordEdit__c)}">
                    <div class="lookup_style">
                        <input type="text" size="20" id="targetuserName{!brandingCount}" value="{!visit.Vendor__r.Name}" class="slds-input " />
                        <p class="Error"></p>
                        <a href="#" id="myBtn" class="lk" > <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="Myfunctionvendor(targetuserName{!brandingCount},{!brandingCount})"/></a>
                    </div>
                </apex:outputPanel>
                <p class="Error"></p>
                <apex:outputField value="{!visit.Vendor__c}" rendered="{!(visit.RecordEdit__c)}"/> 
            </div>
        </td>
        <td class="tg-031e" data-label="Purpose of visit">
            <div class="slds-truncate" title="Purpose of visit">
                <apex:inputField value="{!visit.Purpose_of_Visit__c}" id="purposeOfVisit" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="slds-input required"/>
                <p class="Error"></p>
                <apex:outputField value="{!visit.Purpose_of_Visit__c}" rendered="{!(visit.RecordEdit__c)}"/>
            </div>
        </td>
        <td class="tg-031e" data-label="Branding Type">
            <div class="slds-truncate" title="Branding Type">
                <apex:inputField value="{!visit.Branding_Type__c}" id="pointsId1" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-input"/>
                <p class="Error"></p>
                <apex:outputField value="{!visit.Branding_Type__c}" rendered="{!(visit.RecordEdit__c)}"/></div>
        </td>
        <td class="tg-031e" data-label="Remarks">
            <div class="slds-truncate" title="Remarks">
                <apex:inputField value="{!visit.Remarks__c}" id="proActPlan1" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-textarea"/>
                <p class="Error"></p>
                <apex:outputField value="{!visit.Remarks__c}" rendered="{!(visit.RecordEdit__c)}"/>
            </div>
        </td>
        <td data-label="Working with salesperson">
            <div class="slds-truncate" title="Working with salesperson">
                <apex:inputText value="{!visit.Worked_with_TL_User__c}" rendered="{!NOT(visit.RecordEdit__c)}"  id="TLuser" styleClass="TLuser{!brandingCount} " style="display:none" />                                                    
                <apex:outputPanel layout="inline" style="vertical-align:middle" rendered="{!NOT(visit.RecordEdit__c)}">
                    <div class="lookup_style">
                        <input type="text" size="20" id="targetTLuserName{!brandingCount}" value="{!visit.Worked_with_TL_User__r.Name}" class="slds-input" />
                        <a href="#" id="myBtn" class="lk" > <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionTLuser(targetTLuserName{!brandingCount},{!brandingCount})"/></a>
                    </div>
                </apex:outputPanel>
                <apex:outputField value="{!visit.Worked_with_TL_User__c}" rendered="{!(visit.RecordEdit__c)}"/>
            </div>
        </td>
        <td class="tg-031e" data-label="Party name">
            <div class="slds-truncate" title="Party Name">
                <apex:commandLink target="_blank" action="/{!visit.Party_Name__c}">
                    <apex:outputField id="rend" value="{!visit.Party_Name__c}">
                    </apex:outputField>
                </apex:commandLink>
            </div>
        </td>
        <td class="tg-031e" data-label="">
            <div class="slds-truncate" title="">
                <apex:inputcheckbox />
            </div>
        </td>
    </tr>
    <apex:variable value="{!brandingCount+1}" var="brandingCount" />
</apex:repeat>
</tbody>
</table>
<apex:actionFunction action="{!addbrandingVisitIns}" name="brandingVisitList" reRender="visitBlk" status="as1" oncomplete="addDatePicker();"/>
</apex:outputPanel>
<apex:outputPanel rendered="{!brandingList.size ==0}">
    <apex:actionFunction name="addbranding" action="{!addbranding}" reRender="visitBlk" status="as1" />
    <div class="slds-form-element slds-p-around_large">
        <label class="slds-form-element__label" for="text-input-id-1">Select Number of Visits :</label>
        <div class="slds-form-element__control">
            <apex:selectList styleClass="slds-select"  onchange="jsbrandingAdd();" multiselect="false" size="1" value="{!FileCount}">
                <apex:selectOption itemLabel="--None--" itemValue="" />
                <apex:selectOptions value="{!filesCountList}" />
            </apex:selectList>
        </div>
    </div>
</apex:outputPanel>
</apex:outputPanel>
</apex:outputPanel>
<apex:outputPanel rendered="{!NOT(readWriteMode)}">
    <apex:outputPanel rendered="{!(isPlumbingColumn ) && readMode}">
        <apex:outputPanel rendered="{!visitList.size == 0}">
            <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!(visitList.size != 0)}">
            <table class="tg" style=" width: 100%">
                <thead>
                    <tr>
                        <th class="tg-9agx">Sl.No  test</th>
                        <th class="tg-9agx">Party Type </th>
                        <th class="tg-9agx">Party Name </th>
                        <!--- <th class="tg-9agx">Taluk / Tehsil</th>--->
                        <th class="tg-9agx">Purpose of Visit </th>
                        <th class="tg-9agx">Products</th>
                        <th class="tg-9agx">Order Value</th>
                        <th class="tg-9agx">Remarks</th>
                        <th class="tg-9agx">Competitors Information</th>
                        <th class="tg-9agx">Branding Requests</th>
                    </tr>
                </thead>
                <tbody>
                    <apex:variable value="{!1}" var="visitCount" />
                    <apex:repeat var="visit" value="{!visitList}">
                        <tr>
                            <td class="tg-031e" style="text-align: center" data-label="Sl No">{!visitCount}</td>
                            <td class="tg-031e" data-label="Party_Type">
                                <apex:outputField value="{!visit.Party_Type__c}" />
                            </td>
                            <td class="tg-031e"  data-label="Party_Name">
                                <apex:outputField value="{!visit.Party_Name__c}" /> </td>
                            <td class="tg-031e"  data-label="Purpose_of_Visit">
                                <apex:outputField value="{!visit.Purpose_of_Visit__c}" />
                            </td>
                            <td class="tg-031e"  data-label="Products">
                                <apex:outputField value="{!visit.Products__c}" />
                            </td>
                            <td class="tg-031e"  data-label="Order_Value">
                                <apex:outputField value="{!visit.Order_Value__c}" />
                            </td>
                            <td class="tg-031e"  data-label="Remarks">
                                <apex:outputField value="{!visit.Remarks__c}" />
                            </td>
                            <td class="tg-031e"  data-label="Competitors_Information">
                                <apex:outputField value="{!visit.Competitors_Information__c}" />
                            </td>
                            <td/>
                            <td>
                                <apex:inputCheckbox value="{!brandingCheck}" />
                            </td>
                        </tr>
                        <apex:variable value="{!visitCount+1}" var="visitCount" />
                    </apex:repeat>
                </tbody>
            </table>
            
        </apex:outputPanel>
    </apex:outputPanel>
    
    <apex:outputPanel rendered="{!NOT(readWriteMode)}">
        <apex:outputPanel rendered="{!(isBranding) && readMode}">
            <apex:outputPanel rendered="{!brandingList.size == 0}">
                <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
            </apex:outputPanel>
            <apex:outputPanel rendered="{!brandingList.size != 0}">
                <table class="tg" style=" width: 100%">
                    <thead>
                        <tr>
                            <th class="tg-9agx">Sl.No</th>
                            <th class="tg-9agx">Party Type </th>
                            <th class="tg-9agx">Party Name </th>
                            <th class="tg-9agx">Vendor</th>
                            <th class="tg-9agx">Purpose of Visit </th>
                            <th class="tg-9agx">Branding Type</th>
                            <th class="tg-9agx">Worked with</th>
                            <th class="tg-9agx">Remarks</th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        <apex:variable value="{!1}" var="brandCount" />
                        <apex:repeat var="visit" value="{!brandingList}">
                            <tr>
                                <td class="tg-031e" data-label="Sl No" style="text-align: center">{!brandCount}</td>
                                <td class="tg-031e" data-label="Party type">
                                    <apex:outputField value="{!visit.Party_Type__c}" />
                                </td>
                                <td class="tg-031e" data-label="Party name">
                                    <apex:outputField value="{!visit.Party_Name__c}" /> </td>
                                <td class="tg-031e" data-label="Vendor">
                                    <apex:outputField value="{!visit.Vendor__c}" />
                                </td>
                                <td class="tg-031e" data-label="Purpose of visit">
                                    <apex:outputField value="{!visit.Purpose_of_Visit__c}" />
                                </td>
                                <td class="tg-031e" data-label="Branding type">
                                    <apex:outputField value="{!visit.Branding_Type__c}" />
                                </td>
                                <td class="tg-031e" data-label="Worked with TL">
                                    <apex:outputField value="{!visit.Worked_with_TL_User__c}" />
                                </td>
                                <td class="tg-031e" data-label="Remarks">
                                    <apex:outputField value="{!visit.Remarks__c}" />
                                </td>
                            </tr>
                            <apex:variable value="{!brandCount+1}" var="brandCount" />
                        </apex:repeat>
                    </tbody>
                </table>
                
            </apex:outputPanel>
        </apex:outputPanel></apex:outputPanel>
    
    <apex:outputPanel rendered="{!NOT(isPlumbingColumn && readMode)}">
        <apex:outputPanel rendered="{!projectList.size == 0}">
            <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!projectList.size != 0}">
            <table class="tg" style=" width: 100%">
                <thead>
                    <tr>
                        <th class="tg-9agx">Sl.No</th>
                        <th class="tg-9agx">Party Type </th>
                        <th class="tg-9agx">Party Name </th>
                        <th class="tg-9agx">Taluk / Tehsil</th>
                        <th class="tg-9agx">Project Name</th>
                        <th class="tg-9agx">Purpose of Visit</th>
                        <th class="tg-9agx">Point Discussed</th>
                        <th class="tg-9agx">Action Plan</th>
                        <th class="tg-9agx">Action Date</th>
                        <th class="tg-9agx">Task To</th>
                    </tr>
                </thead>
                <tbody>
                    <apex:variable value="{!1}" var="projectCount" />
                    <apex:repeat var="visit" value="{!projectList}">
                        <tr>
                            <td class="tg-031e" data-label="Sl no" style="text-align: center">{!projectCount}</td>
                            <td class="tg-031e" data-label="Party name">
                                <apex:outputField value="{!visit.Party_Type__c}" />
                            </td>
                            <td class="tg-031e" data-label="Party name">
                                <apex:outputField value="{!visit.Party_Name__c}" /> </td>
                            <td class="tg-031e" data-label="Project name">
                                <apex:outputField value="{!visit.Project_Name__c}" />
                            </td>
                            <td class="tg-031e" data-label="Point Discussed">
                                <apex:outputField value="{!visit.Purpose_of_Visit__c}" />
                            </td>
                            <td class="tg-031e" data-label="">
                                <apex:outputField value="{!visit.Point_Discussed__c}" />
                            </td>
                            <td class="tg-031e" data-label="Action Plan">
                                <apex:outputField value="{!visit.Action_Plan__c}" />
                            </td>
                            <td class="tg-031e" data-label="Action date">
                                <apex:outputField value="{!visit.Action_Date__c}" />
                            </td>
                            <td class="tg-031e" data-label="Task to">
                                <apex:outputField value="{!visit.Task_To__c}" />
                            </td>
                        </tr>
                        <apex:variable value="{!projectCount+1}" var="projectCount" />
                    </apex:repeat>
                </tbody>
            </table>
        </apex:outputPanel>
    </apex:outputPanel>
</apex:outputPanel>
</div>
</apex:outputPanel>
</div>
<!--End Of Visit-->
<script type="text/javascript">
var __sfdcSessionId = '{!GETSESSIONID()}'; 
</script>
<script src="/soap/ajax/35.0/connection.js" type="text/javascript"></script>
<script src="/soap/ajax/35.0/apex.js" type="text/javascript"></script>
<script>
// Get the modal for distributor field which fetches account
var modal2Visit = document.getElementById('myVisitModal');
var elmVisit;
var fldVisit;
var vtype;
var accountVisitId;
var nameElementId;

// Get the <span> element that closes the modal
var spanVisit = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
function MyfunctionVisitbranding(elid, fldid, vertype) {
    var modal2Visit = document.getElementById('myVisitModal');
    elmVisit= elid.id;  
    
    fldVisit= 'targetfieldPlumb' + fldid; 
    if(vertype =='Branding'){ 
        fldVisit= 'targetfieldbranding' + fldid; 
    }
    modal2Visit.style.display = "block";
    
}



// When the user clicks on <span> (x), close the modal
var modal2Visit = document.getElementById('myVisitModal');
var spanVisit = document.getElementsByClassName("close")[0];

function closefunc() {
    modal2Visit.style.display = "none";
    
    
}
var modal2Visit = document.getElementById('myVisitModal');
function myFunction2forplumbing(acctId) { 
    
    nameElementId = 'acctName'+acctId;
    var val = document.getElementById(nameElementId).value;
    var aid = acctId;
    
    
    accountVisitId= acctId;
    var modalVisit = document.getElementById('myVisitModal');
    
    
    document.getElementById("pageID:frm:queryVisit").value =  val; //fetch searched string
    // alert(document.getElementById("pageID:frm:queryVisit").value);
    document.getElementById(elmVisit).value =  val;    //assign to Project by input field
    
    // alert(document.getElementById(elmVisit).value);
    document.getElementsByClassName(fldVisit)[0].value = aid;
    //   alert( document.getElementsByClassName(fldVisit)[0].value);
    
    modalVisit.style.display = "none";
}  

// method to call Account standard page
function MyfunctionVisitbrandingLink() {
    var myWindow = window.open('/' + accountVisitId, "", 'Popup','height=650,width=1050,left=100,top=100,resizable=no,scrollbars=no,toolbar=no,status=no');
}


function uploadFile(){
    var input = document.getElementById('file-input');
    var parentId = accountVisitId;
    var filesToUpload = input.files;
    for(var i = 0, f; f = filesToUpload[i]; i++) //iterating the uploaded input files
    {
        var reader = new FileReader();
        // Keep a reference to the File in the FileReader so it can be accessed in callbacks
        reader.file = f;
        reader.onerror = function(e) 
        {
            switch(e.target.error.code) 
            {
                case e.target.error.NOT_FOUND_ERR:
                    alert('File Not Found!');
                    break;
                case e.target.error.NOT_READABLE_ERR:
                    alert('File is not readable');
                    break;
                case e.target.error.ABORT_ERR:
                    break; // noop
                default:
                    alert('An error occurred reading this file.');
            };
        };     
        
        reader.onabort = function(e) 
        {attributes
        alert('File read cancelled');
        };
        
        reader.onload = function(e) 
        {
            var att = new sforce.SObject("Attachment");
            att.Name = this.file.name;
            att.ContentType = this.file.type;
            att.ParentId = parentId;
            att.Body = (new sforce.Base64Binary(e.target.result)).toString();
            sforce.connection.create([att],
                                     {
                                         onSuccess : function(result, source) 
                                         {
                                             if (result[0].getBoolean("success")) 
                                             {
                                                 alert("Photo is Uploaded");
                                             }
                                         }, 
                                         onFailure : function(error, source) 
                                         {
                                             alert("Upload Failed");
                                         }
                                     });
        };
        
        reader.readAsBinaryString(f);
    }
}
//Added By Chakresh for Dealer Visis
function uploadFileForDealerVisit(accId){
    var input = document.getElementById('file-input');
    var parentId = accId;
    var filesToUpload = input.files;
    for(var i = 0, f; f = filesToUpload[i]; i++) //iterating the uploaded input files
    {
        var reader = new FileReader(); 
        reader.file = f;
        reader.onerror = function(e) 
        {
            switch(e.target.error.code) 
            {
                case e.target.error.NOT_FOUND_ERR:
                    alert('File Not Found!');
                    break;
                case e.target.error.NOT_READABLE_ERR:
                    alert('File is not readable');
                    break;
                case e.target.error.ABORT_ERR:
                    break; // noop
                default:
                    alert('An error occurred reading this file.');
            };
        };     
        
        reader.onabort = function(e) 
        {attributes
        alert('File read cancelled');
        };
        
        reader.onload = function(e) 
        {
            var att = new sforce.SObject("Attachment");
            att.Name = this.file.name;
            att.ContentType = this.file.type;
            att.ParentId = parentId;
            att.Body = (new sforce.Base64Binary(e.target.result)).toString();
            sforce.connection.create([att],
                                     {
                                         onSuccess : function(result, source) 
                                         {
                                             if (result[0].getBoolean("success")) 
                                             {
                                                 alert("Photo is Uploaded");
                                             }
                                         }, 
                                         onFailure : function(error, source) 
                                         {
                                             alert("Upload Failed");
                                         }
                                     });
        };
        
        reader.readAsBinaryString(f);
    }
}


var j$ = jQuery.noConflict();
j$(document).ready(function(){
    j$("#myInput").on("keyup", function() {
        var value = j$(this).val().toLowerCase();
        j$("#myTable tr").filter(function() {
            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
        });
    });
});

j$('#myVisitModal').find('#myInput').focus();
</script> 
<script>
// Get the modal for party name field which fetches account

var elmVisit;
var fldVisit ;


// Get the <span> element that closes the modal
var spanVisit = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
function MyfunctionVisit(elid, fldid) {                    
    //alert('--elid--'+elid.id + '--'+fldid);
    var modal2Visit = document.getElementById('myVisitModal');
    elmVisit= elid.id;  
    fldVisit= 'targetfield' + fldid;                   
    modal2Visit.style.display = "block";
}

// When the user clicks on <span> (x), close the modal

spanVisit.onclick = function() {
    var modal2Visit = document.getElementById('myVisitModal');
    modal2Visit.style.display = "none";
}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modalVisit) {
        modal2Visit.style.display = "none";
    }
}
<!-- function myFunction2forplumbing(acctId) { 
    //alert("testing................");
    var nameElementId = 'acctName'+acctId;
    var val = document.getElementById(nameElementId).value;
    var aid = acctId;
    var modalVisit = document.getElementById('myVisitModal');
    var verticaltype;
    document.getElementById("pageID:frm:queryVisit").value =  val; //fetch searched string
    document.getElementById(elmVisit).value =  val;    //assign to Project by input field
    document.getElementsByClassName(fldVisit)[0].value = aid;
    // j$.("[id$=fldVisit]").val(aid);
    modalVisit.style.display = "none";
}
var j$ = jQuery.noConflict();
j$(document).ready(function(){
    j$("#myInput").on("keyup", function() {
        var value = j$(this).val().toLowerCase();
        j$("#myTable tr").filter(function() {
            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
        });
    });
});
j$('#myVisitModal').find('#myInput').focus();-->
    </script> 
<!------------------paste here--------------------->
<!------------------company name here--------------------->
<script>
// Get the modal for project by field which fetches account
var modal = document.getElementById('myVisitModalcompany');
var elm;
var fld;
// Get the <span> element that closes the modal
var span = document.getElementsByClassName("closeprojbyEditId")[0];
// When the user clicks the button, open the modal 
function MyfunctionCompany(elid, fldid) {                    
    //  alert('--elid--'+elid.id + '--'+fldid);
    var modal2 = document.getElementById('myVisitModalcompany');
    elm = elid.id;  
    fld = 'targetfieldPlumbcomp' + fldid;              
    modal2.style.display = "block";
}
// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
function myFunctioncomp(acctId) { 
    var nameElementId = 'acctName'+acctId;
    var val = document.getElementById(nameElementId).value;
    var aid = acctId;
    document.getElementById("pageID:frm:queryCompany").value =  val;
    document.getElementById(elm).value =  val;
    document.getElementsByClassName(fld)[0].value = aid;
    modal.style.display = "none";
}
var j$ = jQuery.noConflict();
j$(document).ready(function(){
    j$("#myInput").on("keyup", function() {
        var value = j$(this).val().toLowerCase();
        j$("#myTable tr").filter(function() {
            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
        });
    });
});
j$('#myVisitModalcompany').find('#myInput').focus();
</script>
<!--company name ends..-->
<h3>Other Activities</h3>
<div>
    <div id="accordion2">
        <h4>Holiday/ Market Closed -
            <div class="eventDateDiv" style="display:initial;"></div>
        </h4>
        <div class="accordion-content">
            <apex:outputPanel id="holidayBlk">
                <apex:outputPanel rendered="{!readWriteMode}">
                    <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" >
                        <thead>
                            <tr>
                                <th class="tg-9agx"></th>
                                <th class="tg-9agx" data-label="Holiday/ Market Closed"><label class="slds-form-element__label">Remarks <sub class="astriskStyle"> * </sub></label></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="tg-031e" data-label="Action">
                                    <apex:commandLink action="{!EditHI}" reRender="holidayBlk" status="as1">
                                        <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!(holidayVisit.RecordEdit__c)  && editonlytoday}" title="Edit Holiday"/>
                                    </apex:commandLink>
                                    <apex:commandLink action="{!DeleteHI}" onclick="if(!confirm('Are you sure?')){return};" reRender="holidayBlk" status="as1">
                                        <apex:image url="{!$Resource.deleteBtn}" rendered="{!(holidayVisit.RecordEdit__c)  && editonlytoday}" width="20" height="20" title="Clear Remarks"/>
                                    </apex:commandLink>
                                    <apex:commandLink action="{!CancelHI}" reRender="holidayBlk" status="as1">
                                        <apex:image url="{!$Resource.editBtn}" width="20" height="20" title="Cancel" rendered="{!readWriteMode && NOT(holidayVisit.RecordEdit__c) && holidayVisit.id != null}"/>
                                    </apex:commandLink>
                                    <apex:commandLink action="{!SaveHI}" reRender="holidayBlk" status="as1">
                                        <apex:image url="{!$Resource.correctIcon}" width="20" height="20" rendered="{!readWriteMode && NOT(holidayVisit.RecordEdit__c) && holidayVisit.id != null }" title="Save Holiday"/>
                                    </apex:commandLink>
                                </td>
                                <td class="tg-031e" data-label="Remarks *">
                                    <apex:inputField value="{!holidayVisit.Remarks__c}" style="width:75%;" styleClass="slds-textarea" rendered="{!NOT(holidayVisit.RecordEdit__c)}" id="holidayRemarksId" />
                                    <apex:outputField value="{!holidayVisit.Remarks__c}" rendered="{!(holidayVisit.RecordEdit__c)}"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!NOT(readWriteMode)}">
                    <apex:outputPanel rendered="{!holidayVisit.id != null}">
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" >
                            <thead>
                                <tr>
                                    <th class="tg-9agx" data-label="Remarks">Remarks</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tg-031e" data-label="Remarks">
                                        <apex:outputField value="{!holidayVisit.Remarks__c}" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!holidayVisit.id == null}">
                        <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
                    </apex:outputPanel>
                </apex:outputPanel>
            </apex:outputPanel>
        </div>
        <h4>Leave -
            <div class="eventDateDiv" style="display:initial;"></div>
        </h4>
        <div>
            <apex:outputPanel id="leaveBlk">
                <apex:outputPanel rendered="{!readWriteMode}">
                    <table class=" slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                        <thead>
                            <tr>
                                <th class="tg-9agx"></th>
                                <th class="tg-9agx" data-label="Reason for Leave">Reason for Leave<sub class="astriskStyle"> * </sub></th>
                                <th class="tg-9agx">Compensatory <br/>Leave</th>
                                <th class="tg-9agx" style="display:none" id="comLeaveDateTh">Compensatory Leave Date</th>
                                <th class="tg-9agx" style="display:{!IF(leaveVisit.Compensatory_Leave__c == 'Yes' && leaveVisit.RecordEdit__c, 'block', 'none')};height: 35px;">Compensatory Leave Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="tg-031e" data-label="Action" >
                                    <apex:commandLink action="{!EditLI}" reRender="leaveBlk" status="as1">
                                        <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!(leaveVisit.RecordEdit__c)}" title="Edit Holiday"/>
                                    </apex:commandLink>
                                    <apex:commandLink action="{!DeleteLI}" onclick="if(!confirm('Are you sure?')){return};" reRender="leaveBlk" status="as1">
                                        <apex:image url="{!$Resource.deleteBtn}" rendered="{!(leaveVisit.RecordEdit__c)}" width="20" height="20" title="Clear Remarks"/>
                                    </apex:commandLink>
                                    <apex:commandLink action="{!CancelLI}" reRender="leaveBlk" status="as1">
                                        <apex:image url="{!$Resource.editBtn}" width="20" height="20" title="Cancel" rendered="{!readWriteMode && NOT(leaveVisit.RecordEdit__c) && leaveVisit.id != null}"/>
                                    </apex:commandLink>
                                    <apex:commandLink action="{!SaveLI}" reRender="leaveBlk" status="as1">
                                        <apex:image url="{!$Resource.correctIcon}" width="20" height="20" rendered="{!readWriteMode && NOT(leaveVisit.RecordEdit__c) && leaveVisit.id != null }" title="Save Holiday"/>
                                    </apex:commandLink>
                                </td>
                                <td class="tg-031e" data-label="Reason for Leave *">
                                    <apex:inputField value="{!leaveVisit.Leave_Reason__c}" style="width:300px;height:40px;" id="leaveReasonId" styleClass="slds-textarea" rendered="{!NOT(leaveVisit.RecordEdit__c)}"/>
                                    <apex:outputField value="{!leaveVisit.Leave_Reason__c}" rendered="{!(leaveVisit.RecordEdit__c)}"/>
                                </td>
                                <td class="tg-031e" data-label="Compensatory Leave">
                                    <apex:inputField id="comLeaveId" styleClass="slds-input slds-combobox__input" value="{!leaveVisit.Compensatory_Leave__c}" style="width:100px" rendered="{!NOT(leaveVisit.RecordEdit__c)}" onChange="showHideDate(this.id)"/>
                                    <apex:outputField value="{!leaveVisit.Compensatory_Leave__c}" rendered="{!(leaveVisit.RecordEdit__c)}"/>
                                </td>
                                <td class="tg-031e" style="display:none" id="comleaveData" data-label="Compensatory leave date">
                                    <apex:inputField value="{!leaveVisit.Compensatory_Leave_Date__c}" id="comLeaveHidden" rendered="{!NOT(leaveVisit.RecordEdit__c)}"/>
                                </td>
                                <td class="tg-031e" data-label="Compensatory leave date" style="display:{!IF(leaveVisit.Compensatory_Leave__c == 'Yes' && leaveVisit.RecordEdit__c, 'block', 'none')};  height:50px;">
                                    <!--  <apex:inputField value="{!leaveVisit.Compensatory_Leave_Date__c}" rendered="{!NOT(leaveVisit.RecordEdit__c)}" /> -->
                                    <apex:outputField value="{!leaveVisit.Compensatory_Leave_Date__c}" rendered="{!(leaveVisit.RecordEdit__c)}"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!NOT(readWriteMode)}">
                    <apex:outputPanel rendered="{!leaveVisit.id != null}">
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                            <thead>
                                <tr>
                                    <th class="tg-9agx">Reason for Leave</th>
                                    <th class="tg-9agx">Compensatory <br/>Leave</th>
                                    <th class="tg-9agx" style="display:{!IF(leaveVisit.Compensatory_Leave__c == 'Yes', 'block', 'none')};height: 35px;">Compensatory Leave Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tg-031e" data-label="Leave Reason">
                                        <apex:outputField value="{!leaveVisit.Leave_Reason__c}" />
                                    </td>
                                    <td class="tg-031e" data-label="Compensatory leave">
                                        <apex:outputField value="{!leaveVisit.Compensatory_Leave__c}" />
                                    </td>
                                    <td class="tg-031e" style="display:{!IF(leaveVisit.Compensatory_Leave__c == 'Yes', 'block', 'none')}">
                                        <apex:outputField value="{!leaveVisit.Compensatory_Leave_Date__c}" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!leaveVisit.id == null}">
                        <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
                    </apex:outputPanel>
                </apex:outputPanel>
            </apex:outputPanel>
        </div>
        <h4>Meeting</h4>
        <div>
            <apex:outputPanel id="meetingBlk">
                <apex:outputPanel rendered="{!(readWriteMode)}">
                    <apex:outputPanel rendered="{!meetingVisitList.size !=0}">
                        <apex:variable var="j" value="{!1}" />
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                            <thead>
                                <tr class="slds-text-title_caps">
                                    <th scope="col" class="tg-9agx">Action</th>
                                    <th scope="col" class="tg-9agx">Sl.No</th>
                                    <th scope="col" class="tg-9agx">Check In<sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">Geo Address</th>
                                    <th scope="col" class="tg-9agx">Meeting Type <sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">State <sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">District <sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">Location <sub class="astriskStyle"> * </sub></th>
                                    <!--     <th class="tg-9agx">Taluka / Tehsil <sub class="astriskStyle">  </sub></th> -->
                                    <th scope="col" class="tg-9agx">MOM <sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">Working with<sub class="astriskStyle"> * </sub>(select yourself if working alone)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:variable value="{!1}" var="meetCount" />
                                <apex:repeat var="visit" value="{!meetingVisitList}">
                                    <tr>
                                        <td class="tg-031e" data-label="Action">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:commandLink action="{!RemoveML}" onclick="if(!confirm('Are you sure?')){return};" reRender="meetingBlk" status="as1">
                                                    <apex:image url="{!$Resource.AP_Remove_Icon}" width="24" height="24" rendered="{!(visit.id == null )}" title="Remove Visit"/>
                                                    <apex:param name="meetCount" value="{!meetCount}" />
                                                </apex:commandLink>
                                                <apex:commandLink action="{!EditML}" reRender="meetingBlk" status="as1">
                                                    <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!(visit.RecordEdit__c)  && editonlytoday}" title="Edit Visit"/>
                                                    <apex:param name="meetCount" value="{!meetCount}" />
                                                </apex:commandLink>
                                                <apex:commandLink action="{!DeleteML}" onclick="if(!confirm('Are you sure?')){return};" reRender="meetingBlk" status="as1">
                                                    <apex:image url="{!$Resource.deleteBtn}" width="20" height="20" title="Delete Meeting" rendered="{!(visit.RecordEdit__c)  && editonlytoday}"/>
                                                    <apex:param name="meetCount" value="{!meetCount}" />
                                                </apex:commandLink>
                                                <apex:commandLink action="{!CancelML}" reRender="meetingBlk" status="as1">
                                                    <apex:image url="{!$Resource.editBtn}" width="20" height="20" title="Cancel" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null}"/>
                                                    <apex:param name="meetCount" value="{!meetCount}" />
                                                </apex:commandLink>
                                                <apex:commandLink action="{!SaveML}" reRender="meetingBlk" status="as1">
                                                    <apex:image url="{!$Resource.correctIcon}" width="20" height="20" title="Save" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null }"/>
                                                    <apex:param name="meetCount" value="{!meetCount}" />
                                                </apex:commandLink>
                                            </div>
                                        </td>
                                        <td class="tg-031e" style="text-align: center" data-label="SL.NO">{!meetCount}</td>
                                        <td class="tg-031e" data-label="CHECK IN *">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:commandButton reRender="btnID" value="Check In" onclick="checkin(this.id);" styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"/>
                                                <apex:inputHidden value="{!visit.Geo_Location__Latitude__s}" id="latId" />
                                                <apex:inputHidden value="{!visit.Geo_Location__Longitude__s}" id="lonId" />
                                                <apex:inputHidden value="{!visit.Geo_Address__c}" id="geoAddId" />
                                            </div>
                                        </td>
                                        <td class="tg-031e" data-label="Geo address" style="white-space:normal;">
                                            <apex:outputText value="{!visit.Geo_Address__c}" id="gAdd"></apex:outputText> 
                                        </td>
                                        <td class="tg-031e" data-label="MEETING TYPE *">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!visit.Meeting_Type__c}"  style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-input slds-combobox__input"/>
                                                <p class="Error"></p>
                                                <apex:outputField value="{!visit.Meeting_Type__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                            </div>
                                        </td>
                                        <td class="tg-031e" data-label="STATE *">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!visit.State__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}"
                                                                 styleClass="required slds-input slds-combobox__input"
                                                                 />
                                                <p class="Error"></p>
                                                <apex:outputField value="{!visit.State__c}" rendered="{!(visit.RecordEdit__c)}" />
                                            </div>
                                        </td>
                                        <td class="tg-031e inp_fd" data-label="DISTRICT *">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!visit.Districts__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-select slds-combobox__input" id="one"/>
                                                <p class="Error"></p>
                                                <apex:outputField value="{!visit.Districts__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                            </div>
                                        </td>
                                        <td class="tg-031e" data-label="LOCATION *">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!visit.Location__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-input"/>
                                                <p class="Error"></p>
                                                <apex:outputField value="{!visit.Location__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                            </div>
                                        </td>
                                        <td class="tg-031e" data-label="MOM *">
                                            <div class="{!j}I">
                                                <div class="{!j}B"></div>
                                                <apex:inputField value="{!visit.MOM__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required slds-input"/>
                                                <p class="Error"></p>
                                                <apex:outputField value="{!visit.MOM__c}" rendered="{!(visit.RecordEdit__c)}" />
                                            </div> 
                                        </td>
                                        <td class="tg-031e " data-label="WORKING WITH *">
                                            <div class="slds-truncate" title="WORKING WITH * (SELECT YOURSELF IF WORKING ALONE)">
                                                <div class="{!j}I">
                                                    <div class="{!j}B"></div>
                                                    <div class=" ">
                                                        <span style="color:red"></span>
                                                        <div class="tg-733k relative_pos lookup_style">
                                                            
                                                            <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account" rendered="{!NOT(visit.RecordEdit__c)}">
                                                                <apex:inputText value="{!visit.TL__c}" id="targetId" styleClass="targetfielduser{!j}" style="display:none"/>
                                                                <input type="text" size="20"  value="{!visit.TL__r.Name}" id="targetMeetingName{!j}" class="slds-input" />
                                                                <p class="Error"></p>
                                                                <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionMeeting(targetMeetingName{!j},{!j})"/> </a>
                                                                
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <apex:outputField value="{!visit.TL__c}" rendered="{!(visit.RecordEdit__c)}" />
                                            </div>
                                        </td>
                                    </tr>
                                    <apex:variable var="j" value="{!j+1}" />
                                    <apex:variable value="{!meetCount+1}" var="meetCount" />
                                </apex:repeat>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                    <apex:actionFunction action="{!meetingVisit}" name="meetingVisit" reRender="meetingBlk" status="as1" />
                    <apex:image url="{!$Resource.AP_Add_Icon}" width="24" height="24" style="margin-top: 10px;"
                                onclick="meetingVisit();" title="Add Meeting"  rendered="{!editonlytoday}"/>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!NOT(readWriteMode)}">
                    <apex:outputPanel rendered="{!meetingVisitList.size == 0}">
                        <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!meetingVisitList.size !=0}">
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                            <thead >
                                <tr class="slds-text-title_caps">
                                    <th scope="col" class="tg-9agx">Sl.No</th>
                                    <th scope="col" class="tg-9agx">Meeting Type</th>
                                    <th scope="col" class="tg-9agx">State</th>
                                    <th scope="col" class="tg-9agx">District</th>
                                    <th scope="col" class="tg-9agx">Location</th>
                                    <th scope="col" class="tg-9agx">MOM</th>
                                    <th scope="col" class="tg-9agx">Working with</th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:variable value="{!1}" var="meetCount" />
                                <apex:repeat var="visit" value="{!meetingVisitList}">
                                    <tr>
                                        <td class="tg-031e" style="text-align: center" data-label="Sl no">{!meetCount}</td>
                                        <td class="tg-031e" data-label="Action">
                                            <apex:outputField value="{!visit.Meeting_Type__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="State">
                                            <apex:outputField value="{!visit.State__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="District">
                                            <apex:outputField value="{!visit.Districts__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="Location">
                                            <apex:outputField value="{!visit.Location__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="MOM">
                                            <apex:outputField value="{!visit.MOM__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="TL">
                                            <apex:outputField value="{!visit.TL__c}" />
                                        </td>
                                    </tr>
                                    <apex:variable value="{!meetCount+1}" var="meetCount" />
                                </apex:repeat>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                </apex:outputPanel>
                <script type="text/javascript" src="lib.js">
                function myfunctionblockfield() {
                    alert("Do not type in the field.Select party name from the search button");
                }
                </script>
                <!-- ----------------------- Script For Meeting Lookup ------------------ -->
                <script>
                // Get the modal for project by field which fetches account
                var modalMeeting = document.getElementById('myMeetingModal');
                var elmMeeting;
                var fldMeeting;
                var utype;
                // Get the <span> element that closes the modal
                var spanMeeting = document.getElementsByClassName("closeMeeting")[0];
                // When the user clicks the button, open the modal 
                function MyfunctionMeeting(elid, fldid) {
                    var modal2Meeting = document.getElementById('myMeetingModal');
                    elmMeeting = elid.id;  
                    fldMeeting = 'targetfielduser' + fldid;         
                    modal2Meeting.style.display = "block";
                }
                // When the user clicks on <span> (x), close the modal
                spanMeeting.onclick = function() {
                    modalMeeting.style.display = "none";
                }
                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modalMeeting) {
                        modalMeeting.style.display = "none";
                    }
                }
                function myFunction5(val,aid) { 
                    //var x = event.target;
                    document.getElementById("pageID:frm:queryMeeting").value =  val; //fetch searched string
                    document.getElementById(elmMeeting).value =  val;    //assign to Project by input field
                    document.getElementsByClassName(fldMeeting)[0].value = aid;
                    modalMeeting.style.display = "none";
                }
                var j$ = jQuery.noConflict();
                j$(document).ready(function(){
                    j$("#myInput").on("keyup", function() {
                        var value = j$(this).val().toLowerCase();
                        j$("#myTable tr").filter(function() {
                            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                        });
                    });
                });
                j$('#myMeetingModal').find('#myInput').focus();
                </script>
                <script>
                // Get the modal for project by field which fetches account
                var modalMeeting = document.getElementById('myMeetingModal');
                var elmMeeting;
                var fldMeeting;
                // Get the <span> element that closes the modal
                var spanMeeting = document.getElementsByClassName("closeMeeting")[0];
                
                // When the user clicks the button, open the modal 
                function Myfunctionvendor(elid, fldid) {                    
                    
                    var modal2Meeting = document.getElementById('myMeetingModal');
                    elmMeeting = elid.id;  
                    fldMeeting = 'taskToId1' + fldid;         
                    modal2Meeting.style.display = "block";
                }
                // When the user clicks on <span> (x), close the modal
                spanMeeting.onclick = function() {
                    modalMeeting.style.display = "none";
                }
                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modalMeeting) {
                        modalMeeting.style.display = "none";
                    }
                }
                function myFunction5(val,aid) {
                    document.getElementById("pageID:frm:queryMeeting").value =  val; //fetch searched string
                    document.getElementById(elmMeeting).value =  val;    //assign to Project by input field
                    document.getElementsByClassName("fldMeeting")[0].value = aid;
                    modalMeeting.style.display = "none";
                }
                var j$ = jQuery.noConflict();
                j$(document).ready(function(){
                    j$("#myInput").on("keyup", function() {
                        var value = j$(this).val().toLowerCase();
                        j$("#myTable tr").filter(function() {
                            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                        });
                    });
                });
                j$('#myMeetingModal').find('#myInput').focus();
                </script>
                <script>
                // Get the modal for project by field which fetches account
                var modalMeeting = document.getElementById('myMeetingModal');
                var elmMeeting;
                var fldMeeting;
                // Get the <span> element that closes the modal
                var spanMeeting = document.getElementsByClassName("closeMeeting")[0];
                // When the user clicks the button, open the modal 
                function MyfunctionTLuser(elid, fldid) {
                    var modal2Meeting = document.getElementById('myMeetingModal');
                    elmMeeting = elid.id;  
                    fldMeeting = 'TLuser' + fldid;         
                    modal2Meeting.style.display = "block";
                }
                // When the user clicks on <span> (x), close the modal
                spanMeeting.onclick = function() {
                    modalMeeting.style.display = "none";
                }
                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modalMeeting) {
                        modalMeeting.style.display = "none";
                    }
                }
                function myFunction5(val,aid) { 
                    //var x = event.target;
                    document.getElementById("pageID:frm:queryMeeting").value =  val; //fetch searched string
                    document.getElementById(elmMeeting).value =  val;    //assign to Project by input field
                    document.getElementsByClassName(fldMeeting)[0].value = aid;
                    modalMeeting.style.display = "none";
                }
                var j$ = jQuery.noConflict();
                j$(document).ready(function(){
                    j$("#myInput").on("keyup", function() {
                        var value = j$(this).val().toLowerCase();
                        j$("#myTable tr").filter(function() {
                            j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                        });
                    });
                });
                j$('#myMeetingModal').find('#myInput').focus();
                </script>
                <!-- ----------------------- Script For Meeting Lookup End ------------------ -->
            </apex:outputPanel>
        </div>
        <h4>Promotional Activity</h4>
        <div>
            <apex:outputPanel id="promotionalBlk">
                <apex:outputPanel rendered="{!(readWriteMode)}">
                    <apex:outputPanel rendered="{!promotionalVisitList.size !=0}">
                        <apex:variable var="j" value="{!1}" />
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" id="promotable">
                            <thead>
                                <tr class="slds-text-title_caps">
                                    <th scope="col" class="tg-9agx" width="15%">Action</th>
                                    <th scope="col" class="tg-9agx" width="5%">Sl.No</th>
                                    <th scope="col" class="tg-9agx" width="10%">Create Promotion</th>
                                    <th scope="col" class="tg-9agx" width="10%">Check in</th>
                                    <th scope="col" class="tg-9agx" width="10%">Geo Address</th>
                                    <th scope="col" class="tg-9agx" width="50%">Promotion <sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx" width="10%">Total Members Attended</th>
                                    <th scope="col" class="tg-9agx" width="10%">Actual Members Added</th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:variable value="{!1}" var="promoCount" />
                                <apex:repeat var="visit" value="{!promotionalVisitList}">
                                    <tr>
                                        <td class="tg-031e" data-label="ACTION">
                                            <apex:commandLink action="{!RemovePL}" onclick="if(!confirm('Are you sure?')){return};" reRender="promotionalBlk" status="as1">
                                                <apex:image url="{!$Resource.AP_Remove_Icon}" width="24" height="24" rendered="{!(visit.id == null )}" title="Remove Visit"/>
                                                <apex:param name="promoCount" value="{!promoCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!EditPL}" reRender="promotionalBlk" status="as1">
                                                <apex:image url="{!$Resource.pencil}" width="20" height="20" rendered="{!(visit.RecordEdit__c)}" title="Edit Visit"/>
                                                <apex:param name="promoCount" value="{!promoCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!DeletePL}" onclick="if(!confirm('Are you sure?')){return};" reRender="promotionalBlk" status="as1">
                                                <apex:image url="{!$Resource.deleteBtn}" width="20" height="20" title="Delete Meeting" rendered="{!(visit.RecordEdit__c)}"/>
                                                <apex:param name="promoCount" value="{!promoCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!CancelPL}" reRender="promotionalBlk" status="as1">
                                                <apex:image url="{!$Resource.editBtn}" width="20" height="20" title="Cancel" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null}"/>
                                                <apex:param name="promoCount" value="{!promoCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!SavePL}" reRender="promotionalBlk" status="as1">
                                                <apex:image url="{!$Resource.correctIcon}" width="20" height="20" title="Save" rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null }"/>
                                                <apex:param name="promoCount" value="{!promoCount}" />
                                            </apex:commandLink>
                                            <!--Added Here 2-05-2017 -->
                                            <apex:outputLink value="/apex/New_Promotion_PDF?id={!visit.Promotion__c}" rendered="{!(visit.RecordEdit__c)}" target="_blank">PDF Preview</apex:outputLink>
                                        </td>
                                        <td class="tg-031e" data-label="SL.NO">{!promoCount}</td>
                                        <td class="tg-031e" data-label="CREATE PROMOTION    ">
                                            <apex:image id="theProImg" styleClass="imgClass" value="{!$Resource.AddIcon}" width="24" height="24" onclick="assignCalValues('{!$Component.promotionLookUp}')" rendered="{!NOT(visit.RecordEdit__c)}" style="cursor:pointer;">
                                            </apex:image>                                    
                                            <!-- <apex:image id="theCoulmnImg" styleClass="imgClass" value="{!$Resource.AddIcon}" width="20" height="20" onclick="openCoulmnPromotion('{!$Component.promotionLookUp}');" rendered="{!isCOULMN && NOT(visit.RecordEdit__c)}" style="cursor:pointer;"/> -->
                                            <apex:image styleClass="imgClass" value="{!$Resource.DisabledAddIcon}" width="20" height="20" rendered="{!(visit.RecordEdit__c)}" style="cursor:not-allowed"/>
                                        </td>
                                        <td class="tg-031e" data-label="CHECK IN ">
                                            <apex:commandButton reRender="btnID" value="Check In" onclick="checkin(this.id);"
                                                                styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" />
                                            
                                            <apex:inputHidden value="{!visit.Geo_Location__Latitude__s}" id="latId" />
                                            <apex:inputHidden value="{!visit.Geo_Location__Longitude__s}" id="lonId" />
                                            <apex:inputHidden value="{!visit.Geo_Address__c}" id="geoAddId" />
                                        </td>
                                        <td class="tg-031e" data-label="GEO ADDRESS" style="white-space:normal;">
                                            <apex:outputText value="{!visit.Geo_Address__c}" id="gAdd"></apex:outputText> 
                                        </td>
                                        <td class="tg-031e" data-label="PROMOTION *">
                                            <div class="slds-truncate " title="PROMOTION">
                                                <div class="{!j}I">
                                                    <div class="{!j}B"></div>
                                                    <div class=" ">
                                                        <span style="color:red"></span>
                                                        <div class="tg-733k relative_pos lookup_style">
                                                            <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account" rendered="{!NOT(visit.RecordEdit__c)}" >
                                                                <apex:inputText value="{!visit.Promotion__c}" id="promotionLookUp" styleClass="targetfieldPro{!j}" style="display:none" />
                                                                <input type="text" size="20" id="targetPromotionName{!j}" value="{!visit.Promotion__r.Name}" class="slds-input required" />
                                                                <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionPromotion(targetPromotionName{!j},{!j})"/> </a>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </div>
                                                <p class="Error"></p>
                                            </div>
                                            <apex:outputLink value="/{!visit.Promotion__c}" rendered="{!(visit.RecordEdit__c)}" id="theLink" target="_blank"  >{!visit.Promotion__r.Type__c}</apex:outputLink>
                                        </td>
                                        <td class="tg-031e" data-label="TOTAL MEMBERS ATTENDED">
                                            <apex:outputField value="{!visit.promotion__r.Total_no_of_attendees__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="ACTUAL MEMBERS ADDED">
                                            <apex:outputField value="{!visit.promotion__r.Actual_No_of_Members__c}" />
                                        </td>
                                    </tr>
                                    <apex:variable value="{!promoCount+1}" var="promoCount" />
                                    <apex:variable var="j" value="{!j+1}" />
                                </apex:repeat>
                            </tbody>
                        </table>
                        <!-- ----------------------- Script For Promotional Activity Lookup ------------------ -->
                        <script>
                        // Get the modal for project by field which fetches account
                        var modal = document.getElementById('myModal');
                        var elm;
                        var fld;
                        var span = document.getElementsByClassName("closePromotion")[0];
                        function MyfunctionPromotion(elid, fldid) {                    
                            //   alert('--elid--'+elid.id + '--'+fldid);
                            var modal2 = document.getElementById('myModal');
                            elm = elid.id;  
                            fld = 'targetfieldPro' + fldid;                   
                            modal2.style.display = "block";
                        }
                        span.onclick = function() {
                            modal.style.display = "none";
                        }
                        window.onclick = function(event) {
                            if (event.target == modal) {
                                modal.style.display = "none";
                            }
                        }
                        function myFunction3(val,aid) {
                            document.getElementById("pageID:frm:query").value =  val; //fetch searched string
                            document.getElementById(elm).value =  val;    //assign to Promotion input field
                            document.getElementsByClassName(fld)[0].value = aid;
                            modal.style.display = "none";
                        }
                        var j$ = jQuery.noConflict();
                        j$(document).ready(function(){
                            j$("#myInput").on("keyup", function() {
                                var value = j$(this).val().toLowerCase();
                                j$("#myTable tr").filter(function() {
                                    j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                                });
                            });
                        });
                        j$('#myModal').find('#myInput').focus();
                        </script>
                        <!-- ----------------------- Script For Promotional Activity Lookup End ------------------ -->
                    </apex:outputPanel>
                    <apex:image url="{!$Resource.AP_Add_Icon}" width="24" height="24" style="margin-top: 10px;"
                                onclick="promotionalVisit();" rendered="{!editonlytoday}" title="new promotion" />
                    <apex:actionFunction action="{!promotionalVisit}" name="promotionalVisit" reRender="promotionalBlk" status="as1" />                                            
                </apex:outputPanel>
                <apex:outputPanel rendered="{!NOT(readWriteMode)}">
                    <apex:outputPanel rendered="{!promotionalVisitList.size == 0}">
                        <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!promotionalVisitList.size !=0}">
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                            <thead>
                                <tr class="slds-text-title_caps">
                                    <th scope="col" class="tg-9agx">Sl.No</th>
                                    <th scope="col" class="tg-9agx">Promotion</th>
                                    <th scope="col" class="tg-9agx">Total Members Attended</th>
                                    <th scope="col" class="tg-9agx">Actual Members Added</th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:variable value="{!1}" var="promoCount" />
                                <apex:repeat var="visit" value="{!promotionalVisitList}">
                                    <tr>
                                        <td class="tg-031e" data-label="SL no" >{!promoCount}</td>
                                        <td data-label="New promotoion">
                                            <apex:outputLink value="/apex/New_Promotion_PDF?id={!visit.Promotion__c}" rendered="{!(visit.RecordEdit__c)}"
                                                             target="_blank">PDF Preview</apex:outputLink>
                                        </td>
                                        <td class="tg-031e" data-label="Promotion">
                                            <apex:outputLink value="/{!visit.Promotion__c}" rendered="{!(visit.RecordEdit__c)}"
                                                             id="theLink" target="_blank">{!visit.Promotion__r.Type__c}</apex:outputLink>
                                        </td>
                                        <td class="tg-031e" data-label="Total no of attendees">
                                            <apex:outputField value="{!visit.promotion__r.Total_no_of_attendees__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="Actual no of attendees">
                                            <apex:outputField value="{!visit.promotion__r.Actual_No_of_Members__c}" />
                                        </td>
                                    </tr>
                                    <apex:variable value="{!promoCount+1}" var="promoCount" />
                                </apex:repeat>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                </apex:outputPanel>
            </apex:outputPanel>
        </div>
        <h4>Training</h4>
        <div>
            <apex:outputPanel id="trainingBlk">
                <apex:outputPanel rendered="{!(readWriteMode)}">
                    <apex:outputPanel rendered="{!trainingVisitList.size !=0}">
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                            <thead>
                                <tr class="slds-text-title_caps">
                                    <th scope="col" class="tg-9agx"></th>
                                    <th scope="col" class="tg-9agx">Sl.No</th>
                                    <th scope="col" class="tg-9agx">Check In<sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">Geo Address</th>
                                    <th scope="col" class="tg-9agx">State <sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">District <sub class="astriskStyle"> * </sub></th>
                                    <th scope="col" class="tg-9agx">Location <sub class="astriskStyle"> * </sub></th>
                                    <!-- <th class="tg-9agx">Taluka / Tehsil  <sub class="astriskStyle">  </sub></th> -->
                                    <th scope="col" class="tg-9agx">Training Details<sub class="astriskStyle"> * </sub></th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:variable value="{!1}" var="tempCount" />
                                <apex:repeat var="visit" value="{!trainingVisitList}">
                                    <tr>
                                        <td class="tg-031e" data-label="Action">
                                            <apex:commandLink action="{!RemoveTL}" onclick="if(!confirm('Are you sure?')){return};"
                                                              reRender="trainingBlk"
                                                              status="as1">
                                                <apex:image url="{!$Resource.AP_Remove_Icon}" width="24" height="24" 
                                                            rendered="{!(visit.id == null )}"
                                                            title="Remove Visit"/>
                                                <apex:param name="tempCount" value="{!tempCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!EditTL}" reRender="trainingBlk" status="as1">
                                                <apex:image url="{!$Resource.pencil}" width="20" height="20"
                                                            rendered="{!(visit.RecordEdit__c) && editonlytoday}"
                                                            title="Edit Visit"/>
                                                <apex:param name="tempCount" value="{!tempCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!DeleteTL}" onclick="if(!confirm('Are you sure?')){return};"
                                                              reRender="trainingBlk"
                                                              status="as1">
                                                <apex:image url="{!$Resource.deleteBtn}" width="20" height="20"
                                                            title="Delete Meeting"
                                                            rendered="{!(visit.RecordEdit__c) && editonlytoday}"/>
                                                <apex:param name="tempCount" value="{!tempCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!CancelTL}" reRender="trainingBlk" status="as1">
                                                <apex:image url="{!$Resource.editBtn}" width="20" height="20" 
                                                            title="Cancel"
                                                            rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null}"/>
                                                <apex:param name="tempCount" value="{!tempCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!SaveTL}" reRender="trainingBlk" status="as1">
                                                <apex:image url="{!$Resource.correctIcon}" width="20" height="20" 
                                                            title="Save"
                                                            rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null }"/>
                                                <apex:param name="tempCount" value="{!tempCount}" />
                                            </apex:commandLink>
                                        </td>
                                        <td class="tg-031e" data-label="Sl.No">{!tempCount}</td>
                                        <td class="tg-031e" data-label="CHECK IN *">
                                            <div class="slds-truncate">
                                                <apex:commandButton reRender="btnID" value="Check In" onclick="checkin(this.id);"
                                                                    styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"/>
                                                <apex:inputHidden value="{!visit.Geo_Location__Latitude__s}" id="latId" />
                                                <apex:inputHidden value="{!visit.Geo_Location__Longitude__s}" id="lonId" />
                                                <apex:inputHidden value="{!visit.Geo_Address__c}" id="geoAddId" />
                                            </div>
                                        </td>
                                        <td class="tg-031e">
                                            <div class="slds-truncate">
                                                <apex:outputText value="{!visit.Geo_Address__c}"></apex:outputText> 
                                            </div>
                                        </td>
                                        <td class="tg-031e" data-label="STATE *">
                                            <apex:inputField value="{!visit.State__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}"
                                                             styleClass="required slds-input"/>
                                            <p class="Error"></p>
                                            <apex:outputField value="{!visit.State__c}" rendered="{!(visit.RecordEdit__c)}" />
                                        </td>
                                        <td class="tg-031e inp_fd" data-label="DISTRICT *">
                                            <apex:inputField value="{!visit.Districts__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}"
                                                             styleClass="required slds-input"/>
                                            <p class="Error"></p>
                                            <apex:outputField value="{!visit.Districts__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                        </td>
                                        <td class="tg-031e" data-label="Training *">
                                            <apex:inputField value="{!visit.Location__c}" rendered="{!NOT(visit.RecordEdit__c)}"
                                                             style="width:100px"
                                                             styleClass="required slds-input"/>
                                            <p class="Error"></p>
                                            <apex:outputField value="{!visit.Location__c}" rendered="{!(visit.RecordEdit__c)}"
                                                              styleClass="required slds-input"/>
                                            <p class="Error"></p>
                                        </td>
                                        <td class="tg-031e" data-label="TRAINING DETAILS *">
                                            <apex:inputField value="{!visit.Training_Details__c}" rendered="{!NOT(visit.RecordEdit__c)}"
                                                             styleClass="required slds-input"/>
                                            <p class="Error"></p>
                                            <apex:outputField value="{!visit.Training_Details__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                        </td>
                                    </tr>
                                    <apex:variable value="{!tempCount+1}" var="tempCount" />
                                </apex:repeat>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                    <apex:image url="{!$Resource.AP_Add_Icon}" width="24" height="24" style="margin-top: 10px;"
                                onclick="trainingVisit();" title="Add Training Details" rendered="{!editonlytoday}"/>
                    <apex:actionFunction action="{!trainingVisit}" name="trainingVisit" reRender="trainingBlk"
                                         status="as1" />
                </apex:outputPanel>
                <apex:outputPanel rendered="{!NOT(readWriteMode)}">
                    <apex:outputPanel rendered="{!trainingVisitList.size == 0}">
                        <h4 style="color:#7f8c8d;" align="center">No Record Found.</h4>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!trainingVisitList.size !=0}">
                        <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                            <thead>
                                <tr class="slds-text-title_caps">
                                    <th scope="col" class="tg-9agx">Sl.No</th>
                                    <th scope="col" class="tg-9agx">State</th>
                                    <th scope="col" class="tg-9agx">District</th>
                                    <th scope="col" class="tg-9agx">Location</th>
                                    <th scope="col" class="tg-9agx">Training Details</th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:variable value="{!1}" var="tempCount" />
                                <apex:repeat var="visit" value="{!trainingVisitList}">
                                    <tr>
                                        <td class="tg-031e" data-label="Sl no" >{!tempCount}</td>
                                        <td class="tg-031e" data-label="State" >
                                            <apex:outputField value="{!visit.State__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="District">
                                            <apex:outputField value="{!visit.Districts__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="Location">
                                            <apex:outputField value="{!visit.Location__c}" />
                                        </td>
                                        <td class="tg-031e" data-label="Training Datails">
                                            <apex:outputField value="{!visit.Training_Details__c}" />
                                        </td>
                                    </tr>
                                    <apex:variable value="{!tempCount+1}" var="tempCount" />
                                </apex:repeat>
                            </tbody>
                        </table>
                    </apex:outputPanel>
                </apex:outputPanel>
            </apex:outputPanel>
        </div>
        <h4>Post Visit Order</h4>
        <div>
            <apex:outputPanel id="ordBlk" rendered="{!NOT(isBranding)}">
                <apex:outputPanel rendered="{!(readWriteMode)}">
                    <apex:outputPanel rendered="{!postOrderVisitList.size !=0}">
                        <apex:variable var="j" value="{!1}" />
                        <table class=" slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_col-bordered">
                            <thead>
                                <tr class="slds-text-title_caps">
                                    <th scope="col" class="tg-9agx">Action</th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">Sl.No</div></th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">Source of Order<sub class="astriskStyle"> * </sub></div></th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">Party Type <sub class="astriskStyle"> * </sub></div></th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">Party Name <sub class="astriskStyle"> * </sub></div></th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">Products<sub class="astriskStyle"> * </sub></div></th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">Order Value<sub class="astriskStyle"> * </sub></div></th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">CPVC Order Value</div></th>
                                    <th scope="col" class="tg-9agx"><div class="slds-truncate" title="">Remarks</div></th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:variable value="{!1}" var="ordCount" />
                                <apex:repeat var="visit" value="{!postOrderVisitList}">
                                    <tr>
                                        <td class="tg-031e" data-label="Action">
                                            <apex:commandLink action="{!RemovePVO}" onclick="if(!confirm('Are you sure?')){return};"
                                                              reRender="ordBlk"
                                                              status="as1">
                                                <apex:image url="{!$Resource.AP_Remove_Icon}" width="24" height="24" 
                                                            rendered="{!(visit.id == null )}"
                                                            title="Remove Visit"/>
                                                <apex:param name="ordCount" value="{!ordCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!EditPVO}" reRender="ordBlk" status="as1">
                                                <apex:image url="{!$Resource.pencil}" width="20" height="20"
                                                            rendered="{!(visit.RecordEdit__c)}"
                                                            title="Edit Visit"/>
                                                <apex:param name="ordCount" value="{!ordCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!DeletePVO}" onclick="if(!confirm('Are you sure?')){return};"
                                                              reRender="ordBlk"
                                                              status="as1">
                                                <apex:image url="{!$Resource.deleteBtn}" width="20" height="20"
                                                            title="Delete Meeting"
                                                            rendered="{!(visit.RecordEdit__c)}"/>
                                                <apex:param name="ordCount" value="{!ordCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!CancelPVO}" reRender="ordBlk" status="as1">
                                                <apex:image url="{!$Resource.editBtn}" width="20" height="20" 
                                                            title="Cancel"
                                                            rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null}"/>
                                                <apex:param name="ordCount" value="{!ordCount}" />
                                            </apex:commandLink>
                                            <apex:commandLink action="{!SavePVO}" reRender="ordBlk" status="as1">
                                                <apex:image url="{!$Resource.correctIcon}" width="20" height="20" 
                                                            title="Save"
                                                            rendered="{!readWriteMode && NOT(visit.RecordEdit__c) && visit.id != null }"/>
                                                <apex:param name="ordCount" value="{!ordCount}" />
                                            </apex:commandLink>
                                        </td>
                                        <td class="tg-031e"  data-label=" SL.NO">{!ordCount}</td>
                                        <td class="tg-031e" data-label="SOURCE OF ORDER *">
                                            <apex:inputField value="{!visit.Source__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}"
                                                             styleClass="required1 slds-input"/>
                                            <p class="Error"></p>
                                            <apex:outputField value="{!visit.Source__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                        </td>
                                        <td class="tg-031e" data-label="PARTY TYPE *">
                                            <apex:inputField value="{!visit.Party_Type__c}" style="width:100px" rendered="{!NOT(visit.RecordEdit__c)}"
                                                             styleClass="required1 slds-input">
                                                <apex:actionSupport event="onchange" reRender="visitBlk" onsubmit="sendPartyTypeName(this.value);">
                                                </apex:actionSupport>   
                                            </apex:inputField>
                                            <p class="Error"></p>
                                            <apex:outputField value="{!visit.Party_Type__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                        </td>
                                        <td class="tg-031e" data-label="PARTY NAME *">
                                            <div class="slds-truncate" title="Party Name">
                                                <div class="{!j}I">
                                                    <div class="{!j}B"></div>
                                                    <div class="">
                                                        <span style="color:red"></span>
                                                        <div class="tg-733k relative_pos lookup_style">
                                                            <apex:outputPanel layout="inline" style="vertical-align:middle" id="xx_account" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="required">
                                                                <apex:inputText value="{!visit.Party_Name__c}" id="targetIdpostvisit" styleClass="targetParty2Name{!j}" style="display:none" />
                                                                <input type="text"  size="20" id="targetParty2Name{!j}" value="{!visit.Party_Name__r.name}" class="slds-input required1"  onclick="myfunctionblockfield()" ></input>
                                                            <p class="Error"></p> 
                                                            <a href="#" id="myBtn" class="lk"> <apex:image url="{!$Resource.Addlookupicon}" width="20" height="20" onclick="MyfunctionPostVisit(targetParty2Name{!j},{!j})"/> </a>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <p class="Error"></p>
                                            <apex:outputField value="{!visit.Party_Name__c}" rendered="{!(visit.RecordEdit__c)}" />
                                        </div>
                                </td>
                                <td class="tg-031e" data-label="PRODUCTS *">
                                    <apex:outputPanel id="pro1" rendered="{!NOT(visit.RecordEdit__c)}">
                                        <select class="form-control multSel slds-input" id="ordProductList" multiple="true" size="3"
                                                style="float:right"
                                                onblur="setProducts('ordProductList','{!$Component.proHiddenId}')" >
                                            <apex:repeat value="{!productList}" var="pro">
                                                <Option value="{!pro}">{!pro}</Option>
                                            </apex:repeat>
                                        </select>
                                    </apex:outputPanel>
                                    <apex:inputHidden value="{!visit.Products__c}" id="proHiddenId" />
                                    <apex:outputField value="{!visit.Products__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                </td>
                                <td class="tg-031e" data-label="ORDER VALUE *">
                                    <apex:inputField value="{!visit.Order_Value__c}" rendered="{!NOT(visit.RecordEdit__c)}"
                                                     styleClass="required1 slds-input"/>
                                    <p class="Error"></p>
                                    <apex:outputField value="{!visit.Order_Value__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                </td>
                                <td class="tg-031e" data-label=" CPVC ORDER VALUE">
                                    <apex:inputField value="{!visit.CPVC_Order_Value__c}" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="slds-input"/>
                                    <apex:outputField value="{!visit.CPVC_Order_Value__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                </td>
                                <td class="tg-031e" data-label="REMARKS">
                                    <apex:inputField value="{!visit.Remarks__c}" rendered="{!NOT(visit.RecordEdit__c)}" styleClass="slds-input"/>
                                    <apex:outputField value="{!visit.Remarks__c}" rendered="{!(visit.RecordEdit__c)}"/>
                                </td>
                            </tr>
                        <apex:variable value="{!ordCount+1}" var="ordCount" />
                        <apex:variable var="j" value="{!j+1}" />
                    </apex:repeat>
                </tbody>
            </table>
            <!-- ----------------------- Script For Post Visit Order Lookup ------------------ -->                  
            <script>
            var modalPost = document.getElementById('myPostVisitModal');
            var elmPost;
            var fldPost;
            var spanPost = document.getElementsByClassName("closePostVisit")[0];
            function MyfunctionPostVisit(elid, fldid) {
                var modal2Post = document.getElementById('myPostVisitModal');
                elmPost = elid.id;  
                fldPost = 'targetParty2Name' + fldid;                 
                modal2Post.style.display = "block";
            }
            spanPost.onclick = function() {
                modalPost.style.display = "none";
            }
            window.onclick = function(event) {
                if (event.target == modalPost) {
                    modalPost.style.display = "none";
                }
            }
            function myFunction4(acctId) {
                var nameElementId = 'acctName'+acctId;
                var val = document.getElementById(nameElementId).value;
                var aid = acctId;
                document.getElementById("pageID:frm:queryPost").value =  val; //fetch searched string
                document.getElementById(elmPost).value =  val;    //assign to Project by input field
                document.getElementsByClassName(fldPost)[0].value = aid;
                modalPost.style.display = "none";
            }
            var j$ = jQuery.noConflict();
            j$(document).ready(function(){
                j$("#myInput").on("keyup", function() {
                    var value = j$(this).val().toLowerCase();
                    j$("#myTable tr").filter(function() {
                        j$(this).toggle(j$(this).text().toLowerCase().indexOf(value) > -1)
                    });
                });
            });
            j$('#myPostVisitModal').find('#myInput').focus();
            </script>
            <!-- ----------------------- Script For Post Visit Order Lookup End ------------------ -->                
        </apex:outputPanel>
        <apex:image url="{!$Resource.AP_Add_Icon}" width="24" height="24" style="margin-top: 10px;"
                    onclick="postOrderVisit();"  title="post visit new entry" rendered="{!editonlytoday}"/>
        <apex:actionFunction action="{!postOrderVisit}" name="postOrderVisit" reRender="ordBlk"
                             status="as1" />
    </apex:outputPanel>
    
    <apex:outputPanel rendered="{!NOT(readWriteMode)}">
        <apex:outputPanel rendered="{!postOrderVisitList.size == 0}">
            <h3 style="color:#7f8c8d;" align="center">No Record Found.</h3>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!postOrderVisitList.size !=0}">
            <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal" >
                <thead>
                    <tr>
                        <th class="tg-9agx">Sl.No</th>
                        <th class="tg-9agx">Source of Order</th>
                        <th class="tg-9agx">Party Type </th>
                        <th class="tg-9agx">Party Name </th>
                        <th class="tg-9agx">Products</th>
                        <th class="tg-9agx">Order Value</th>
                        <th class="tg-9agx">CPVC Order Value</th>
                        <th class="tg-9agx">Remarks</th>
                    </tr>
                </thead>
                <tbody>
                    <apex:variable value="{!1}" var="ordCount" />
                    <apex:repeat var="visit" value="{!postOrderVisitList}">
                        <tr>
                            <td class="tg-031e" data-label="Sl no" >{!ordCount}</td>
                            <td class="tg-031e" data-label="Source">
                                <apex:outputField value="{!visit.Source__c}" />
                            </td>
                            <td class="tg-031e" data-label="Party type">
                                <apex:outputField value="{!visit.Party_Type__c}" />
                            </td>
                            <td class="tg-031e" data-label="party name">
                                <apex:outputField value="{!visit.Party_Name__c}" />
                            </td>
                            <td class="tg-031e" data-label="Products">
                                <apex:outputField value="{!visit.Products__c}" id="proHiddenId" />
                            </td>
                            <td class="tg-031e" data-label="Order value">
                                <apex:outputField value="{!visit.Order_Value__c}" />
                            </td> 
                            <td class="tg-031e" data-label="CPVC order value">
                                <apex:outputField value="{!visit.CPVC_Order_Value__c}" />
                            </td>
                            <td class="tg-031e" data-label="Remarks">
                                <apex:outputField value="{!visit.Remarks__c}" />
                            </td>
                        </tr>
                        <apex:variable value="{!ordCount+1}" var="ordCount" />
                    </apex:repeat>
                </tbody>
            </table>
        </apex:outputPanel>
    </apex:outputPanel>
</apex:outputPanel>
</div>
</div>
</div>
</div>
<h3 class="expAccordian">Expense</h3>
<div>
    <apex:actionFunction name="jsSaveExpense" action="{!saveExpense}" reRender="mainExp,expEditTable,expNewTable,beatSection"
                         status="as1">
        <apex:param id="exptourId" name="expTourId" value="" />
        <apex:param id="exptourDateId" name="expTourDate" value="" />
    </apex:actionFunction>
    <apex:outputPanel id="mainExp">
        <apex:outputPanel id="addExp" rendered="{!NOT(showExpense)}">
            <apex:commandButton value="Add Expense" action="{!addExpens}" styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"
                                reRender="mainExp" status="as1" rendered="{!(showExSaveBtn)}"/>
            <apex:commandButton value="Show Expense" action="{!addExpens}" styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"
                                reRender="mainExp" status="as1" rendered="{!NOT(showExSaveBtn)}"/>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!showExpense}">
            <apex:outputPanel id="expNewTable" rendered="{!showEditTable}">
                <div class="slds-grid slds-wrap slds-p-around_small">
                    <div class="slds-size--1-of-1 slds-large-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small"> 
                        <legend class="slds-form-element__label slds-form-element__legend slds-text-title_caps slds-p-bottom_small slds-p-top_small">Visit Expense Details</legend>
                    </div>
                    <div class="slds-clearfix"></div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <div class="slds-form-element">
                            <label class="slds-form-element__label">Expense Visit Type<sub class="astriskStyle">  * </sub></label>
                            <div class="slds-form-element__control">
                                <apex:inputField value="{!dayExpenses.Expens_Visit_Type__c}"
                                                 styleClass="required slds-input" id="expTypeId"/>
                                <p class="Error"></p>
                            </div>
                        </div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">From <sub class="astriskStyle">  * </sub></label>
                        <div class="slds-form-element__control">
                            <apex:inputField value="{!dayExpenses.From__c}"  styleClass="required slds-input"/>
                            <p class="Error"></p>
                        </div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">To <sub class="astriskStyle">  * </sub></label>
                        <div class="slds-form-element__control"><apex:inputField value="{!dayExpenses.To__c}" styleClass="required slds-input"/>
                            <p class="Error"></p></div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label"> Start <sub class="astriskStyle">  * </sub></label>
                        <div class="slds-form-element__control"> <apex:inputField value="{!dayExpenses.Start_Time__c}"  styleClass="required slds-input"/>
                            <p class="Error"></p></div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">End <sub class="astriskStyle">  * </sub> </label>
                        <div class="slds-form-element__control"><apex:inputField value="{!dayExpenses.Time_To__c}"  styleClass="required slds-input"/>
                            <p class="Error"></p></div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label"> Mode of Travel</label>
                        <div class="slds-form-element__control">
                            <select class="form-control multSel slds-select" id="modeOfTravelId" multiple="true" size="3"
                                    onblur="searchFlights()">
                                <apex:repeat value="{!modeOfTravel}" var="mode">
                                    <Option value="{!mode}">{!mode}</Option>
                                </apex:repeat>
                            </select>
                        </div>
                        <apex:inputHidden value="{!dayExpenses.Mode_Of_Travel__c}" id="expModeId" />
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">Fare <sub class="astriskStyle">  * </sub></label>
                        <div class="slds-form-element__control">
                            <input type="number" id="fareId"  onblur="coypToApex(this.id,'{!$Component.fareApex}');"
                                   class="required slds-input" />
                            <apex:inputHidden value="{!dayExpenses.Fare_Local_Conveyance__c}" id="fareApex" />
                            <p class="Error"></p>
                        </div>
                    </div> 
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">Local Conveyance</label>
                        <div class="slds-form-element__control">
                            <input type="number" class="slds-input" id="rateId"  onblur="coypToApex(this.id,'{!$Component.rateApex}');"/>
                            <apex:inputHidden value="{!dayExpenses.Local_Conveyance_New__c}" id="rateApex" />
                        </div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">KM</label> 
                        <div class="slds-form-element__control">
                            <input type="number" id="kmId" class="slds-input" onblur="coypToApex(this.id,'{!$Component.keApex}');" />
                            <apex:inputHidden value="{!dayExpenses.KM__c}" id="keApex" />
                        </div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <legend class="slds-form-element__label slds-form-element__legend slds-text-title_caps slds-p-bottom_small slds-p-top_small">Expense Details</legend></div>
                    <div class="slds-clearfix"></div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small">
                        <label class="slds-form-element__label"> Hotel Stay / Own Arrangement</label>
                        <input type="number" id="hotelId" class="slds-input" onblur="coypToApex(this.id,'{!$Component.conveyance}');"/>
                        <apex:inputHidden value="{!dayExpenses.Local_Conveyance__c}" id="conveyance" />
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label"> Not / Involving Overnight Stay DA </label>
                        <div class="slds-form-element__control "> <input type="number" id="overNightId" class="slds-input"  onblur="coypToApex(this.id,'{!$Component.overNightApex}');"/>
                            <apex:inputHidden value="{!dayExpenses.Not_Involving_Overnight_Stay_DA__c}" id="overNightApex"/></div>
                        
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">Sundries in addition to Hotel Bills</label>
                        <div class="slds-form-element__control "> <input type="number" class="slds-input" id="addionId"  onblur="coypToApex(this.id,'{!$Component.additionApex}');"/>
                            <apex:inputHidden value="{!dayExpenses.Sundries_in_addition_to_Hotel_Bills__c}" id="additionApex"/></div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label"> Stationary / Photo copy</label>
                        <div class="slds-form-element__control "><input type="number" class="slds-input" id="photoId"  onblur="coypToApex(this.id,'{!$Component.photoCopyApex}');"/>
                            <apex:inputHidden value="{!dayExpenses.Stationery_and_Photocopy__c}" id="photoCopyApex"/></div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">Tel/ Fax/ Internet</label>
                        <div class="slds-form-element__control "><input type="number" id="telephoneId" class="slds-input" onblur="coypToApex(this.id,'{!$Component.telephoneApex}');"/>
                            <apex:inputHidden value="{!dayExpenses.Telephone_Fax_Internet__c}" id="telephoneApex"/></div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">Courier</label>
                        <div class="slds-form-element__control "><input type="number" id="courierId" class="slds-input"  onblur="coypToApex(this.id,'{!$Component.courierApex}');"/>
                            <apex:inputHidden value="{!dayExpenses.Courier__c}" id="courierApex" /></div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">MISC/ Promotion </label>
                        <div class="slds-form-element__control">
                            <input type="number" id="miscellaneousId" class="slds-input" onblur="coypToApex(this.id,'{!$Component.miscellaneousApex}');"
                                   />
                            <apex:inputHidden value="{!dayExpenses.Miscellaneous__c}" id="miscellaneousApex"/>
                        </div>
                    </div>
                    <div class="slds-size--1-of-1 slds-large-size--2-of-3 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <label class="slds-form-element__label">Remarks<sub class="astriskStyle" id="expRemarks"
                                                                            style="display: none;">  * </sub></label> 
                        <div class="slds-form-element__control"><apex:inputField value="{!dayExpenses.Remarks__c}" styleClass="slds-textarea" style="height:50px;"
                                                                                 />
                            <p class="Error"></p></div>
                        
                    </div>
                    <div class="slds-clearfix"></div>
                    <div class="slds-size--1-of-1 slds-large-size--1-of-1 slds-medium-size--1-of-3 slds-small-size--1-of-1 slds-p-right_small slds-p-bottom_small">
                        <legend class="slds-form-element__label slds-form-element__legend slds-text-title_caps slds-p-bottom_small slds-p-top_small">Expense Attchments</legend>
                    </div>
                </div>
            </apex:outputPanel>
            <apex:outputPanel id="expEditTable" rendered="{!NOT(showEditTable)}">
                <table class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal">
                    <tr>
                        <th class="exp-64mc" colspan="6">Visit Expense Details<br/></th>
                    </tr>
                    <tr>
                        <td class="exp-cf6s">Expense <br/>Visit Type</td>
                        <td class="exp-64mc">{!dayExpenses.Expens_Visit_Type__c}</td>
                        <td class="exp-cf6s">From</td>
                        <td class="exp-64mc">{!dayExpenses.From__c}</td>
                        <td class="exp-cf6s">To</td>
                        <td class="exp-64mc">{!dayExpenses.To__c} </td>
                    </tr>
                    <tr>
                        <td class="exp-cf6s">Start</td>
                        <td class="exp-64mc">{!dayExpenses.Start_Time__c}</td>
                        <td class="exp-cf6s">End</td>
                        <td class="exp-64mc">{!dayExpenses.Time_To__c}</td>
                        <td class="exp-cf6s">Mode of Travel</td>
                        <td class="exp-64mc">{!dayExpenses.Mode_Of_Travel__c}</td>
                    </tr>
                    <tr>
                        <td class="exp-cf6s">Fare</td>
                        <td class="exp-64mc">{!dayExpenses.Fare_Local_Conveyance__c}</td>
                        <td class="exp-cf6s">Local Conveyance</td>
                        <td class="exp-64mc">{!dayExpenses.Local_Conveyance_New__c}</td>
                        <td class="exp-cf6s">KM</td>
                        <td class="exp-64mc">{!dayExpenses.KM__c}</td>
                    </tr>
                    <tr>
                        <td class="exp-ztk1" colspan="6"><b>Expense Details</b><br/></td>
                    </tr>
                    <tr>
                        <td class="exp-cf6s">Hotel Stay/ <br/>Own <br/>Arrangement</td>
                        <td class="exp-64mc">{!dayExpenses.Local_Conveyance__c}</td>
                        <td class="exp-cf6s">Not / Involving <br/>Overnight Stay<br/> DA</td>
                        <td class="exp-64mc">{!dayExpenses.Not_Involving_Overnight_Stay_DA__c}</td>
                        <td class="exp-cf6s">Sundries in<br/> addition to<br/> Hotel
                            Bills
                        </td>
                        <td class="exp-64mc">{!dayExpenses.Sundries_in_addition_to_Hotel_Bills__c}</td>
                    </tr>
                    <tr>
                        <td class="exp-cf6s">Tel/ Fax/<br/> Internet</td>
                        <td class="exp-64mc">{!dayExpenses.Telephone_Fax_Internet__c}</td>
                        <td class="exp-cf6s">Courier</td>
                        <td class="exp-64mc">{!dayExpenses.Courier__c}</td>
                        <td class="exp-cf6s">Stationary/<br/> Photo copy</td>
                        <td class="exp-64mc">{!dayExpenses.Stationery_and_Photocopy__c}</td>
                    </tr>
                    <tr>
                        <td class="exp-cf6s">MISC/ <br/>Promotion</td>
                        <td class="exp-64mc">{!dayExpenses.Miscellaneous__c}</td>
                        <td class="exp-cf6s">Remarks</td>
                        <td class="exp-64mc" colspan="3">{!dayExpenses.Remarks__c}</td>
                    </tr>
                    <tr>
                        <td class="exp-8m9r" colspan="4"><b>Total</b></td>
                        <td class="exp-8m9r" colspan="2"><b>{!dayExpenses.Total_Expenses__c}</b>
                            <apex:inputHidden id="expnseId" value="{!dayExpenses.id}" />
                        </td>
                    </tr>
                    <tr style="display:{!IF(expenseAttachments.size != 0, '', 'none')};">
                        <td class="exp-ztk1" colspan="6"><b>Expense Attachmnet</b><br/>
                        </td>
                    </tr>
                    <tr style="display:{!IF(expenseAttachments.size != 0, '', 'none')};">
                        <td class="exp-ztk1" colspan="1">
                            Sl.No
                        </td>
                        <td class="exp-ztk1" colspan="4">
                            Name
                        </td>
                        <td class="exp-ztk1" colspan="1">
                        </td>
                    </tr>
                    <apex:variable value="{!1}" var="expCount" />
                    <apex:repeat value="{!expenseAttachments}" var="att">
                        <tr>
                            <td class="exp-cf6s" colspan="1">{!expCount}</td>
                            <td class="exp-64mc" colspan="4">{!att.Name}</td>
                            <td class="exp-64mc" colspan="1">
                                <a href="/servlet/servlet.FileDownload?file={!att.Id}" data-lightbox="image-{!att.Id}"
                                   target="_blank" id="my-dialog"> View</a>
                            </td>
                        </tr>
                        <apex:variable value="{!expCount+1}" var="expCount" />
                    </apex:repeat>
                    <!-- </div> -->
                    <tr>
                        <td class="exp-0aqu" colspan="6">
                            <center>
                                <div style="display: initial;">
                                    <apex:commandButton value="Edit Expense" action="{!EditExpense}" styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"
                                                        reRender="mainExp,expEditTable,expNewTable"
                                                        status="as1" style="margin-top: -50px;"
                                                        oncomplete="copyToHtml();"
                                                        />
                                    
                                    <apex:commandLink onclick="jsOpenExpnseAtt();" reRender="expEditTable" status="as1">
                                        <apex:image url="{!$Resource.upload2}" width="75" height="75" style="padding-left: 15px;"
                                                    rendered="{!dayExpenses.id != null}"
                                                    title=" Upload Attachments"
                                                    /> </apex:commandLink>
                                </div>
                            </center>
                        </td>
                    </tr>
                </table>
            </apex:outputPanel>
        </apex:outputPanel>
    </apex:outputPanel>
</div>
</div>
</apex:form>
</div>
<div id="applNewPromotionDialogWrap">
    <div id="applNewPromotionDialog">
    </div>
</div>
<!-- Custom Js -->
<!-----------------------------------------------FUNCTION FOR ATTACHMENT UPLOAD STARTS--------------------------------------------->
<script>
var currentId;
var j;
</script>
<!--------------------------------------------FUNCTION FOR ATTACHMENT UPLOAD ENDS--------------------------------------------->
<script>
var j$ = jQuery.noConflict();
var tourPlanId;
var tourDate;
var tourTile;
var targetVetical;
var jsonArr = [];
var dialogBox = '';
var param = '';
var popUp = '';
var openPopUpJs = '';
var dateDiff;
var jsSaveExpense = false;
var partyTypeName;
var pop2 = '';
function sendPartyTypeName(PartyTypeName){
    Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.CustomLookupForProject.selectedPartyType}',
                                              PartyTypeName, function(result, event){
                                                  j$("[id$='partyTypeTemp']").val(result);
                                                  j$("[id$='partyTypeProject']").val(result);
                                              }, {escape: true});
}
j$(document).ready(function() {
    party = function(partType, BrandType, Btype, Mtype,
                     Type, Lang) {
        var PType = document.getElementById(partType).value;
        var Brand = document.getElementById(BrandType).checked;
        if (Brand == true) {
            var btype = document.getElementById(Btype);
            var mtype = document.getElementById(Mtype);
            var type = document.getElementById(Type);
            var lang = document.getElementById(Lang);
            if (PType != 'Dealer' || PType !='Direct Dealer' || PType !='Distributor') {
                btype = '';
                mtype = '';
                mtype = '';
                lang = '';
                document.getElementById(BrandType).checked =
                    false;
            }
        } 
    }
    checkBranding = function(partType, PartyName, BrandType) {
        var Brand = document.getElementById(BrandType).checked;
        var PName = document.getElementById(PartyName).value;
        var PType = document.getElementById(partType).value;
        if (Brand == true && PType != 'Dealer' && PType !='Direct Dealer' && PType != 'Distributor') {
            alert(
                'Party Type must be Distributor or Dealer or Direct Dealer'
            );
            document.getElementById(BrandType).checked = false;
            return;
        }
        if (PName == '' && document.getElementById(
            PartyName).value == '') {
            alert('Please Select Party Name');
            return;
        }
        var shopId = document.getElementById(PartyName).value;
        APPL_SITEVISIT_CALENDAR_CTRL.checkBranding(
            shopId,
            function(res, evt) {
                if (evt.status) {
                    if (res == false) {
                        document.getElementById(BrandType).checked = false;
                        alert(
                            'Shop Selected is already in progress '
                        );
                    }
                    visit();
                } else {
                    alert('error in connection');
                }
            },{
                timeout: 30000,
                escape: true,
                buffer: true
            });
    }
    checkMedia = function(Btype, Mtype, Type, Lang) {
        var ver = '{!Vertical}';
        var btype = document.getElementById(Btype);
        var mtype = document.getElementById(Mtype);
        var type = document.getElementById(Type);
        var lang = document.getElementById(Lang);
        if (mtype.value == "Product Stickers" && ver =='Column') {
            document.getElementById(Type).setAttribute('Disabled');
        }
    }
    j$("a.preview").click(function() {
        alert('Show Img');
        j$('div.myImage').dialog("open");
        
    });
    j$('div.myImage').dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            Cancel: function() {
                $(this).dialog('close');
            }
        }
    });
    param = "{!$CurrentPage.parameters.id}";
    if(navigator.userAgent.match(/Android/i) || navigator.userAgent
       .match(/webOS/i) || navigator.userAgent.match(
           /iPhone/i) || navigator.userAgent.match(/iPad/i) ||
       navigator.userAgent.match(/iPod/i) || navigator.userAgent
       .match(/BlackBerry/i) || navigator.userAgent.match(
           /Windows Phone/i)) {
        //alert(navigator.userAgent.match(/Android/i));
        j$("#wrap").attr('style',
                         'font-size: 18px;width: 98%;padding-left:20px;'
                        );
        j$(".leftPanel").attr('style',
                              'font-size: 18px;'
                             );
        var X_breakPoint = "<br/>";
        j$("#breakSpan").html(X_breakPoint);
        j$("#calendar").attr('style', 'width:100%;');
        j$("#external-events").attr('style',
                                    'padding-left:5px;');
        j$("#button").attr('style', 'padding-right:220px;');
        
    }else {
        j$("#wrap").attr('style',
                         'font-size: 14px'
                        );
        j$(".leftPanel").attr('style',
                              'font-size: 14px;'
                             );
        j$("#external-events").attr('style',
                                    '');
        j$("#calendar").attr('style',
                             'width:100%;height:80%');
    }
    j$('#external-events').accordion({
        collapsible: true,
        heightStyle: "content"
    });
    initExternalEvents();
    EventJSON(param);
    j$('#accordion').accordion({
        header: 'h3',
        autoHeight: false,
        clearStyle: true,
        heightStyle: "content",
        collapsible: true,
        active: false
    });
    j$('#accordion2').accordion({
        header: 'h4',
        autoHeight: false,
        clearStyle: true,
        heightStyle: "content",
        icons: {
            header: 'ui-icon-plus',
            headerSelected: 'ui-icon-minus'
        },
        collapsible: true,
        active: false
    });
});
function initExternalEvents() {
    j$('#external-events div.external-event').each(function() {
        var eventObject = {
            title: j$.trim(j$(this).text())
        };
        j$(this).data('eventObject', eventObject);
        
        j$(this).draggable({
            zIndex: 999,
            revert: true, // will cause the event to go back to its
            revertDuration: 0, //  original position after the drag
            stop: function(event, ui) {}
        });
    });
}
function EventJSON(targetId) {
    APPL_SITEVISIT_CALENDAR_CTRL.retreiveTourRelatedTarget(targetId,
                                                           function(res, event) {
                                                               if (event.status) {
                                                                   
                                                                   j$.each(res, function(i, item) {
                                                                       
                                                                       var eventTitle = '';
                                                                       if (item.tourPlan.Visit_Type__c !=
                                                                           'Holiday' && item.tourPlan.Visit_Type__c !=
                                                                           'Leave' && item.tourPlan.Visit_Type__c !=
                                                                           'Meetings/Training/Others') {
                                                                           
                                                                           if (item.tourPlan.Promotional_Type__c !=
                                                                               undefined) {
                                                                               
                                                                               eventTitle += item.tourPlan
                                                                               .Target_Vertical__c +
                                                                                   ';' + item.tourPlan.Promotional_Type__c +
                                                                                   ';';
                                                                           }
                                                                           if (item.tourPlan.Visit_Type__c !=
                                                                               '--None--' && item.tourPlan
                                                                               .Visit_Type__c != undefined
                                                                              ) {
                                                                               
                                                                               eventTitle += item.tourPlan
                                                                               .Target_Vertical__c +
                                                                                   ';' + item.tourPlan.Visit_Type__c +
                                                                                   ';';
                                                                           }
                                                                           
                                                                       } else {
                                                                           
                                                                           eventTitle = item.tourPlan.Visit_Type__c ==
                                                                               'Holiday' ? item.tourPlan.Target_Vertical__c +
                                                                               '; Holiday/Market Closed' :
                                                                           (item.tourPlan.Visit_Type__c ==
                                                                            'Leave' ? item.tourPlan
                                                                            .Target_Vertical__c +
                                                                            '; Leave' : item.tourPlan
                                                                            .Target_Vertical__c +
                                                                            '; Meetings/Training /Others'
                                                                           );
                                                                       }
                                                                       
                                                                       
                                                                       jsonArr.push({
                                                                           title: eventTitle,
                                                                           start: new Date(item.sDate),
                                                                           end: new Date(item.sDate),
                                                                           allDay: true,
                                                                           id: item.tourPlan.Id,
                                                                           beatAccess: (item.tourPlan.Target_Vertical__c=='Plumbing'|| item.tourPlan.Target_Vertical__c=='Column')?true:false,
                                                                           beatName :item.tourPlan.Beat_Name__c == undefined?'No Beat':item.tourPlan.Beat_Name__c,
                                                                           rendering: "inverse-background",
                                                                           default: true,
                                                                           AA_pType: item.tourPlan
                                                                           .Promotional_Type__c,
                                                                           AA_vType: item.tourPlan
                                                                           .Visit_Type__c,
                                                                           AA_State: item.tourPlan
                                                                           .State__c,
                                                                           AA_District: item.tourPlan
                                                                           .District__c,
                                                                           AA_Location: item.tourPlan
                                                                           .Location__c,
                                                                           AA_Holiday: item.tourPlan
                                                                           .Holiday_Market_Closed__c,
                                                                           AA_Leave: item.tourPlan
                                                                           .Visit_Type__c ==
                                                                           'Leave' ? true : false,
                                                                           AA_Meeting: item.tourPlan
                                                                           .Visit_Type__c ==
                                                                           'Meetings/Training/Others' ?
                                                                           true : false,
                                                                           AA_MeetingDesc: item.tourPlan
                                                                           .Comments__c,
                                                                           color: item.tourPlan.Visit_Type__c !=
                                                                           'Holiday' && item.tourPlan
                                                                           .Visit_Type__c !=
                                                                           'Leave' ? '#2ecc71' :
                                                                           '#7f8c8d'
                                                                       });
                                                                   });
                                                                   initializeFullCal();
                                                               }
                                                           });
}
var nptb ='';
function initializeFullCal() {
    j$('#calendar').fullCalendar({
        theme: true,
        eventLimit: true, // for all non-agenda views
        month: "{!startDateMonth}",
        year: "{!startDateYear}",
        defaultView: 'month',
        allDayDefault: true,
        header: {
            left: 'today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        eventRender: function(event, element) {
            if(event.beatAccess==true){
                element.find('.fc-event-title').append('<br/><div style="background-color:blue">' + event.beatName +'</div>'); 
            }
            element.find('.fc-event-time').hide();
        },
        eventClick: function(event, jsEvent, view) {
            j$(this).css('border-color', 'red');
            if (event) {
                tourPlanId = event.id;
                tourDate = moment(event.start).format('DD/MM/YYYY');
                tourTile = event.title;
                var titleAry = [];
                titleAry = tourTile.split(";");
                targetVetical = '';
                targetVetical = titleAry[0];
                j$(".eventDateDiv").html(tourDate);
                var todayDate = new Date();
                var todayMom = moment(todayDate).format('DD/MM/YYYY');
                var tod = moment(todayMom, 'DD/MM/YYYY');
                var evt = moment(tourDate, 'DD/MM/YYYY');
                dateDiff = evt.diff(tod, 'days');
                if (dateDiff > 0) {
                    alert(
                        'Visit Entry can not be made for "Future days".'
                    );
                } else {
                    jsInitializeModal(tourPlanId,
                                      tourDate, targetVetical,
                                      dateDiff);
                }
            }
        },
        editable: false,
        events: jsonArr,
        droppable: false,
    });
}
popUp = function() {
    j$("#eventContent").dialog({
        autoOpen: false,
        title: tourTile + ' - ' + tourDate,
        modal: true,
        width: "80%",
        modal: true,
        show: {
            effect: "slide",
            duration: 800
        },
        hide: {
            effect: "fold",
            duration: 800
        },
        dialogClass: 'ui-dialog-osx',
        buttons: {
            "Save": function() {
                var errCounter =0;
                var partynameplumbcol=j$("[id$=targetplumcol]").val();
                var partynameproject=j$("[id$=targetIdpro]").val();
                var partynamebranding=j$("[id$=targetIdbranding]").val();
                var companyNamevalue=j$("[id$=targetplumcolmm]").val();
                var partytypebranding=j$("[id$= partyProTypeId1]").val();
                var remarksMomIndustrial=j$("[id$=remarksIdIndus]").val();
                var CheckoutIndustrial=j$("[id$=gAdd2]").val();
                var CheckoutIndustrial2=j$("[id$=geoAddId2]").val();
                var produccttype = j$("[id$=visProducts]").val();
                var targetVertical = j$("[id$=targetVertical]").val();
                var promotion=j$("[id$=promotionLookUp]").val();
                var partynamepostvisit=j$("[id$=targetIdpostvisit]").val();
                if(partynamebranding=='' && (partytypebranding=='Dealer' || partytypebranding=='Distributor') ){
                    alert("Please select either Dealer or Distributor");
                    errCounter +=1;
                    return false;
                }
                if((CheckoutIndustrial !='' || CheckoutIndustrial2 != '') && remarksMomIndustrial == ''){
                    alert("Please Fill MOM when checkout is done");
                    errCounter +=1;
                    return false;
                }
                if(partynameplumbcol==''){
                    alert("Please select party name");
                    errCounter +=1;
                    return false;
                }
                if(partynameproject==''  ){
                    alert("Please select party name");
                    errCounter +=1;
                    return false;
                }
                if(partynamepostvisit==''){   
                    alert("Please select party name");
                    errCounter +=1;
                    return false;
                }
                if(promotion==''){
                    alert("Please create either promotion or select PN number from the lookup");
                    errCounter +=1;
                    return false;
                }
                var expTypeVal = j$(
                    "[id$=expTypeId]").val();
                var leaveReason = j$(
                    "[id$=leaveReasonId]").val();
                var holidayRemark = j$(
                    "[id$=holidayRemarksId]").val();
                if (dateDiff == 0 ){
                    if (leaveReason == '' &&
                        holidayRemark == '') {
                        saveVisitValidation();
                    } else if (typeof(expTypeVal) ==
                               'undefined') {
                        saveVisitValidation();
                    } else {
                        alert( 'For Holiday / Leave, Only Expense cannot be added' );
                    }
                } else {
                    if (jsSaveExpense == true) {
                        saveVisitValidation();
                    } else if (jsSaveExpense !=
                               true) {
                    }
                }   
            }
            ,
            "Exit": function() {
                j$("#eventContent").dialog("close");
                window.location.reload();
            }
        }
    });
    j$('.ui-dialog-osx .ui-dialog-titlebar-close').on('click',
                                                      function(event) {
                                                          event.preventDefault();
                                                          confirm(
                                                              'YOUR CHANGES HAVE NOT BEEN SAVED please click on "Save & Exit" to save changes'
                                                          );
                                                          j$("#eventContent").dialog({
                                                              autoOpen: false,
                                                              show: {
                                                                  duration: 0
                                                              }
                                                          });
                                                      });
};
pop2 = function(divId) {
    j$('#' + divId).dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            Cancel: function() {
                $(this).dialog('close');
            }
        }
    });
}
var tempNPTB ={!nptbData};
function onInitCompleteHandler() {
    popUp();
    if (dateDiff == 0) {
        j$("#visitWriteReadDiv").css('display', 'block');
        j$("#visitReadDiv").css('display', 'none');
    } else {
        j$("#visitWriteReadDiv").css('display', 'none');
        j$("#visitReadDiv").css('display', 'block');
    }
    j$("#eventContent").dialog("open");
    var expId = '{!dayExpenses.id}';
    if (expId != null) {
        j$("#expDiv").css('display', 'none');
        j$("#expReadDiv").css('display', 'block');
    } else {
        j$("#expDiv").css('display', 'block');
        j$("#expReadDiv").css('display', 'none');
    }
    j$('#accordionBeat').accordion({
        header: 'h4',
        autoHeight: false,
        clearStyle: true,
        heightStyle: "content",
        icons: {
            header: 'ui-icon-plus',
            headerSelected: 'ui-icon-minus'
        },
        collapsible: true,
        active: false
    });
}
function myFunction(temp){
    var maiArray = tempNPTB[temp];
    var test = document.getElementById(temp);
    var tempD = `<option value="volvo" >NPTB</option>`;
    for(var key in maiArray){
        if(maiArray.length>key){
            tempD += `<option value="volvo" disabled="true">${maiArray[key]}</option>`;
        }
    }
    test.innerHTML = tempD;
}
function onInitCompleteDealerAccordion(openSection) {
    var temp =openSection;
    j$('#accordionBeat').accordion({
        header: 'h4',
        autoHeight: false,
        clearStyle: true,
        heightStyle: "content",
        icons: {
            header: 'ui-icon-plus',
            headerSelected: 'ui-icon-minus'
        },
        collapsible: true,
        active: true
    });
    j$( "#accordionBeat" ).accordion( "option", "active", parseInt(temp, 10));
}
function validateFunction(test){
    var s =test-1;
    var x = document.getElementsByClassName("remarkId"+s);
}
function jsCallSaveVisits(tourId, visitDate) {
    jsSaveVisits(tourId, visitDate);
}
function showHideDate(leaveId) {
    var comLeave = j$("[id$=comLeaveId]").val();
    if (comLeave == 'Yes') {
        j$("[id$=comLeaveDateTh]").css('display', 'block');
        j$("[id$=comleaveData]").css('display', 'block');
        j$("[id$=comLeaveDateTh]").css('padding', '25px');
        j$("[id$=comleaveData]").css('padding', '25px');
    } else {
        j$("[id$=comLeaveDateTh]").css('display', 'none');
        j$("[id$=comleaveData]").css('display', 'none');
    }
}
function openAccountPopup(partyId, arrayIndex) {
    var partType = document.getElementById(partyId).value;
    var partyRecordTypeId = '';
    if (partType == '') {
        alert('Please select "Party Type"');
        document.getElementById(partyId).focus();
    } else if (partType == 'Vendor') {
        alert('Vendor is not a User not an account');
        document.getElementById(partyId).focus();
    } else {
        if (partType == 'Dealer') {
            partyRecordTypeId = '{!dealerRtId}';
        } else if (partType == 'Direct Dealer') {
            partyRecordTypeId = '{!directDealerId}';
        } else if (partType == 'Distributor') {
            partyRecordTypeId = '{!distrubutorId}';
        } else {
            partyRecordTypeId = '{!individualRecTypeId}';
        }
        if (partType != '' && partType == 'Projects') {
            var url = "/apex/AddProjectDetails";
        } else {
            var url = "/001/e?RecordType=" + partyRecordTypeId +
                "&ent=Account&00N3000000BjlZy=" + partType;
        }
        newWin = window.open(url, 'Popup','height=1000,width=1200,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,status=no');
    }
}
function assignUnplannedValues(promotionId){
    openUnplannedPopup(promotionId);
}
function openUnplannedPopup(promotionId) {
    j$('div#unplannedCompPanel').dialog({
        autoOpen: true,
        modal: true,
        width : 1000,
        
    });
}
function assignCalValues(promotionId){
    j$("[id$=tmpPromoId]").val(promotionId);
    j$('#tmpPromoId').val(promotionId);
    openPromotionPopup(promotionId);
}
function openPromotionPopup(promotionId) {
    j$('#tmpTourDate').val(tourDate);
    j$("[id$=promoDateId]").val(tourDate);
    j$('div#promoCompPanel').dialog({
        autoOpen: true,
        modal: true,
        width : 1000,
        
    });
}
function jsSaveExp() {
    APPL_SITEVISIT_CALENDAR_CTRL.getCountOfActivits(tourPlanId,
                                                    function(res, event) {
                                                        if (event.status) {
                                                            if (res == 0) {
                                                                alert(
                                                                    'Expense can not be saved without Saving Day-Activity'
                                                                );
                                                            } else {
                                                                
                                                                jsSaveExpense(tourPlanId, tourDate);
                                                            }
                                                        }
                                                    });
}
function jsClearExp() {
    alert('Js Clear Exp');
}
function jsEditExp() {
    alert('Edit Espense');
}
function searchFlights() {
    var select1 = document.getElementById("modeOfTravelId");
    var selected1 = [];
    for (var i = 0; i < select1.length; i++) {
        if (select1.options[i].selected) selected1.push(select1.options[
            i].value);
    }
    var selectedStr = selected1.toString();
    var finalModeVal = selectedStr.replace(/,/g, ";");
    j$("[id$=expModeId]").val(finalModeVal);
}
function setProducts(selectId, proId) {
    var selectProducts = document.getElementById(selectId);
    var selectedPros = [];
    for (var i = 0; i < selectProducts.length; i++) {
        if (selectProducts.options[i].selected) selectedPros.push(
            selectProducts.options[i].value);
    }
    var proArray = selectedPros.toString();
    var finalProductsVal = proArray.replace(/,/g, ";");
    document.getElementById(proId).value = finalProductsVal; 
}
function openOrderPopup() {
    alert('openOrderPopup it');
}
function copyToHiddenDate(dateId, dateHidden) {
    var htmlDate = document.getElementById(dateId).value;
}
function saveVisitValidation() {
    var leaveReason = j$("[id$=leaveReasonId]").val();
    var holidayRemark = j$("[id$=holidayRemarksId]").val();
    var expTypeVal = j$("[id$=expTypeId]").val();
    var userlookupid = j$("[id$=tlID]").val();
    var remarksMomIndustrial=j$("[id$=remarksIdIndus]").val();
    var partynameplumb=j$("[id$=targetId]").val();
    var companyNamevalue=j$("[id$=targetplumcolmm]").val();
    var CheckoutIndustrial=j$("[id$=gAdd2]").val();//geoAddId2
    var CheckoutIndustrial2=j$("[id$=geoAddId2]").val();
    j$('.Error').text("");
    var countError = -1;
    var hasError = false;
    if (expTypeVal == 'Travel') {
        j$('.exp textarea').addClass('required');
        j$("#expRemarks").css('display', 'block');
    } else {
        j$('.exp textarea').removeClass('required');
        j$("#expRemarks").css('display', 'none');
    }if ((CheckoutIndustrial != '' || CheckoutIndustrial2 != '') && remarksMomIndustrial=='') {
        j$('.exp textarea').addClass('required');
        j$("#remarksMomIndustrial").css('display', 'block');
    } else {
        j$('.exp textarea').removeClass('required');
        j$("#remarksMomIndustrial").css('display', 'none');
    }
    j$("[id$=purposeOfVisit]").addClass("required");
    j$('<p class="Error"></p>').insertAfter( j$("[id$=purposeOfVisit]") ); 
    j$('.required').each(function() {
        var fieldVal = j$(this).val();
        if (fieldVal == '' || fieldVal == null) {
            j$(this).next('.Error').text("Required field.");
            countError += 1;
            hasError = true;
            return false;
        } else {
            countError -= 1;
            hasError = false;
        }
    });
    j$("[id$=visittypeId1]").addClass("required");
    j$('<p class="Error"></p>').insertAfter( j$("[id$=visittypeId1]") ); 
    j$('.required').each(function() {
        var fieldVal = j$(this).val();
        if (fieldVal == '' || fieldVal == null) {
            j$(this).next('.Error').text("Required field.");
            countError += 1;
            hasError = true;
            return false;
        } else {
            countError -= 1;
            hasError = false;
        }
    });
    var targetVertical = j$("[id$=targetVertical]").val();
    if(targetVertical =="Column"){
        j$("[id$=visProList]").addClass("required");
        j$('<p class="Error"></p>').insertAfter( j$("[id$=visProList]") ); 
        j$('.required').each(function() {
            var fieldVal = j$(this).val();
            if (fieldVal == '' || fieldVal == null) {
                j$(this).next('.Error').text("Required field.");
                countError += 1;
                hasError = true;
                return false;
            } else {
                countError -= 1;
                hasError = false;
            }
        });
    }
    j$('.required1').each(function() {
        var fieldVal = j$(this).val();
        if (fieldVal == '' || fieldVal == null) {
            j$(this).next('.Error').text("Required field.");
            countError += 1;
            hasError = true;
            return false;
        } else {
            countError -= 1;
            hasError = false;
        }
    });
    j$('.requiredfield').each(function() {
        if (userlookupid == '' || userlookupid == null) {
            j$(this).next('.Error').text("Required field.");
            countError += 1;
            hasError = true;
        } else {
            countError -= 1;
            hasError = false;
        }
    });
    if (hasError) {
        alert('Please fill all the (*)Requried fields');
    } else {
        jsSaveVisits(tourPlanId, tourDate);
    }
}
function coypToApex(htmlId, expId) {
    var htmlVal = document.getElementById(htmlId).value;
    document.getElementById(expId).value = htmlVal;
}
function jsOpenExpnseAtt() {
    var expenseId = j$("[id$=expnseId]").val();
    var url = "/apex/APPL_EXPENSE_ATTACHMENT?expId=" + expenseId +
        "&expDate=" + tourDate;
    newWin = window.open(url, 'Popup','height=350,width=600,left=100,top=100,resizable=no,scrollbars=no,toolbar=no,status=no');
}
function copyToHtml() {
    var fareApexValue = j$("[id$=fareApex]").val();
    document.getElementById('fareId').value = fareApexValue;
    var fareApexValue = j$("[id$=rateApex]").val();
    document.getElementById('rateId').value = fareApexValue;
    var fareApexValue = j$("[id$=keApex]").val();
    document.getElementById('kmId').value = fareApexValue;
    var fareApexValue = j$("[id$=conveyance]").val();
    document.getElementById('hotelId').value = fareApexValue;
    var fareApexValue = j$("[id$=overNightApex]").val();
    document.getElementById('overNightId').value = fareApexValue;
    var fareApexValue = j$("[id$=additionApex]").val();
    document.getElementById('addionId').value = fareApexValue;
    var fareApexValue = j$("[id$=photoCopyApex]").val();
    document.getElementById('photoId').value = fareApexValue;
    var fareApexValue = j$("[id$=telephoneApex]").val();
    document.getElementById('telephoneId').value = fareApexValue;
    var fareApexValue = j$("[id$=courierApex]").val();
    document.getElementById('courierId').value = fareApexValue;
    var fareApexValue = j$("[id$=miscellaneousApex]").val();
    document.getElementById('miscellaneousId').value =fareApexValue;
    var fareApexValue = j$("[id$=expModeId]").val();
    document.getElementById('modeOfTravelId').value = fareApexValue;
}
function jsNonProjectAdd() {
    addColoums();
}
function jsProjectAdd() {
    addProjects();
}
function jsbrandingAdd() {
    addbranding();
}
function openCoulmnPromotion(promotionId) {
    window.open("/apex/APPL_NEW_PROMOTION_COLUMN?promoDate=" +
                tourDate + "&vertical=" + targetVetical + "&promoId=" +
                promotionId, 'Popup',
                'height=650,width=1050,left=100,top=100,resizable=no,scrollbars=no,toolbar=no,status=no'
               );
}
function openImg(divId) {
    pop2(divId);
    j$('#' + divId).dialog("open");
}
function checkForProject(partyTypeId, partyNameId) {
    var partyTypeVal = document.getElementById(partyTypeId).value;
    
    if (partyTypeVal == 'Projects') {
        document.getElementById(partyNameId).disabled = true;
    } else {
        document.getElementById(partyNameId).disabled = false;
    }
}
function checkForBranding(partyTypeId, partyNameId, useId) {
    var partyTypeVal = document.getElementById(partyTypeId).value;
    if (partyTypeVal == 'Vendor') {
        document.getElementById(partyNameId).disabled = true;
        document.getElementById(useId).disabled = false;
    } else {
        document.getElementById(partyNameId).disabled = false;
        document.getElementById(useId).disabled = true;
    }
}
function checkin(myid){
    var recid=myid.split(':');
    var i = recid[3];
    var j = recid[2];
    var geo_options = {
        enableHighAccuracy: true, 
        timeout           : 27000
    };
    if(navigator.geolocation){   
        navigator.geolocation.getCurrentPosition(function(position){ callbackSuccess(i,j,position)}, callbackError, geo_options);
    }else{ 
        alert('Not supported'); 
    }
}

function geocode_address(k,j,lat,lng){
    var geocoder  = new google.maps.Geocoder();             // create a geocoder object
    var location  = new google.maps.LatLng(lat, lng);    // turn coordinates into an object  
    var street_addr_val = ""; 
    var country_val = "";
    var pincode_val = "";
    var city_val="";
    var state_val="";
    geocoder.geocode({'latLng': location}, function (results, status) {
        if(status == google.maps.GeocoderStatus.OK) {           // if geocode success
            var add=results[0].formatted_address;         // if address found, pass to processing function
            document.getElementById('pageID:frm:'+j+':'+k+':geoAddId').value = add;
            for (var i = 0; i < results[0].address_components.length; i++) {
                var addressType = results[0].address_components[i].types[0];
                if(addressType=="country"){
                    country_val = results[0].address_components[i].long_name
                }
                if(addressType=="street_number" || addressType=="sublocality_level_3" || addressType=="sublocality_level_2" || addressType=="sublocality_level_1" || addressType=="route"){
                    street_addr_val += results[0].address_components[i].long_name + ","
                }
                if(addressType=="postal_code"){
                    pincode_val = results[0].address_components[i].long_name
                }
                if(addressType=="administrative_area_level_1"){
                    state_val = results[0].address_components[i].long_name
                }
                if(addressType=="locality" || addressType=="administrative_area_level_2" ){
                    city_val += results[0].address_components[i].long_name + ","
                }
            }
        }
    });
}
function callbackSuccess(i,j,position) { 
    alert('Your Geo Location is captured.');
    var lat = position.coords.latitude; 
    var lon = position.coords.longitude;
    document.getElementById('pageID:frm:'+j+':'+i+':latId').value = lat;
    document.getElementById('pageID:frm:'+j+':'+i+':lonId').value = lon;
    geocode_address(i,j,lat,lon);
}
function callbackError(error) { 
    switch(error.code) { 
        case error.UNKNOWN_ERROR: 
            alert("Geotagging encountered an error."); 
            break; 
        case error.PERMISSION_DENIED: 
            alert("The user does not want to give his position."); 
            break; 
        case error.POSITION_UNAVAILABLE: 
            alert("User's coordinates could not be found."); 
            break; 
        case error.TIMEOUT: 
            alert("Geotagging is taking too long."); 
            break; 
    } 
}
function checkout(myid){
    var recid=myid.split(':');
    var i = recid[3];
    var j = recid[2];
    var geo_options = {
        enableHighAccuracy: true, 
        timeout           : 27000
    };
    if(navigator.geolocation){     
        navigator.geolocation.getCurrentPosition(function(position){ callbackSuccess2(i,j,position)}, callbackError2, geo_options);
    }else{ 
        alert('Not supported'); 
    }
}
function geocode_address2(k,j,lat,lng){
    var geocoder  = new google.maps.Geocoder();
    var location  = new google.maps.LatLng(lat, lng); 
    var street_addr_val = "";
    var country_val = "";
    var pincode_val = "";
    var city_val="";
    var state_val="";
    geocoder.geocode({'latLng': location}, function (results, status) {
        if(status == google.maps.GeocoderStatus.OK) {           // if geocode success
            var add=results[0].formatted_address;         // if address found, pass to processing function
            document.getElementById('pageID:frm:'+j+':'+k+':geoAddId2').value = add;
            for (var i = 0; i < results[0].address_components.length; i++) {
                var addressType = results[0].address_components[i].types[0];
                if(addressType=="country"){
                    country_val = results[0].address_components[i].long_name
                }
                if(addressType=="street_number" || addressType=="sublocality_level_3" || addressType=="sublocality_level_2" || addressType=="sublocality_level_1" || addressType=="route"){
                    street_addr_val += results[0].address_components[i].long_name + ","
                }
                if(addressType=="postal_code"){
                    pincode_val = results[0].address_components[i].long_name
                }
                if(addressType=="administrative_area_level_1"){
                    state_val = results[0].address_components[i].long_name
                }
                if(addressType=="locality" || addressType=="administrative_area_level_2" ){
                    city_val += results[0].address_components[i].long_name + ","
                }
            }
        }
    });
}
function callbackSuccess2(i,j,position) { 
    alert('Your Geo Location is captured.');
    var lat = position.coords.latitude; 
    var lon = position.coords.longitude;
    document.getElementById('pageID:frm:'+j+':'+i+':latId2').value = lat;
    document.getElementById('pageID:frm:'+j+':'+i+':lonId2').value = lon;
    geocode_address2(i,j,lat,lon);
} 
function callbackError2(error) { 
    switch(error.code) { 
        case error.UNKNOWN_ERROR: 
            alert("Geotagging encountered an error."); 
            break; 
        case error.PERMISSION_DENIED: 
            alert("The user does not want to give his position."); 
            break; 
        case error.POSITION_UNAVAILABLE: 
            alert("User's coordinates could not be found."); 
            break; 
        case error.TIMEOUT: 
            alert("Geotagging is taking too long."); 
            break; 
    } 
}
function closeTheUnplannedSection(){
    j$('div#unplannedCompPanel').dialog('close');
    jsInitializeModal(tourPlanId,tourDate,targetVetical,dateDiff);
}
function closeTheUnplannedSectionOnCancel(){
    j$('div#unplannedCompPanel').dialog('close');
}
function validateDealerSection(){
}
function callDialer(visitId){      
    sforce.connection.sessionId= "{!$Api.Session_ID}";
    var task = new sforce.SObject("Task");
    task.WhatId = visitId;
    task.Subject = 'E-Visit';
    task.Number_of_Followups__c = '1';
    var result = sforce.connection.create([task]);
    if(result[0].getBoolean("success")) {
        Visualforce.remoting.Manager.invokeAction(
            '{!$RemoteAction.AmeyoCallController.callCustomer}',
            visitId, '{!$User.MobilePhone}', result[0].id,
            function(result, event){
            }, 
            {escape: true}
        );
    }
    else{
        alert("failed to create new Task " + result[0]);
    }
}
function updateTripTimeJs(tripType){ 
    //debugger;
    //console.log(tripType);
    //alert(tripType);
    jsUpdateTripTime(tripType,event.id);
}
</script>
</body>
</apex:page>